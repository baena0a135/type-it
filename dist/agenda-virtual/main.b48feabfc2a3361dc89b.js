(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("30Go"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"30Go":function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("30Go"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.F)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.z)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.E)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.F)(i):i,n+=" "}return n},m=null,v=!0,b=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,m=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?m=t:(m=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===m&&!0===f.get("logging_enabled")&&b(!0)),m){var n=y.apply(null,t);m(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)(t));d.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)(t));throw d.error(n),new Error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)(t));d.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},S="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===S||e===I)return-1;if(e===S||t===I)return 1;var n=W(t),r=W(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},A=function(t,e){return t===e?0:t<e?-1:1},k=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.F)(e))},j=function(t){if("object"!=typeof t||null===t)return Object(o.F)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.F)(e[i]),r+=":",r+=j(t[e[i]]);return r+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function N(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var D,R,L,M,F,V,U,q,H,z,B=function(t){var e,n,r,i,s;Object(o.d)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},Q=new RegExp("^-?(0*)\\d{1,10}$"),W=function(t){if(Q.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},G=function(t){try{t()}catch(e){setTimeout(function(){throw O("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},$=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},K=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Y=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.D)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.D)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.D)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),J="firebaseio.com",X="websocket",Z="long_polling",tt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.d)("string"==typeof t,"typeof type must == string"),Object(o.d)("object"==typeof e,"typeof params must == object"),t===X)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Z)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return N(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),et=function(t,e){var n=nt(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tt(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new K(n.pathString)}},nt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):O("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},rt=/[\[\].#$\/\u0000-\u001F\u007F]/,it=/[\[\].#$\u0000-\u001F\u007F]/,ot=10485760,st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},ut=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},ct=function(t,e,n,r,i){i&&void 0===n||lt(Object(o.l)(t,e,i),n,r)},lt=function(t,e,n){var r=n instanceof K?new Y(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>ot/3&&Object(o.D)(e)>ot)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(N(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),lt(t,n,r),r.pop()}),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ht=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];N(n,function(t,e){var n=new K(t);if(lt(s,e,r.child(n)),".priority"===n.getBack()&&!ut(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!st(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(K.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ft=function(t,e,n,r){if(!r||void 0!==n){if(T(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ut(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gt=function(t,e,n,r){if(!(r&&void 0===n||at(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gt(t,e,n,r)},mt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},vt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},_t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.G)("OnDisconnect.cancel",0,1,arguments.length),Object(o.H)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.G)("OnDisconnect.remove",0,1,arguments.length),mt("OnDisconnect.remove",this.path_),Object(o.H)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.G)("OnDisconnect.set",1,2,arguments.length),mt("OnDisconnect.set",this.path_),ct("OnDisconnect.set",1,t,this.path_,!1),Object(o.H)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.G)("OnDisconnect.setWithPriority",2,3,arguments.length),mt("OnDisconnect.setWithPriority",this.path_),ct("OnDisconnect.setWithPriority",1,t,this.path_,!1),ft("OnDisconnect.setWithPriority",2,e,!1),Object(o.H)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.G)("OnDisconnect.update",1,2,arguments.length),mt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("OnDisconnect.update",1,t,this.path_,!1),Object(o.H)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),wt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.G)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Et=(D="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",R=0,L=[],function(t){var e,n=t===R;R=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=D.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===L[e];e--)L[e]=0;L[e]++}else for(e=0;e<12;e++)L[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=D.charAt(L[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),Ct=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ot=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ct(S,t),r=new Ct(S,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ct.MIN},t}(),Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return M},set:function(t){M=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return new Ct(I,M)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ct(t,M)},e.prototype.toString=function(){return".key"},e}(Ot),St=new Tt,It=function(t){return"number"==typeof t?"number:"+B(t):"string:"+t},xt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===F||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===F||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},At=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),xt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return V},set:function(t){V=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+It(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?B(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),kt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return new Ct(I,new At("[PRIORITY-POST]",q))},e.prototype.makePost=function(t,e){var n=U(t);return new Ct(e,new At("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ot)),jt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Pt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Dt.EMPTY_NODE,this.right=null!=o?o:Dt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Dt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Dt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Nt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Pt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Dt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Pt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new jt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new jt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Nt,t}(),Rt=Math.log(2),Lt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Rt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Mt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Pt(s,o.node,Pt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Pt(s,o.node,Pt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Pt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Pt.BLACK):(a(h,Pt.BLACK),a(h,Pt.RED))}return o}(new Lt(t.length));return new Dt(r||e,o)},Ft={},Vt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(Ft&&kt,"ChildrenNode.ts has not been loaded"),H=H||new t({".priority":Ft},{".priority":kt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.C)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Dt?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==St,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Ct.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Mt(s,e.getCompare()):Ft;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.A)(this.indexes_,function(t,i){var s=Object(o.C)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===Ft){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Ct.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Mt(a,s.getCompare())}return Ft}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Ct(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.A)(this.indexes_,function(t){if(t===Ft)return t;var r=n.get(e.name);return r?t.remove(new Ct(e.name,r)):t}),this.indexSet_)},t}();function Ut(t,e){return x(t.name,e.name)}function qt(t,e){return x(t,e)}var Ht=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&xt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return z||(z=new t(new Dt(qt),null,Vt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||z},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?z:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ct(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?z:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.d)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(kt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+It(this.getPriority().val())+":"),this.forEachChild(kt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ct(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ct(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ct(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===zt?-1:0},t.prototype.withIndex=function(e){if(e===St||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===St||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(kt),r=e.getIterator(kt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===St?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),zt=new(function(t){function e(){return t.call(this,new Dt(qt),Ht.EMPTY_NODE,Vt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ht.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ht));function Bt(t,e){if(void 0===e&&(e=null),null===t)return Ht.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new At(t,Bt(e));if(t instanceof Array){var n=Ht.EMPTY_NODE;return N(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=Bt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(Bt(e))}var r=[],i=!1;if(N(t,function(t,e){if("."!==t.substring(0,1)){var n=Bt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ct(t,n)))}}),0===r.length)return Ht.EMPTY_NODE;var s=Mt(r,Ut,function(t){return t.name},qt);if(i){var a=Mt(r,kt.getCompare());return new Ht(s,Bt(e),new Vt({".priority":a},{".priority":kt}))}return new Ht(s,Bt(e),Vt.Default)}Object.defineProperties(Ct,{MIN:{value:new Ct(S,Ht.EMPTY_NODE)},MAX:{value:new Ct(I,zt)}}),Tt.__EMPTY_NODE=Ht.EMPTY_NODE,At.__childrenNodeConstructor=Ht,F=zt,q=zt,U=Bt;var Qt,Wt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return Ct.MAX},e.prototype.makePost=function(t,e){var n=Bt(t);return new Ct(e,n)},e.prototype.toString=function(){return".value"},e}(Ot)),Gt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Bt(t),r=Ht.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ct(e,r)},e.prototype.maxPost=function(){var t=Ht.EMPTY_NODE.updateChild(this.indexPath_,zt);return new Ct(I,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ot),$t=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.G)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.G)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.G)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.G)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.G)("DataSnapshot.child",0,1,arguments.length),e=String(e),gt("DataSnapshot.child",1,e,!1);var n=new K(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,kt)},t.prototype.hasChild=function(t){Object(o.G)("DataSnapshot.hasChild",1,1,arguments.length),gt("DataSnapshot.hasChild",1,t,!1);var e=new K(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.G)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.G)("DataSnapshot.forEach",1,1,arguments.length),Object(o.H)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),kt))})},t.prototype.hasChildren=function(){return Object(o.G)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.G)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.G)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Kt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.F)(this.snapshot.exportVal())},t}(),Yt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Jt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Kt("value",this,new $t(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Xt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Kt(t.type,this,new $t(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Zt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(Qt,"Reference.ts has not been loaded"),Qt},set:function(t){Qt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===St){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==S)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===kt){if(null!=e&&!ut(e)||null!=n&&!ut(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof Gt||t.getIndex()===Wt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.G)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.G)("Query.on",2,4,arguments.length),dt("Query.on",1,e,!1),Object(o.H)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Jt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Xt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.G)("Query.off",0,3,arguments.length),dt("Query.off",1,t,!0),Object(o.H)("Query.off",2,e,!0),Object(o.I)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Jt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Xt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.G)("Query.once",1,4,arguments.length),dt("Query.once",1,e,!1),Object(o.H)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.G)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.G)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.G)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');gt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new K(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Gt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.G)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(St);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.G)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.G)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Wt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAt",0,2,arguments.length),ct("Query.startAt",1,e,this.path,!0),pt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endAt",0,2,arguments.length),ct("Query.endAt",1,e,this.path,!0),pt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.G)("Query.equalTo",1,2,arguments.length),ct("Query.equalTo",1,t,this.path,!1),pt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.G)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.G)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=j(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.G)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.H)(t,3,r.cancel,!0),r.context=n,Object(o.I)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),te=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ee=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ne=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?re(t[".sv"],e,n):"object"==typeof t[".sv"]?ie(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},re=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},ie=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},oe=function(t,e,n,r){return ae(e,new ee(n,t),r)},se=function(t,e,n){return ae(t,new te(e),n)};function ae(t,e,n){var r,i=t.getPriority().val(),o=ne(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new At(a,Bt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new At(o))),u.forEachChild(kt,function(t,i){var o=ae(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var ue,ce,le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(kt,function(t,e){n.remember(new K(t),e)}),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new K(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),he=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),fe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.d)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),de=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=he.ACK_USER_WRITE,this.source=fe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new K(e));return new t(K.Empty,n,this.revert)}return Object(o.d)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),pe=function(){function t(t,e){void 0===e&&(ue||(ue=new Dt(A)),e=ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return N(e,function(t,e){n=n.set(new K(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:K.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new K(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(K.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,K.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,K.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(K.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),ge=function(){function t(t,e){this.source=t,this.path=e,this.type=he.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,K.Empty):new t(this.source,this.path.popFront())},t}(),ye=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=he.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,K.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),me=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=he.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new K(e));return n.isEmpty()?null:n.value?new ye(this.source,K.Empty,n.value):new t(this.source,K.Empty,n)}return Object(o.d)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ve=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ve(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ve(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ve(Ht.EMPTY_NODE,!1,!1),new ve(Ht.EMPTY_NODE,!1,!1)),t}(),_e=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),we=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(_e.childRemovedChange(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(_e.childAddedChange(e,n)):s.trackChildChange(_e.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(kt,function(t,r){e.hasChild(t)||n.trackChildChange(_e.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(kt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(_e.childChangedChange(e,r,i))}else n.trackChildChange(_e.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ht.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ee=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)(e===_e.CHILD_ADDED||e===_e.CHILD_CHANGED||e===_e.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===_e.CHILD_ADDED&&i===_e.CHILD_REMOVED)this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_ADDED)this.changeMap.delete(n);else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_CHANGED)this.changeMap.set(n,_e.childRemovedChange(n,r.oldSnap));else if(e===_e.CHILD_CHANGED&&i===_e.CHILD_ADDED)this.changeMap.set(n,_e.childAddedChange(n,t.snapshotNode));else{if(e!==_e.CHILD_CHANGED||i!==_e.CHILD_CHANGED)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ce=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Oe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ve(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Te=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Se=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.d)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.d)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Ee;if(n.type===he.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===he.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===he.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==he.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Te(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(_e.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.d)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Ht?c:Ht.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(o.d)(1===e.getLength(),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var g=e.popFront(),y=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);y=null!=m?s.getNode().getImmediateChild(f).updateChild(g,m):s.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(s.getNode(),f,y,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,Ce,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new Oe(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Oe(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Ht.EMPTY_NODE}if(f.equals(d))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:pe.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new K(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new K(e),f,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=pe.Empty;return a.getNode().forEachChild(St,function(t,e){u=u.set(new K(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=pe.Empty;return n.foreach(function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ce,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Oe(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.d)(h instanceof Ht,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Ht.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(K.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Ie=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===_e.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(_e.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,_e.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,_e.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,_e.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,_e.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,_e.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.compareChanges_.bind(this)),s.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.e)("Should only compare child_ events.");var n=new Ct(t.childName,t.snapshotNode),r=new Ct(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),xe=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new we(n.getIndex()),i=n.getNodeFilter();this.processor_=new Se(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Ht.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ht.EMPTY_NODE,s.getNode(),null),c=new ve(a,o.isFullyInitialized(),r.filtersNodes()),l=new ve(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new be(l,c),this.eventGenerator_=new Ie(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.d)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===he.MERGE&&null!==t.source.queryId&&(Object(o.d)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.d)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.d)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(kt,function(t,e){n.push(_e.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(_e.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Ae=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(ce,"Reference.ts has not been loaded"),ce},set:function(t){Object(o.d)(!ce,"__referenceConstructor has already been defined"),ce=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.d)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Ht?(a=n.calcCompleteEventChildren(r),u=!1):(a=Ht.EMPTY_NODE,u=!1);var c=new be(new ve(a,u,!1),new ve(r,i,!1));s=new xe(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(i.e)(f.value,2),g=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(g),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){o={error:y}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),ke=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new pe(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=K.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new pe(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return N(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,pe.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(K.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(kt,function(e,n){t.push(new Ct(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Ct(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new pe(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return je(K.Empty,this.writeTree_,t)},t.Empty=new t(new pe(null)),t}();function je(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=je(t.child(e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var Pe=function(){function t(){this.visibleWrites_=ke.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ne(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.d)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.d)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):N(r.children,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(K.Empty)?t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e).apply(n||Ht.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(K.Empty)?a.apply(n||Ht.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ht.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(kt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(kt,function(t,e){var r=i.childCompoundWrite(new K(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.d)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var s=this.visibleWrites_.childCompoundWrite(i);return s.isEmpty()?r.getChild(e):s.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(K.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,K.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=ke.Empty,i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?(u=K.relativePath(n,a),r=r.addWrite(u,s.snap)):a.contains(n)&&(u=K.relativePath(a,n),r=r.addWrite(K.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(n.contains(a))u=K.relativePath(n,a),r=r.addWrites(u,s.children);else if(a.contains(n))if((u=K.relativePath(a,n)).isEmpty())r=r.addWrites(K.Empty,s.children);else{var c=Object(o.C)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(K.Empty,l)}}}}}return r},t}(),Ne=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),De=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=pe.Empty,this.pendingWriteTree_=new Pe,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ye(fe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=pe.fromObject(e);return this.applyOperationToSyncPoints_(new me(fe.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=pe.Empty;return null!=n.snap?r=r.set(K.Empty,!0):N(n.children,function(t,e){r=r.set(new K(t),e)}),this.applyOperationToSyncPoints_(new de(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ye(fe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=pe.fromObject(e);return this.applyOperationToSyncPoints_(new me(fe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ge(fe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=K.relativePath(s,e),c=new ye(fe.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=K.relativePath(s,e),c=pe.fromObject(n),l=new me(fe.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=K.relativePath(o,e),u=new ge(fe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=K.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(K.Empty)):(u=new Ae,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Ht.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(K.Empty);n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.d)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var g=d[p],y=g.getQuery(),m=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),m.hashFn,m.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=K.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),N(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.d)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),N(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ht.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new K(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.d)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(K.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(K.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(K.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(K.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(K.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Re=function(){function t(){this.rootNode_=Ht.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Le=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),Me=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Le),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Fe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&N(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Ve=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Fe(t);var n=1e4+2e4*Math.random();$(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;N(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),$(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ue=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new qe(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),qe=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();m&&_("event: "+e.toString()),G(n)}}},t.prototype.getPath=function(){return this.path_},t}(),He=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ze=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(He),Be=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.t)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(He),Qe=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&G(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),We="start",Ge="close",$e=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Me.getCollection(e),this.urlFn=function(t){return e.connectionURL(Z,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Qe(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.v)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Ke(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===We)n.id=s,n.password=a;else{if(o!==Ge)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(J)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.v)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.v)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.F)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Ke=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.v)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.v)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Ye="";function Je(t){Ye=t}var Xe=null;"undefined"!=typeof MozWebSocket?Xe=MozWebSocket:"undefined"!=typeof WebSocket&&(Xe=WebSocket);var Ze=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Me.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.v)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(J)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(X,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.v)()){var r={headers:{"User-Agent":"Firebase/5/"+Ye+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Xe(this.connURL,[],r)}else this.mySock=new Xe(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Xe&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.z)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),tn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[$e,Ze]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Ze&&Ze.isAvailable(),s=o&&!Ze.previouslyFailed();if(e.webSocketOnly&&(o||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ze];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),en=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new tn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=$(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=k("t",t),n=k("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=k("t",t),n=k("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=k("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),nn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),rn=1e3,on=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=rn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.v)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),ze.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Be.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.F)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.C)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();O("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.n)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.y)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.F)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.F)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=rn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new en(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){O(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&O(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.r)(this.interruptReasons_)&&(this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return j(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new K(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.v)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Ye.replace(/\./g,"-")]=1,Object(o.t)()?t["framework.cordova"]=1:Object(o.w)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Be.getInstance().currentlyOnline();return Object(o.r)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(nn),sn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.C)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.B)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.z)(u.responseText)}catch(e){O("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&O("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(nn),an="repo_interrupt",un=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new le,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Me.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new sn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.F)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new on(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=Me.getOrCreateReporter(this.repoInfo_,function(){return new Ve(t.stats_,t.server_)}),this.transactionsInit_(),this.infoData_=new Re,this.infoSyncTree_=new De({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new De({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new K(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new K(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.A)(e,function(t){return Bt(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Bt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.A)(e,function(t){return Bt(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Bt(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;N(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new K("/.info/"+t),r=Bt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then(function(n){var r=Bt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new $t(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){e.log_("get for query "+Object(o.F)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new $t(r,t.getRef(),t.getQueryParams().getIndex()))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Bt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=se(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||O("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(N(e,function(e,n){i=!1,s[e]=oe(t.child(e),Bt(n),r.serverSyncTree_,o)}),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||O("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)}),N(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new le;this.onDisconnect_.forEachTree(K.Empty,function(r,i){var o=oe(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree(K.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new le,this.eventQueue_.raiseEventsForChangedPath(K.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Bt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Bt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.r)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&N(e,function(e,n){var i=Bt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(an)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(an)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Fe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);N(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&G(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new _n(this))},enumerable:!1,configurable:!0}),t}(),cn=function(){function t(e){this.indexedFilter_=new we(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ct(e,n))||(n=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ht.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ht.EMPTY_NODE);var i=this;return e.forEachChild(kt,function(t,e){i.matches(new Ct(t,e))||(r=r.updateImmediateChild(t,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ln=function(){function t(t){this.rangedFilter_=new cn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ct(e,n))||(n=Ht.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ht.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ht.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Ht.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new Ct(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(_e.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(_e.childRemovedChange(e,f));var g=u.updateImmediateChild(e,Ht.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(_e.childAddedChange(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(_e.childRemovedChange(l.name,l.node)),i.trackChildChange(_e.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Ht.EMPTY_NODE)):t},t}(),hn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==kt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===kt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new we(this.getIndex()):this.hasLimit()?new ln(this):new cn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===kt?e=n.PRIORITY_INDEX:this.index_===Wt?e=n.VALUE_INDEX:this.index_===St?e=n.KEY_INDEX:(Object(o.d)(this.index_ instanceof Gt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.F)(e),this.startSet_&&(r[n.START_AT]=Object(o.F)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.F)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.F)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.F)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),fn=function(t){function e(e,n){if(!(e instanceof un))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,hn.DEFAULT,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.G)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.G)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof K||(null===this.path.getFront()?yt("Reference.child",1,t,!1):gt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.G)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.G)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.G)("Reference.set",1,2,arguments.length),mt("Reference.set",this.path),ct("Reference.set",1,t,this.path,!1),Object(o.H)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.G)("Reference.update",1,2,arguments.length),mt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("Reference.update",1,t,this.path,!1),Object(o.H)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.G)("Reference.setWithPriority",2,3,arguments.length),mt("Reference.setWithPriority",this.path),ct("Reference.setWithPriority",1,t,this.path,!1),ft("Reference.setWithPriority",2,e,!1),Object(o.H)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.G)("Reference.remove",0,1,arguments.length),mt("Reference.remove",this.path),Object(o.H)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.G)("Reference.transaction",1,3,arguments.length),mt("Reference.transaction",this.path),Object(o.H)("Reference.transaction",1,t,!1),Object(o.H)("Reference.transaction",2,e,!0),bt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new wt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.G)("Reference.setPriority",1,2,arguments.length),mt("Reference.setPriority",this.path),ft("Reference.setPriority",1,t,!1),Object(o.H)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.G)("Reference.push",0,2,arguments.length),mt("Reference.push",this.path),ct("Reference.push",1,t,this.path,!0),Object(o.H)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Et(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return mt("Reference.onDisconnect",this.path),new _t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Zt);Zt.__referenceConstructor=fn,Ae.__referenceConstructor=fn;var dn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),pn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new dn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof K?e:new K(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.C)(r.node_.children,i)||new dn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.d)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;N(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new K(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.h)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),gn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});un.MAX_TRANSACTION_RETRIES_=25,un.prototype.transactionsInit_=function(){this.transactionQueueTree_=new pn},un.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new fn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new $t(a.currentInputSnapshot,new fn(this,a.path),kt);a.onComplete(null,!1,l)}}else{lt("transaction failed: Data returned ",c,a.path),a.status=gn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(o.h)(c,".priority")?(d=Object(o.C)(c,".priority"),Object(o.d)(ut(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||Ht.EMPTY_NODE).getPriority().val(),d=d;var g=this.generateServerValues(),y=Bt(c,d),m=se(y,u,g);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,m,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},un.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ht.EMPTY_NODE},un.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===gn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},un.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.d)(c.status===gn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=gn.SENT,c.retryCount++;var l=K.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=gn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new fn(n,e[s].path),c=new $t(a,u,kt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)G(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===gn.SENT_NEEDS_ABORT?gn.NEEDS_ABORT:gn.RUN;else for(O("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=gn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},un.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},un.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===gn.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=K.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.d)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===gn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===gn.RUN)if(a.retryCount>=un.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){lt("transaction failed: Data returned ",f,a.path);var d=Bt(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,g=this.generateServerValues(),y=se(d,h,g);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=gn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var m=new fn(this,t[s].path),v=new $t(t[s].currentInputSnapshot,m,kt);n.push(t[s].onComplete.bind(null,null,!1,v))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)G(n[s]);this.sendReadyTransactions_()}},un.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},un.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},un.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},un.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==gn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},un.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},un.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===gn.SENT_NEEDS_ABORT||(e[s].status===gn.SENT?(Object(o.d)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=gn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.d)(e[s].status===gn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)G(n[s])}};var yn,mn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';O(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),vn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),bn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return yn||(yn=new t),yn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new tt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new vn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=et(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=et(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new vn:new mn(t,e);return vt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||C("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.C)(this.repos_,t.app.name);e&&Object(o.C)(e,t.key)===t||C("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.C)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.C)(r,t.toURLString());return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new un(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),_n=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),bn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof un||C("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new fn(this.repo_,K.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?C("Cannot call useEmulator() after instance has already been initialized."):bn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.G)("database.ref",0,1,arguments.length),t instanceof fn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.G)(e,1,1,arguments.length);var n=et(t,this.repo_.repoInfo_.nodeAdmin);vt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||C(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&C("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.G)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.G)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),wn=Object.freeze({__proto__:null,forceLongPolling:function(){Ze.forceDisallow(),$e.forceAllow()},forceWebSockets:function(){$e.forceDisallow()},isWebSocketsAvailable:function(){return Ze.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Je(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:bn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),En=on;on.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},on.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Cn=Object.freeze({__proto__:null,DataConnection:En,RealTimeConnection:en,hijackHash:function(t){var e=on.prototype.put;return on.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){on.prototype.put=e}},ConnectionTarget:tt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){bn.getInstance().forceRestClient(t)}}),On=_n.ServerValue;!function(e){Je(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return bn.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:fn,Query:Zt,Database:_n,DataSnapshot:$t,enableLogging:b,INTERNAL:wn,ServerValue:On,TEST_ACCESS:Cn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.8.1"),Object(o.v)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.1.2","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return A}),n.d(e,"b",function(){return Tu}),n.d(e,"c",function(){return _u}),n.d(e,"d",function(){return vu}),n.d(e,"e",function(){return bu}),n.d(e,"f",function(){return gc}),n.d(e,"g",function(){return oc}),n.d(e,"h",function(){return _a}),n.d(e,"i",function(){return Lu}),n.d(e,"j",function(){return Gs}),n.d(e,"k",function(){return xu}),n.d(e,"l",function(){return Js}),n.d(e,"m",function(){return Cr}),n.d(e,"n",function(){return Ja}),n.d(e,"o",function(){return so}),n.d(e,"p",function(){return h}),n.d(e,"q",function(){return x}),n.d(e,"r",function(){return Co}),n.d(e,"s",function(){return pa}),n.d(e,"t",function(){return ga}),n.d(e,"u",function(){return Iu}),n.d(e,"v",function(){return ja}),n.d(e,"w",function(){return ac}),n.d(e,"x",function(){return ka}),n.d(e,"y",function(){return tc}),n.d(e,"z",function(){return Vu}),n.d(e,"A",function(){return f}),n.d(e,"B",function(){return Ou}),n.d(e,"C",function(){return Cu}),n.d(e,"D",function(){return Zs}),n.d(e,"E",function(){return Xs}),n.d(e,"F",function(){return Ir}),n.d(e,"G",function(){return ea}),n.d(e,"H",function(){return Sn}),n.d(e,"I",function(){return p}),n.d(e,"J",function(){return lc}),n.d(e,"K",function(){return Sa}),n.d(e,"L",function(){return Gu}),n.d(e,"M",function(){return U}),n.d(e,"N",function(){return ra}),n.d(e,"O",function(){return na}),n.d(e,"P",function(){return Na}),n.d(e,"Q",function(){return K}),n.d(e,"R",function(){return ec}),n.d(e,"S",function(){return en}),n.d(e,"T",function(){return M}),n.d(e,"U",function(){return tn}),n.d(e,"V",function(){return dc}),n.d(e,"W",function(){return Yu}),n.d(e,"X",function(){return Su}),n.d(e,"Y",function(){return uo}),n.d(e,"Z",function(){return Ns}),n.d(e,"ab",function(){return On}),n.d(e,"bb",function(){return an}),n.d(e,"cb",function(){return Qe}),n.d(e,"db",function(){return Ge}),n.d(e,"eb",function(){return Je}),n.d(e,"fb",function(){return Ke}),n.d(e,"gb",function(){return $e}),n.d(e,"hb",function(){return Ye}),n.d(e,"ib",function(){return As}),n.d(e,"jb",function(){return fc}),n.d(e,"kb",function(){return ks}),n.d(e,"lb",function(){return js}),n.d(e,"mb",function(){return We}),n.d(e,"nb",function(){return R}),n.d(e,"ob",function(){return No}),n.d(e,"pb",function(){return Ko}),n.d(e,"qb",function(){return $o}),n.d(e,"rb",function(){return xs}),n.d(e,"sb",function(){return Nt}),n.d(e,"tb",function(){return g}),n.d(e,"ub",function(){return Be}),n.d(e,"vb",function(){return To}),n.d(e,"wb",function(){return Pn}),n.d(e,"xb",function(){return Bs}),n.d(e,"yb",function(){return di}),n.d(e,"zb",function(){return Mo}),n.d(e,"Ab",function(){return Cs}),n.d(e,"Bb",function(){return ls}),n.d(e,"Cb",function(){return hu}),n.d(e,"Db",function(){return st}),n.d(e,"Eb",function(){return dt}),n.d(e,"Fb",function(){return b}),n.d(e,"Gb",function(){return _}),n.d(e,"Hb",function(){return lt}),n.d(e,"Ib",function(){return pt}),n.d(e,"Jb",function(){return Uo}),n.d(e,"Kb",function(){return Wo}),n.d(e,"Lb",function(){return Qo}),n.d(e,"Mb",function(){return Bo}),n.d(e,"Nb",function(){return Go}),n.d(e,"Ob",function(){return br}),n.d(e,"Pb",function(){return Os}),n.d(e,"Qb",function(){return kt}),n.d(e,"Rb",function(){return qo}),n.d(e,"Sb",function(){return mu}),n.d(e,"Tb",function(){return Yo}),n.d(e,"Ub",function(){return fu}),n.d(e,"Vb",function(){return Re}),n.d(e,"Wb",function(){return De}),n.d(e,"Xb",function(){return Zo}),n.d(e,"Yb",function(){return Ka}),n.d(e,"Zb",function(){return Ya}),n.d(e,"ac",function(){return ns}),n.d(e,"bc",function(){return es}),n.d(e,"cc",function(){return Ho}),n.d(e,"dc",function(){return $a}),n.d(e,"ec",function(){return cu}),n.d(e,"fc",function(){return Vo}),n.d(e,"gc",function(){return ae}),n.d(e,"hc",function(){return In}),n.d(e,"ic",function(){return ht}),n.d(e,"jc",function(){return Fo}),n.d(e,"kc",function(){return yu}),n.d(e,"lc",function(){return _s}),n.d(e,"mc",function(){return ws}),n.d(e,"nc",function(){return Es}),n.d(e,"oc",function(){return lu});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){return{toString:t}.toString()}const c="__parameters__";function l(t,e,n){return u(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(c)?t[c]:Object.defineProperty(t,c,{value:[]})[c];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const h=l("Inject",t=>({token:t})),f=l("Optional"),d=l("Self"),p=l("SkipSelf");function g(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(g).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function y(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}function m(t){for(let e in t)if(t[e]===m)return e;throw Error("Could not find renamed property on target object.")}function v(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function b(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function w(t){return E(t,O)||E(t,S)}function E(t,e){return t.hasOwnProperty(e)?t[e]:null}function C(t){return t&&(t.hasOwnProperty(T)||t.hasOwnProperty(I))?t[T]:null}const O=m({"\u0275prov":m}),T=m({"\u0275inj":m}),S=m({ngInjectableDef:m}),I=m({ngInjectorDef:m});class x{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=b({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const A=new x("AnalyzeForEntryComponents");var k=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({});const j="undefined"!=typeof globalThis&&globalThis,P="undefined"!=typeof window&&window,N="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,D="undefined"!=typeof global&&global,R=j||D||P||N,L=m({__forward_ref__:m});function M(t){return t.__forward_ref__=M,t.toString=function(){return g(this())},t}function F(t){return V(t)?t():t}function V(t){return"function"==typeof t&&t.hasOwnProperty(L)&&t.__forward_ref__===M}const U=Function;function q(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),q(r,e)):e!==t&&e.push(r)}return e}function H(t,e){t.forEach(t=>Array.isArray(t)?H(t,e):e(t))}function z(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function B(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Q(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function W(t,e,n){let r=$(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function G(t,e){const n=$(t,e);if(n>=0)return t[1|n]}function $(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var K=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const Y={},J=[],X=m({"\u0275cmp":m}),Z=m({"\u0275dir":m}),tt=m({"\u0275pipe":m}),et=m({"\u0275mod":m}),nt=m({"\u0275loc":m}),rt=m({"\u0275fac":m}),it=m({__NG_ELEMENT_ID__:m});let ot=0;function st(t){return u(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===k.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||J,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||K.Emulated,id:"c",styles:t.styles||J,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=ot++,n.inputs=ft(t.inputs,e),n.outputs=ft(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(at):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(ut):null,n})}function at(t){return gt(t)||function(t){return t[Z]||null}(t)}function ut(t){return function(t){return t[tt]||null}(t)}const ct={};function lt(t){const e={type:t.type,bootstrap:t.bootstrap||J,declarations:t.declarations||J,imports:t.imports||J,exports:t.exports||J,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&u(()=>{ct[t.id]=t.type}),e}function ht(t,e){return u(()=>{const n=yt(t,!0);n.declarations=e.declarations||J,n.imports=e.imports||J,n.exports=e.exports||J})}function ft(t,e){if(null==t)return Y;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const dt=st;function pt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function gt(t){return t[X]||null}function yt(t,e){const n=t[et]||null;if(!n&&!0===e)throw new Error(`Type ${g(t)} does not have '\u0275mod' property.`);return n}function mt(t){return"string"==typeof t?t:null==t?"":""+t}function vt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():mt(t)}var bt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let _t;function wt(t){const e=_t;return _t=t,e}function Et(t,e,n){const r=w(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&bt.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${g(t)}]`)}const Ct={},Ot=/\n/gm,Tt="__source",St=m({provide:String,useValue:m});let It=void 0;function xt(t){const e=It;return It=t,e}function At(t,e=bt.Default){if(void 0===It)throw new Error("inject() must be called from an injection context");return null===It?Et(t,void 0,e):It.get(t,e&bt.Optional?null:void 0,e)}function kt(t,e=bt.Default){return(_t||At)(F(t),e)}function jt(t){const e=[];for(let n=0;n<t.length;n++){const r=F(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=bt.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof f||"Optional"===i.ngMetadataName||i===f?n|=bt.Optional:i instanceof p||"SkipSelf"===i.ngMetadataName||i===p?n|=bt.SkipSelf:i instanceof d||"Self"===i.ngMetadataName||i===d?n|=bt.Self:t=i instanceof h||i===h?i.token:i}e.push(kt(t,n))}else e.push(kt(r))}return e}let Pt=void 0;function Nt(t){Pt=t}const Dt=20,Rt=10;function Lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Mt(t){return Array.isArray(t)&&!0===t[1]}function Ft(t){return 0!=(8&t.flags)}function Vt(t){return 2==(2&t.flags)}function Ut(t){return 1==(1&t.flags)}function qt(t){return null!==t.template}const Ht="http://www.w3.org/2000/svg";function zt(t){return!!t.listen}const Bt={createRenderer:(t,e)=>void 0!==Pt?Pt:"undefined"!=typeof document?document:void 0};function Qt(t){for(;Array.isArray(t);)t=t[0];return t}function Wt(t,e){return Qt(e[t])}function Gt(t,e){return Qt(e[t.index])}function $t(t,e){return t.data[e]}function Kt(t,e){return t[e]}function Yt(t,e){const n=e[t];return Lt(n)?n:n[0]}function Jt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Xt(t){return 4==(4&t[2])}function Zt(t){return 128==(128&t[2])}function te(t,e){return null==e?null:t[e]}function ee(t){t[18]=0}function ne(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const re={lFrame:Ie(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ie(){return re.bindingsEnabled}function oe(){return re.lFrame.lView}function se(){return re.lFrame.tView}function ae(t){re.lFrame.contextLView=t}function ue(){let t=ce();for(;null!==t&&64===t.type;)t=t.parent;return t}function ce(){return re.lFrame.currentTNode}function le(t,e){const n=re.lFrame;n.currentTNode=t,n.isParent=e}function he(){return re.lFrame.isParent}function fe(){re.lFrame.isParent=!1}function de(){return re.isInCheckNoChangesMode}function pe(t){re.isInCheckNoChangesMode=t}function ge(){const t=re.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ye(){return re.lFrame.bindingIndex}function me(){return re.lFrame.bindingIndex++}function ve(t){const e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function be(t,e){const n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,_e(e)}function _e(t){re.lFrame.currentDirectiveIndex=t}function we(){return re.lFrame.currentQueryIndex}function Ee(t){re.lFrame.currentQueryIndex=t}function Ce(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Oe(t,e,n){if(n&bt.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&bt.Host||(r=Ce(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=re.lFrame=Se();return r.currentTNode=e,r.lView=t,!0}function Te(t){const e=Se(),n=t[1];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Se(){const t=re.lFrame,e=null===t?null:t.child;return null===e?Ie(t):e}function Ie(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function xe(){const t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ae=xe;function ke(){const t=xe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function je(){return re.lFrame.selectedIndex}function Pe(t){re.lFrame.selectedIndex=t}function Ne(){const t=re.lFrame;return $t(t.tView,t.selectedIndex)}function De(){re.lFrame.currentNamespace=Ht}function Re(){re.lFrame.currentNamespace=null}let Le;function Me(t){var e;return(null===(e=function(){if(void 0===Le&&(Le=null,R.trustedTypes))try{Le=R.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Le}())||void 0===e?void 0:e.createHTML(t))||t}class Fe{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class Ve extends Fe{getTypeName(){return"HTML"}}class Ue extends Fe{getTypeName(){return"Style"}}class qe extends Fe{getTypeName(){return"Script"}}class He extends Fe{getTypeName(){return"URL"}}class ze extends Fe{getTypeName(){return"ResourceURL"}}function Be(t){return t instanceof Fe?t.changingThisBreaksApplicationSecurity:t}function Qe(t,e){const n=We(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function We(t){return t instanceof Fe&&t.getTypeName()||null}function Ge(t){return new Ve(t)}function $e(t){return new Ue(t)}function Ke(t){return new qe(t)}function Ye(t){return new He(t)}function Je(t){return new ze(t)}let Xe=!0,Ze=!1;function tn(){return Ze=!0,Xe}function en(){if(Ze)throw new Error("Cannot enable prod mode after platform setup.");Xe=!1}class nn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Me(t),"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class rn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Me(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Me(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const on=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,sn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function an(t){return(t=String(t)).match(on)||t.match(sn)?t:(tn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function un(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function cn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const ln=un("area,br,col,hr,img,wbr"),hn=un("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fn=un("rp,rt"),dn=cn(fn,hn),pn=cn(ln,cn(hn,un("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),cn(fn,un("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dn),gn=un("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yn=un("srcset"),mn=cn(gn,yn,un("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),un("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vn=un("script,style,template");class bn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!pn.hasOwnProperty(e))return this.sanitizedSomething=!0,!vn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!mn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;gn[o]&&(s=an(s)),yn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>an(t.trim())).join(", ")),this.buf.push(" ",e,'="',En(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();pn.hasOwnProperty(e)&&!ln.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(En(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const _n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wn=/([^\#-~ |!])/g;function En(t){return t.replace(/&/g,"&amp;").replace(_n,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(wn,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cn;function On(t,e){let n=null;try{Cn=Cn||function(t){return function(){try{return!!(new window.DOMParser).parseFromString(Me(""),"text/html")}catch(t){return!1}}()?new nn:new rn(t)}(t);let r=e?String(e):"";n=Cn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Cn.getInertBodyElement(r)}while(r!==o);const s=new bn,a=s.sanitizeChildren(Tn(n)||n);return tn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=Tn(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Tn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Sn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function In(t){const e=function(){const t=oe();return t&&t[12]}();return e?e.sanitize(Sn.URL,t)||"":Qe(t,"URL")?Be(t):an(mt(t))}function xn(t,e){return t.hasOwnProperty(rt)?t[rt]:null}class An extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function kn(t,e){const n=e?" in "+e:"";throw new An("201",`No provider for ${vt(t)} found${n}`)}class jn{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Pn(){return Nn}function Nn(t){return t.type.prototype.ngOnChanges&&(t.setInput=Rn),Dn}function Dn(){const t=Ln(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Y)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Rn(t,e,n,r){const i=Ln(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Y,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new jn(u&&u.currentValue,e,s===Y),t[r]=e}function Ln(t){return t.__ngSimpleChanges__||null}function Mn(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Fn(t,e,n){qn(t,e,3,n)}function Vn(t,e,n,r){(3&t[2])===n&&qn(t,e,n,r)}function Un(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function qn(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Hn(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Hn(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}Pn.ngInherit=!0;const zn=-1;class Bn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Qn(t,e,n){const r=zt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Gn(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Wn(t){return 3===t||4===t||6===t}function Gn(t){return 64===t.charCodeAt(0)}function $n(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Kn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Kn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Yn(t){return t!==zn}function Jn(t){return 32767&t}function Xn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Zn=!0;function tr(t){const e=Zn;return Zn=t,e}let er=0;function nr(t,e){const n=ir(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,rr(r.data,t),rr(e,null),rr(r.blueprint,null));const i=or(t,e),o=t.injectorIndex;if(Yn(i)){const t=Jn(i),n=Xn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function rr(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ir(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function or(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return zn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return zn}function sr(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(it)&&(r=n[it]),null==r&&(r=n[it]=er++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function ar(t,e,n){if(n&bt.Optional)return t;kn(e,"NodeInjector")}function ur(t,e,n,r){if(n&bt.Optional&&void 0===r&&(r=null),0==(n&(bt.Self|bt.Host))){const i=t[9],o=wt(void 0);try{return i?i.get(e,r,n&bt.Optional):Et(e,r,n&bt.Optional)}finally{wt(o)}}return ar(r,e,n)}function cr(t,e,n,r=bt.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(it)?t[it]:void 0;return"number"==typeof e?e>=0?255&e:hr:e}(n);if("function"==typeof o){if(!Oe(e,t,r))return r&bt.Host?ar(i,n,r):ur(e,n,r,i);try{const t=o();if(null!=t||r&bt.Optional)return t;kn(n)}finally{Ae()}}else if("number"==typeof o){let i=null,s=ir(t,e),a=zn,u=r&bt.Host?e[16][6]:null;for((-1===s||r&bt.SkipSelf)&&(a=-1===s?or(t,e):e[s+8],a!==zn&&yr(r,!1)?(i=e[1],s=Jn(a),e=Xn(a,e)):s=-1);-1!==s;){const t=e[1];if(gr(o,s,t.data)){const t=fr(s,e,n,i,r,u);if(t!==lr)return t}a=e[s+8],a!==zn&&yr(r,e[1].data[s+8]===u)&&gr(o,s,e)?(i=t,s=Jn(a),e=Xn(a,e)):s=-1}}}return ur(e,n,r,i)}const lr={};function hr(){return new mr(ue(),oe())}function fr(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=dr(a,s,n,null==r?Vt(a)&&Zn:r!=s&&0!=(3&a.type),i&bt.Host&&o===a);return null!==u?pr(e,s,u,a):lr}function dr(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&qt(t)&&t.type===n)return u}return null}function pr(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Bn){const s=i;s.resolving&&function(t,e){throw new An("200","Circular dependency in DI detected for "+t)}(vt(o[n]));const a=tr(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?wt(s.injectImpl):null;Oe(t,r,bt.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Nn(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&wt(u),tr(a),s.resolving=!1,Ae()}}return i}function gr(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function yr(t,e){return!(t&bt.Self||t&bt.Host&&e)}class mr{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return cr(this._tNode,this._lView,t,void 0,e)}}function vr(t){const e=t;if(V(t))return()=>{const t=vr(F(e));return t?t():null};let n=xn(e);if(null===n){const t=C(e);n=t&&t.factory}return n||null}function br(t){return u(()=>{const e=t.prototype.constructor,n=e[rt]||vr(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[rt]||vr(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function _r(t){return t.ngDebugContext}function wr(t){return t.ngOriginalError}function Er(t,...e){t.error(...e)}class Cr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Er}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?_r(t)?_r(t):this._findContext(wr(t)):null}_findOriginalError(t){let e=wr(t);for(;e&&wr(e);)e=wr(e);return e}}function Or(t,e){t.__ngContext__=e}const Tr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(R))();function Sr(t){return t instanceof Function?t():t}var Ir=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function xr(t,e){return(void 0)(t,e)}function Ar(t){const e=t[3];return Mt(e)?e[3]:e}function kr(t){return Pr(t[13])}function jr(t){return Pr(t[4])}function Pr(t){for(;null!==t&&!Mt(t);)t=t[4];return t}function Nr(t,e,n,r,i){if(null!=r){let o,s=!1;Mt(r)?o=r:Lt(r)&&(s=!0,r=r[0]);const a=Qt(r);0===t&&null!==n?null==i?qr(e,n,a):Ur(e,n,a,i||null,!0):1===t&&null!==n?Ur(e,n,a,i||null,!0):2===t?function(t,e,n){const r=zr(t,e);r&&function(t,e,n,r){zt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Qt(n)&&Nr(e,t,r,o,i);for(let s=Rt;s<n.length;s++){const i=n[s];Yr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Dr(t,e,n){return zt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Rr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ne(i,-1)),n.splice(r,1)}function Lr(t,e){if(t.length<=Rt)return;const n=Rt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Rr(o,r),e>0&&(t[n-1][4]=r[4]);const s=B(t,Rt+e);Yr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Mr(t,e){if(!(256&e[2])){const n=e[11];zt(n)&&n.destroyNode&&Yr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Fr(t[1],t);for(;e;){let n=null;if(Lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Lt(e)&&Fr(e[1],e),e=e[3];null===e&&(e=t),Lt(e)&&Fr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Fr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Bn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Qt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&zt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Mt(e[3])){n!==e[3]&&Rr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Vr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===K.None||e===K.Emulated)return null}return Gt(r,n)}(t,e.parent,n)}function Ur(t,e,n,r,i){zt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function qr(t,e,n){zt(t)?t.appendChild(e,n):e.appendChild(n)}function Hr(t,e,n,r,i){null!==r?Ur(t,e,n,r,i):qr(t,e,n)}function zr(t,e){return zt(t)?t.parentNode(e):e.parentNode}function Br(t,e,n){return Qr(t,e,n)}let Qr=function(t,e,n){return 40&t.type?Gt(t,n):null};function Wr(t,e,n,r){const i=Vr(t,r,e),o=e[11],s=Br(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Hr(o,i,n[a],s,!1);else Hr(o,i,n,s,!1)}function Gr(t,e){if(null!==e){const n=e.type;if(3&n)return Gt(e,t);if(4&n)return $r(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Gr(t,n);{const n=t[e.index];return Mt(n)?$r(-1,n):Qt(n)}}if(32&n)return xr(e,t)()||Qt(t[e.index]);{const n=t[16],r=n[6],i=Ar(n),o=r.projection[e.projection];return null!=o?Gr(i,o):Gr(t,e.next)}}return null}function $r(t,e){const n=Rt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Gr(t,r)}return e[7]}function Kr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Or(Qt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Kr(t,e,n.child,r,i,o,!1),Nr(e,t,i,a,o);else if(32&u){const s=xr(n,r);let u;for(;u=s();)Nr(e,t,i,u,o);Nr(e,t,i,a,o)}else 16&u?Jr(t,e,r,n,i,o):Nr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Yr(t,e,n,r,i,o){Kr(n,r,t.firstChild,e,i,o,!1)}function Jr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Nr(e,t,i,a[u],o);else Kr(t,e,a,s[3],i,o,!0)}function Xr(t,e,n){zt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Zr(t,e,n){zt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ti(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ei="ng-template";function ni(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ti(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ri(t){return 4===t.type&&t.value!==ei}function ii(t,e,n){return e===(4!==t.type||n?t.value:ei)}function oi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Wn(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ii(t,u,n)||""===u&&1===e.length){if(si(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ni(t.attrs,c,n)){if(si(r))return!1;s=!0}continue}const l=ai(8&r?"class":u,i,ri(t),n);if(-1===l){if(si(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ti(e,c,0)||2&r&&c!==t){if(si(r))return!1;s=!0}}}}else{if(!s&&!si(r)&&!si(u))return!1;if(s&&si(u))continue;s=!1,r=u|1&r}}return si(r)||s}function si(t){return 0==(1&t)}function ai(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ui(t,e,n=!1){for(let r=0;r<e.length;r++)if(oi(t,e[r],n))return!0;return!1}function ci(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function li(t,e){return t?":not("+e.trim()+")":e}function hi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||si(s)||(e+=li(o,i),i=""),r=s,o=o||!si(r);n++}return""!==i&&(e+=li(o,i)),e}const fi={};function di(t){pi(se(),oe(),je()+t,de())}function pi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Fn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Vn(e,r,0,n)}Pe(n)}function gi(t,e){return t<<17|e<<2}function yi(t){return t>>17&32767}function mi(t){return 2|t}function vi(t){return(131068&t)>>2}function bi(t,e){return-131069&t|e<<2}function _i(t){return 1|t}function wi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Ee(i),n.contentQueries(2,e[o],o)}}}function Ei(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,ee(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Ci(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=ce(),s=he(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),re.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return le(o,!0),o}function Oi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ti(t,e,n){Te(e);try{const r=t.viewQuery;null!==r&&to(1,r,n);const i=t.template;null!==i&&xi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&wi(t,e),t.staticViewQueries&&to(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ki(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ke()}}function Si(t,e,n,r){const i=e[2];if(256==(256&i))return;Te(e);const o=de();try{ee(e),re.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&xi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Fn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Vn(e,n,0,null),Un(e,0)}if(function(t){for(let e=kr(t);null!==e;e=jr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&ne(r,1),n[2]|=1024}}}(e),function(t){for(let e=kr(t);null!==e;e=jr(e))for(let t=Rt;t<e.length;t++){const n=e[t],r=n[1];Zt(n)&&Si(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&wi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Fn(e,n)}else{const n=t.contentHooks;null!==n&&Vn(e,n,1),Un(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)Pe(~r);else{const i=r,o=n[++t],s=n[++t];be(o,i),s(2,e[i])}}}finally{Pe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Gi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&to(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Fn(e,n)}else{const n=t.viewHooks;null!==n&&Vn(e,n,2),Un(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ne(e[3],-1))}finally{ke()}}function Ii(t,e,n,r){const i=e[10],o=!de(),s=Xt(e);try{o&&!s&&i.begin&&i.begin(),s&&Ti(t,e,r),Si(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function xi(t,e,n,r,i){const o=je();try{Pe(-1),2&r&&e.length>Dt&&pi(t,e,Dt,de()),n(r,i)}finally{Pe(o)}}function Ai(t,e,n){ie()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||nr(n,e),Or(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=qt(r);o&&zi(e,n,r);const u=pr(e,t,a,n);Or(u,e),null!==s&&Bi(0,a-i,u,r,0,s),o&&(Yt(n.index,e)[8]=u)}}(t,e,n,Gt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=re.lFrame.currentDirectiveIndex;try{Pe(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];_e(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Fi(r,i)}}finally{Pe(-1),_e(s)}}(t,e,n))}function ki(t,e,n=Gt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function ji(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Pi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Pi(t,e,n,r,i,o,s,a,u,c){const l=Dt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:fi);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ni(t,e,n,r){const i=no(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function Di(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ri(t,e,n,r,i,o,s,a){const u=Gt(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(io(t,n,c,r,i),Vt(e)&&function(t,e){const n=Yt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,zt(o)?o.setProperty(u,r,i):Gn(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Li(t,e,n,r){let i=!1;if(ie()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ui(n,s.selectors,!1)&&(i||(i=[]),sr(nr(n,e),t,s.type),qt(s)?(Vi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,qi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Oi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=$n(n.mergedAttrs,c.hostAttrs),Hi(t,n,e,u,c),Ui(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ri(e)?null:Qi(n,i);o.push(c),s=Di(n,u,s),a=Di(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new An("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=$n(n.mergedAttrs,n.attrs),i}function Mi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Fi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Vi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ui(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;qt(e)&&(n[""]=t)}}function qi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Hi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=xn(i.type)),s=new Bn(o,qt(i),null);t.blueprint[r]=s,n[r]=s,Mi(t,e,0,r,Oi(t,n,i.hostVars,fi),i)}function zi(t,e,n){const r=Gt(e,t),i=ji(n),o=t[10],s=Yi(t,Ei(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Bi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Qi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Wi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Gi(t,e){const n=Yt(e,t);if(Zt(n)){const t=n[1];80&n[2]?Si(t,n,t.template,n[8]):n[5]>0&&$i(n)}}function $i(t){for(let n=kr(t);null!==n;n=jr(n))for(let t=Rt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Si(t,e,t.template,e[8])}else e[5]>0&&$i(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Yt(e[n],t);Zt(r)&&r[5]>0&&$i(r)}}function Ki(t,e){const n=Yt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Ti(r,n,n[8])}function Yi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ji(t){for(;t;){t[2]|=64;const e=Ar(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Xi(t,e,n){const r=e[10];r.begin&&r.begin();try{Si(t,e,t.template,n)}catch(i){throw ro(e,i),i}finally{r.end&&r.end()}}function Zi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Jt(n),i=r[1];Ii(i,r,i.template,n)}}(t[8])}function to(t,e,n){Ee(0),e(t,n)}const eo=(()=>Promise.resolve(null))();function no(t){return t[7]||(t[7]=[])}function ro(t,e){const n=t[9],r=n?n.get(Cr,null):null;r&&r.handleError(e)}function io(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function oo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=y(i,t):2==o&&(r=y(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const so=new x("INJECTOR",-1);class ao{get(t,e=Ct){if(e===Ct){const e=new Error(`NullInjectorError: No provider for ${g(t)}!`);throw e.name="NullInjectorError",e}return e}}const uo=new x("Set Injector scope."),co={},lo={},ho=[];let fo=void 0;function po(){return void 0===fo&&(fo=new ao),fo}function go(t,e=null,n=null,r){return new yo(t,n,e||po(),r)}class yo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&H(e,n=>this.processProvider(n,t,e)),H([t],t=>this.processInjectorType(t,[],i)),this.records.set(so,bo(void 0,this));const o=this.records.get(uo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:g(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Ct,n=bt.Default){this.assertNotDestroyed();const r=xt(this);try{if(!(n&bt.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof x)&&w(t);e=n&&this.injectableDefInScope(n)?bo(mo(t),co):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&bt.Self?po():this.parent).get(t,e=n&bt.Optional&&e===Ct?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(g(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[Tt]&&i.unshift(e[Tt]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=g(e);if(Array.isArray(e))i=e.map(g).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):g(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ot,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{xt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(g(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=F(t)))return!1;let r=C(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=C(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{H(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];H(r,t=>this.processProvider(t,n,r||ho))}}this.injectorDefTypes.add(o),this.records.set(o,bo(r.factory,co));const a=r.providers;if(null!=a&&!s){const e=t;H(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=wo(t=F(t))?t:F(t&&t.provide);const i=function(t,e,n){return _o(t)?bo(void 0,t.useValue):bo(vo(t),co)}(t);if(wo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=bo(void 0,co,!0),e.factory=()=>jt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===co&&(e.value=lo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function mo(t){const e=w(t),n=null!==e?e.factory:xn(t);if(null!==n)return n;const r=C(t);if(null!==r)return r.factory;if(t instanceof x)throw new Error(`Token ${g(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=Q(e,"?");throw new Error(`Can't resolve all parameters for ${g(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[O]||t[S]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function vo(t,e,n){let r=void 0;if(wo(t)){const e=F(t);return xn(e)||mo(e)}if(_o(t))r=()=>F(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...jt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>kt(F(t.useExisting));else{const e=F(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return xn(e)||mo(e);r=()=>new e(...jt(t.deps))}var i;return r}function bo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function _o(t){return null!==t&&"object"==typeof t&&St in t}function wo(t){return"function"==typeof t}const Eo=function(t,e,n){return function(t,e=null,n=null,r){const i=go(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Co=(()=>{class t{static create(t,e){return Array.isArray(t)?Eo(t,e,""):Eo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Ct,t.NULL=new ao,t.\u0275prov=b({token:t,providedIn:"any",factory:()=>kt(so)}),t.__NG_ELEMENT_ID__=-1,t})();function Oo(t,e){Mn(Jt(t)[1],ue())}function To(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(qt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=So(t.inputs),e.declaredInputs=So(t.declaredInputs),e.outputs=So(t.outputs);const n=i.hostBindings;n&&Ao(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Io(t,o),s&&xo(t,s),v(t.inputs,i.inputs),v(t.declaredInputs,i.declaredInputs),v(t.outputs,i.outputs),qt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===To&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=$n(i.hostAttrs,n=$n(n,i.hostAttrs))}}(r)}function So(t){return t===Y?{}:t===J?[]:t}function Io(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function xo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Ao(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let ko=null;function jo(){if(!ko){const t=R.Symbol;if(t&&t.iterator)ko=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ko=n)}}}return ko}class Po{constructor(t){this.wrapped=t}static wrap(t){return new Po(t)}static unwrap(t){return Po.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Po}}function No(t){return!!Do(t)&&(Array.isArray(t)||!(t instanceof Map)&&jo()in t)}function Do(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ro(t,e,n){return t[e]=n}function Lo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Mo(t,e,n,r){const i=oe();return Lo(i,me(),e)&&(se(),function(t,e,n,r,i,o){const s=Gt(t,e);!function(t,e,n,r,i,o,s){if(null==o)zt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?mt(o):s(o,r||"",i);zt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(Ne(),i,t,e,n,r)),Mo}function Fo(t,e,n,r,i,o,s,a){const u=oe(),c=se(),l=t+Dt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Ci(e,t,4,s||null,te(c,a));Li(e,n,l,te(c,u)),Mn(e,l);const h=l.tViews=Pi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];le(h,!1);const f=u[11].createComment("");Wr(c,u,f,h),Or(f,u),Yi(u,u[l]=Wi(f,u,f,h)),Ut(h)&&Ai(c,u,h),null!=s&&ki(u,h,a)}function Vo(t){return Kt(re.lFrame.contextLView,Dt+t)}function Uo(t,e=bt.Default){const n=oe();return null===n?kt(t,e):cr(ue(),n,F(t),e)}function qo(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Wn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(ue(),t)}function Ho(t,e,n){const r=oe();return Lo(r,me(),e)&&Ri(se(),Ne(),r,t,e,r[11],n,!1),Ho}function zo(t,e,n,r,i){const o=i?"class":"style";io(t,n,e.inputs[o],o,r)}function Bo(t,e,n,r){const i=oe(),o=se(),s=Dt+t,a=i[11],u=i[s]=Dr(a,e,re.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Ci(e,t,2,i,te(a,o));return Li(e,n,u,te(a,s)),null!==u.attrs&&oo(u,u.attrs,!1),null!==u.mergedAttrs&&oo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];le(c,!0);const l=c.mergedAttrs;null!==l&&Qn(a,u,l);const h=c.classes;null!==h&&Zr(a,u,h);const f=c.styles;null!==f&&Xr(a,u,f),64!=(64&c.flags)&&Wr(o,i,u,c),0===re.lFrame.elementDepthCount&&Or(u,i),re.lFrame.elementDepthCount++,Ut(c)&&(Ai(o,i,c),function(t,e,n){if(Ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&ki(i,c)}function Qo(){let t=ue();he()?fe():(t=t.parent,le(t,!1));const e=t;re.lFrame.elementDepthCount--;const n=se();n.firstCreatePass&&(Mn(n,t),Ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&zo(n,e,oe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&zo(n,e,oe(),e.stylesWithoutHost,!1)}function Wo(t,e,n,r){Bo(t,e,n,r),Qo()}function Go(){return oe()}function $o(t){return!!t&&"function"==typeof t.then}function Ko(t){return!!t&&"function"==typeof t.subscribe}function Yo(t,e,n=!1,r){const i=oe(),o=se(),s=ue();return function(t,e,n,r,i,o,s=!1,a){const u=Ut(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=no(e);let h=!0;if(3&r.type){const f=Gt(r,e),d=a?a(f):Y,p=d.target||f,g=l.length,y=a?t=>a(Qt(t[r.index])).target:r.index;if(zt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Xo(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Xo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Yo}function Jo(t,e,n){try{return!1!==e(n)}catch(r){return ro(t,r),!1}}function Xo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Yt(t.index,e):e;0==(32&e[2])&&Ji(s);let a=Jo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Jo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Zo(t=1){return function(t){return(re.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,re.lFrame.contextLView))[8]}(t)}function ts(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?ui(t,o,!0):ci(r,o))return i}else n=i}return n}function es(t){const e=oe()[16][6];if(!e.projection){const n=e.projection=Q(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?ts(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function ns(t,e=0,n){const r=oe(),i=se(),o=Ci(i,Dt+t,16,null,n||null);null===o.projection&&(o.projection=e),fe(),64!=(64&o.flags)&&function(t,e,n){Jr(e[11],0,e,n,Vr(t,n,e),Br(n.parent||e[6],n,e))}(i,r,o)}const rs=[];function is(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?yi(o):vi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];os(t[a],e)&&(u=!0,t[a+1]=r?_i(n):mi(n)),a=r?yi(n):vi(n)}u&&(t[n+1]=r?mi(o):_i(o))}function os(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&$(t,e)>=0}const ss={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function as(t){return t.substring(ss.key,ss.keyEnd)}function us(t,e){const n=ss.textEnd;return n===e?-1:(e=ss.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ss.key=e,n),cs(t,e,n))}function cs(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ls(t,e){return function(t,e,n,r){const i=oe(),o=se(),s=ve(2);o.firstUpdatePass&&ds(o,t,s,true),e!==fi&&Lo(i,s,e)&&ys(o,o.data[je()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=g(Be(t))),t}(e),true,s)}(t,e),ls}function hs(t,e){for(let n=function(t){return function(t){ss.key=0,ss.keyEnd=0,ss.value=0,ss.valueEnd=0,ss.textEnd=t.length}(t),us(t,cs(t,0,ss.textEnd))}(e);n>=0;n=us(e,n))W(t,as(e),!0)}function fs(t,e){return e>=t.expandoStartIndex}function ds(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[je()],s=fs(t,n);bs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=re.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=gs(n=ps(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=ps(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==vi(r))return t[yi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=ps(null,t,e,n[1],r),n=gs(n,e.attrs,r),function(t,e,n,r){t[yi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=gs(r,t[o].hostAttrs,n);return gs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=yi(s),u=vi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||$(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=yi(t[a+1]);t[r+1]=gi(e,a),0!==e&&(t[e+1]=bi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=gi(a,0),0!==a&&(t[a+1]=bi(t[a+1],r)),a=r;else t[r+1]=gi(u,0),0===a?a=r:t[u+1]=bi(t[u+1],r),u=r;l&&(t[r+1]=mi(t[r+1])),is(t,c,r,!0),is(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&$(o,e)>=0&&(n[r+1]=_i(n[r+1]))}(e,c,t,r,o),s=gi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function ps(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=gs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function gs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),W(t,s,!!n||e[++o]))}return void 0===t?null:t}function ys(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];vs(1==(1&c)?ms(u,e,n,i,vi(c),s):void 0)||(vs(o)||2==(2&c)&&(o=ms(u,null,n,i,a,s)),function(t,e,n,r,i){const o=zt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Ir.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Ir.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Wt(je(),n),i,o))}function ms(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===fi&&(l=c?rs:void 0);let h=c?G(l,r):u===r?l:void 0;if(o&&!vs(h)&&(h=G(e,r)),vs(h)&&(a=h,s))return a;const f=t[i+1];i=s?yi(f):vi(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=G(t,r))}return a}function vs(t){return void 0!==t}function bs(t,e){return 0!=(t.flags&(e?16:32))}function _s(t,e=""){const n=oe(),r=se(),i=t+Dt,o=r.firstCreatePass?Ci(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return zt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Wr(r,n,s,o),le(o,!1)}function ws(t){return Es("",t,""),ws}function Es(t,e,n){const r=oe(),i=function(t,e,n,r){return Lo(t,me(),n)?e+mt(n)+r:fi}(r,t,e,n);return i!==fi&&function(t,e,n){const r=Wt(e,t);!function(t,e,n){zt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,je(),i),Es}function Cs(t,e,n,r,i,o,s){!function(t,e,n,r){const i=se(),o=ve(2);i.firstUpdatePass&&ds(i,null,o,r);const s=oe();if(n!==fi&&Lo(s,o,n)){const a=i.data[je()];if(bs(a,r)&&!fs(i,o)){let t=a.classesWithoutHost;null!==t&&(n=y(t,n||"")),zo(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===fi&&(i=rs);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const s=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let d=null,p=void 0;l===h?(u+=2,c+=2,s!==f&&(d=h,p=f)):null===h||null!==l&&l<h?(u+=2,d=l):(c+=2,d=h,p=f),null!==d&&ys(t,e,n,r,d,p,true,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return rs;const r=[],i=Be(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(W,hs,function(t,e,n,r,i,o,s,a){const u=function(t,e,n,r,i){const o=function(t,e,n,r){const i=Lo(t,e,n);return Lo(t,e+1,r)||i}(t,e,n,r);return Lo(t,e+2,i)||o}(t,ye(),n,i,s);return ve(3),u?e+mt(n)+r+mt(i)+o+mt(s)+a:fi}(oe(),t,e,n,r,i,o,s),!0)}function Os(t,e,n){const r=oe();return Lo(r,me(),e)&&Ri(se(),Ne(),r,t,e,r[11],n,!0),Os}const Ts=void 0;var Ss=["en",[["a","p"],["AM","PM"],Ts],[["AM","PM"],Ts,Ts],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ts,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ts,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ts,"{1} 'at' {0}",Ts],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Is={};function xs(t,e,n){"string"!=typeof e&&(n=e,e=t[Ns.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Is[e]=t,n&&(Is[e][Ns.ExtraData]=n)}function As(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ps(e);if(n)return n;const r=e.split("-")[0];if(n=Ps(r),n)return n;if("en"===r)return Ss;throw new Error(`Missing locale data for the locale "${t}".`)}function ks(t){return As(t)[Ns.CurrencyCode]||null}function js(t){return As(t)[Ns.PluralCase]}function Ps(t){return t in Is||(Is[t]=R.ng&&R.ng.common&&R.ng.common.locales&&R.ng.common.locales[t]),Is[t]}var Ns=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Ds="en-US";let Rs=Ds;function Ls(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Rs=t.toLowerCase().replace(/_/g,"-"))}function Ms(t,e,n,r,i){if(t=F(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ms(t[o],e,n,r,i);else{const o=se(),s=oe();let a=wo(t)?t:F(t.provide),u=vo(t);const c=ue(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(wo(t)||!t.multi){const r=new Bn(u,i,Uo),d=Us(a,e,i?l:l+f,h);-1===d?(sr(nr(c,s),o,a),Fs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=Us(a,e,l+f,h),p=Us(a,e,l,l+f),g=d>=0&&n[d],y=p>=0&&n[p];if(i&&!y||!i&&!g){sr(nr(c,s),o,a);const l=function(t,e,n,r,i){const o=new Bn(t,n,Uo);return o.multi=[],o.index=e,o.componentProviders=0,Vs(o,i,r&&!n),o}(i?Hs:qs,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),Fs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Fs(o,t,d>-1?d:p,Vs(n[i?p:d],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function Fs(t,e,n,r){const i=wo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Vs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Us(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function qs(t,e,n,r){return zs(this.multi,[])}function Hs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=pr(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),zs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],zs(i,o);return o}function zs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Bs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=se();if(r.firstCreatePass){const i=qt(t);Ms(n,r.data,r.blueprint,i,!0),Ms(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Qs{}class Ws{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${g(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Gs=(()=>{class t{}return t.NULL=new Ws,t})();function $s(...t){}function Ks(t,e){return new Js(Gt(t,e))}const Ys=function(){return Ks(ue(),oe())};let Js=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ys,t})();class Xs{}let Zs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ta(),t})();const ta=function(){const t=oe(),e=Yt(ue().index,t);return function(t){return t[11]}(Lt(e)?e:t)};let ea=(()=>{class t{}return t.\u0275prov=b({token:t,providedIn:"root",factory:()=>null}),t})();class na{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ra=new na("11.0.2");class ia{constructor(){}supports(t){return No(t)}create(t){return new sa(t)}}const oa=(t,e)=>e;class sa{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||oa}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<la(n,r,i)?e:n,s=la(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!No(t))throw new Error(`Error trying to diff '${g(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[jo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new aa(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ca),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ca),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class aa{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ua{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ca{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ua,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function la(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ha{constructor(){}supports(t){return t instanceof Map||Do(t)}create(){return new fa}}class fa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Do(t)))throw new Error(`Error trying to diff '${g(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new da(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class da{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let pa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new f]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=b({token:t,providedIn:"root",factory:()=>new t([new ia])}),t})(),ga=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new f]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=b({token:t,providedIn:"root",factory:()=>new t([new ha])}),t})();function ya(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Qt(o)),Mt(o))for(let t=Rt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ya(e[1],e,n,r)}const s=n.type;if(8&s)ya(t,e,n.child,r);else if(32&s){const t=xr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=Ar(t);ya(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class ma{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return ya(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Mr(this._lView[1],this._lView)}onDestroy(t){Ni(this._lView[1],this._lView,null,t)}markForCheck(){Ji(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Xi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){pe(!0);try{Xi(t,e,n)}finally{pe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Yr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class va extends ma{constructor(t){super(t),this._view=t}detectChanges(){Zi(this._view)}checkNoChanges(){!function(t){pe(!0);try{Zi(t)}finally{pe(!1)}}(this._view)}get context(){return null}}const ba=wa;let _a=(()=>{class t{}return t.__NG_ELEMENT_ID__=ba,t.__ChangeDetectorRef__=!0,t})();function wa(t=!1){return function(t,e,n){if(!n&&Vt(t)){const n=Yt(t.index,e);return new ma(n,n)}return 47&t.type?new ma(e[16],e):null}(ue(),oe(),t)}const Ea=[new ha],Ca=new pa([new ia]),Oa=new ga(Ea),Ta=function(){return Aa(ue(),oe())};let Sa=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ta,t})();const Ia=Sa,xa=class extends Ia{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ei(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Ti(e,n,t),new ma(n)}};function Aa(t,e){return 4&t.type?new xa(e,t,Ks(t,e)):null}class ka{}class ja{}const Pa=function(){return Fa(ue(),oe())};let Na=(()=>{class t{}return t.__NG_ELEMENT_ID__=Pa,t})();const Da=Na,Ra=class extends Da{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ks(this._hostTNode,this._hostLView)}get injector(){return new mr(this._hostTNode,this._hostLView)}get parentInjector(){const t=or(this._hostTNode,this._hostLView);if(Yn(t)){const e=Xn(t,this._hostLView),n=Jn(t);return new mr(e[1].data[n+8],e)}return new mr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=La(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Rt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ka,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(Mt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ra(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=Rt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Rt?(e[4]=n[i],z(n,Rt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=$r(i,o),a=n[11],u=zr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Yr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),z(Ma(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=La(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Lr(this._lContainer,e);n&&(B(Ma(this._lContainer),e),Mr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Lr(this._lContainer,e);return n&&null!=B(Ma(this._lContainer),e)?new ma(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function La(t){return t[8]}function Ma(t){return t[8]||(t[8]=[])}function Fa(t,e){let n;const r=e[t.index];if(Mt(r))n=r;else{let i;if(8&t.type)i=Qt(r);else{const n=e[11];i=n.createComment("");const r=Gt(t,e);Ur(n,zr(n,r),i,function(t,e){return zt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Wi(r,e,i,t),Yi(e,n)}return new Ra(n,t,e)}const Va={};class Ua extends Gs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=gt(t);return new za(e,this.ngModule)}}function qa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ha=new x("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Tr});class za extends Qs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(hi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return qa(this.componentDef.inputs)}get outputs(){return qa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Va,i);return o!==Va||r===Va?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Xs,Bt),s=i.get(ea,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(zt(t))return t.selectRootElement(e,n===K.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Dr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?Ht:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Tr,clean:eo,playerHandler:null,flags:0},f=Pi(0,null,null,1,0,null,null,null,null,null),d=Ei(null,f,h,l,null,null,o,a,s,i);let p,g;Te(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Ci(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(oo(a,u,!0),null!==t&&(Qn(i,t,u),null!==a.classes&&Zr(i,t,a.classes),null!==a.styles&&Xr(i,t,a.styles)));const c=r.createRenderer(t,e),l=Ei(n,ji(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(sr(nr(a,n),s,e.type),Vi(s,a),qi(a,n.length,1)),Yi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Qn(a,c,["ng-version",ra.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!si(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Qn(a,c,t),e&&e.length>0&&Zr(a,c,e.join(" "))}if(g=$t(f,Dt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=ue();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Hi(t,r,e,Oi(t,e,1,null),n));const i=pr(e,t,r.directiveStart,r);Or(i,e);const o=Gt(r,e);return o&&Or(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=ue();e.contentQueries(1,s,t.directiveStart)}const a=ue();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Pe(a.index),Mi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Fi(e,s)),s}(t,this.componentDef,d,h,[Oo]),Ti(f,d,null)}finally{ke()}return new Ba(this.componentType,p,Ks(g,d),d,g)}}class Ba extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new va(r),this.componentType=t}get injector(){return new mr(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Qa=new Map;class Wa extends ka{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ua(this);const n=yt(t),r=t[nt]||null;r&&Ls(r),this._bootstrapComponents=Sr(n.bootstrap),this._r3Injector=go(t,e,[{provide:ka,useValue:this},{provide:Gs,useValue:this.componentFactoryResolver}],g(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Co.THROW_IF_NOT_FOUND,n=bt.Default){return t===Co||t===ka||t===so?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ga extends ja{constructor(t){super(),this.moduleType=t,null!==yt(t)&&function(t){const e=new Set;!function t(n){const r=yt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${g(e)} vs ${g(e.name)}`)}(i,Qa.get(i),n),Qa.set(i,n));const o=Sr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Wa(this.moduleType,t)}}function $a(t,e,n){const r=ge()+t,i=oe();return i[r]===fi?Ro(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Ka(t,e){const n=se();let r;const i=t+Dt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new An("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=xn(r.type)),s=wt(Uo);try{const t=tr(!1),e=o();return tr(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,oe(),i,e),e}finally{wt(s)}}function Ya(t,e,n){const r=t+Dt,i=oe(),o=Kt(i,r);return function(t,e){return Po.isWrapped(e)&&(e=Po.unwrap(e),t[ye()]=fi),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?function(t,e,n,r,i,o){const s=e+n;return Lo(t,s,i)?Ro(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===fi?void 0:n}(t,s+1)}(i,ge(),e,o.transform,n,o):o.transform(n))}const Ja=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Xa(){return this._results[jo()]()}class Za{constructor(){this.dirty=!0,this._results=[],this.changes=new Ja,this.length=0;const t=jo(),e=Za.prototype;e[t]||(e[t]=Xa)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=q(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class tu{constructor(t){this.queryList=t,this.matches=null}clone(){return new tu(this.queryList)}setDirty(){this.queryList.setDirty()}}class eu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new eu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==gu(t,e).matches&&this.queries[e].setDirty()}}class nu{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class ru{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new ru(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class iu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new iu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,ou(e,i)),this.matchTNodeWithReadOption(t,e,dr(e,t,i,!1,!1))}else n===Sa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,dr(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Js||r===Na||r===Sa&&4&e.type)this.addMatch(e.index,-2);else{const n=dr(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function ou(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function su(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ks(t,e):4&t.type?Aa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Js?Ks(e,t):n===Sa?Aa(e,t):n===Na?Fa(e,t):void 0}(t,e,r):pr(t,t[1],n,e)}function au(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:su(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function uu(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=au(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=Rt;t<s.length;t++){const e=s[t];e[17]===e[3]&&uu(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];uu(n[1],n,i,r)}}}}}return r}function cu(t){const e=oe(),n=se(),r=we();Ee(r+1);const i=gu(n,r);if(t.dirty&&Xt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?uu(n,e,r,[]):au(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function lu(t,e,n){!function(t,e,n,r,i,o){t.firstCreatePass&&pu(t,new nu(n,r,false,i),-1),du(t,e)}(se(),oe(),t,e,n)}function hu(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(pu(t,new nu(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),du(t,e)}(se(),oe(),e,n,r,0,ue(),t)}function fu(){return t=oe(),e=we(),t[19].queries[e].queryList;var t,e}function du(t,e){const n=new Za;Ni(t,e,n,n.destroy),null===e[19]&&(e[19]=new eu),e[19].queries.push(new tu(n))}function pu(t,e,n){null===t.queries&&(t.queries=new ru),t.queries.track(new iu(e,n))}function gu(t,e){return t.queries.getByIndex(e)}function yu(t,e){return Aa(t,e)}function mu(t=bt.Default){const e=wa(!0);if(null!=e||t&bt.Optional)return e;kn("ChangeDetectorRef")}const vu=new x("Application Initializer");let bu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=$s,this.reject=$s,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();$o(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(kt(vu,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const _u=new x("AppId"),wu={provide:_u,useFactory:function(){return`${Eu()}${Eu()}${Eu()}`},deps:[]};function Eu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Cu=new x("Platform Initializer"),Ou=new x("Platform ID"),Tu=new x("appBootstrapListener");let Su=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Iu=new x("LocaleId"),xu=new x("DefaultCurrencyCode");class Au{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const ku=function(t){return new Ga(t)},ju=ku,Pu=function(t){return Promise.resolve(ku(t))},Nu=function(t){const e=ku(t),n=Sr(yt(t).declarations).reduce((t,e)=>{const n=gt(e);return n&&t.push(new za(n)),t},[]);return new Au(e,n)},Du=Nu,Ru=function(t){return Promise.resolve(Nu(t))};let Lu=(()=>{class t{constructor(){this.compileModuleSync=ju,this.compileModuleAsync=Pu,this.compileModuleAndAllComponentsSync=Du,this.compileModuleAndAllComponentsAsync=Ru}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Mu=(()=>Promise.resolve(0))();function Fu(t){"undefined"==typeof Zone?Mu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Vu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ja(!1),this.onMicrotaskEmpty=new Ja(!1),this.onStable=new Ja(!1),this.onError=new Ja(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=R.requestAnimationFrame,e=R.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(R,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,zu(t),Hu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),zu(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Bu(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Qu(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Bu(t),e.invoke(r,i,o,s,a)}finally{Qu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,zu(t),Hu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Vu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,qu,Uu,Uu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Uu(){}const qu={};function Hu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function zu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Bu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Qu(t){t._nesting--,Hu(t)}class Wu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ja,this.onMicrotaskEmpty=new Ja,this.onStable=new Ja,this.onError=new Ja}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Gu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vu.assertNotInAngularZone(),Fu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Fu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(kt(Vu))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})(),$u=(()=>{class t{constructor(){this._applications=new Map,Xu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Xu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();class Ku{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Yu(t){Xu=t}let Ju,Xu=new Ku;const Zu=new x("AllowMultipleToken");class tc{constructor(t,e){this.name=t,this.token=e}}function ec(t,e,n=[]){const r="Platform: "+e,i=new x(r);return(e=[])=>{let o=nc();if(!o||o.injector.get(Zu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:uo,useValue:"platform"});!function(t){if(Ju&&!Ju.destroyed&&!Ju.injector.get(Zu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ju=t.get(rc);const e=t.get(Cu,null);e&&e.forEach(t=>t())}(Co.create({providers:t,name:r}))}return function(t){const e=nc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function nc(){return Ju&&!Ju.destroyed?Ju:null}let rc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Wu:("zone.js"===t?void 0:t)||new Vu({enableLongStackTrace:tn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Vu,useValue:n}];return n.run(()=>{const e=Co.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Cr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>sc(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return $o(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(bu);return t.runInitializers(),t.donePromise.then(()=>(Ls(i.injector.get(Iu,Ds)||Ds),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=ic({},e);return function(t,e,n){const r=new Ga(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(oc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${g(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(kt(Co))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function ic(t,e){return Array.isArray(e)?e.reduce(ic,t):Object.assign(Object.assign({},t),e)}let oc=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=tn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Vu.assertNotInAngularZone(),Fu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Vu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Qs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ka),i=n.create(Co.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(Gu,null);return o&&i.injector.get($u).registerApplication(i.location.nativeElement,o),this._loadComponent(i),tn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;sc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Tu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),sc(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(kt(Vu),kt(Su),kt(Co),kt(Cr),kt(Gs),kt(bu))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function sc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ac{}class uc{}const cc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let lc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||cc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>hc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>hc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(kt(Lu),kt(uc,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function hc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const fc=function(t){return null},dc=ec(null,"core",[{provide:Ou,useValue:"unknown"},{provide:rc,deps:[Co]},{provide:$u,deps:[]},{provide:Su,deps:[]}]),pc=[{provide:oc,useClass:oc,deps:[Vu,Su,Co,Cr,Gs,bu]},{provide:Ha,deps:[Vu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:bu,useClass:bu,deps:[[new f,vu]]},{provide:Lu,useClass:Lu,deps:[]},wu,{provide:pa,useFactory:function(){return Ca},deps:[]},{provide:ga,useFactory:function(){return Oa},deps:[]},{provide:Iu,useFactory:function(t){return Ls(t=t||"undefined"!=typeof $localize&&$localize.locale||Ds),t},deps:[[new h(Iu),new f,new p]]},{provide:xu,useValue:"USD"}];let gc=(()=>{class t{constructor(t){}}return t.\u0275mod=lt({type:t}),t.\u0275inj=_({factory:function(e){return new(e||t)(kt(oc))},providers:pc}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return O}),n.d(e,"c",function(){return M}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return P}),n.d(e,"i",function(){return F}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return H}),n.d(e,"m",function(){return d}),n.d(e,"n",function(){return j}),n.d(e,"o",function(){return y}),n.d(e,"p",function(){return m}),n.d(e,"q",function(){return b}),n.d(e,"r",function(){return D}),n.d(e,"s",function(){return _}),n.d(e,"t",function(){return p}),n.d(e,"u",function(){return g}),n.d(e,"v",function(){return E}),n.d(e,"w",function(){return v}),n.d(e,"x",function(){return w}),n.d(e,"y",function(){return k}),n.d(e,"z",function(){return I}),n.d(e,"A",function(){return R}),n.d(e,"B",function(){return L}),n.d(e,"C",function(){return N}),n.d(e,"D",function(){return W}),n.d(e,"E",function(){return Q}),n.d(e,"F",function(){return x}),n.d(e,"G",function(){return q}),n.d(e,"H",function(){return z}),n.d(e,"I",function(){return B});var r=n("30Go"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function E(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return Object(r.c)(e,t),e}(Error),O=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function T(t,e){return t.replace(S,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var S=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var A=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},k=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},j=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function D(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function R(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var M=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function z(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e,r)+"must be a valid function.")}function B(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e,r)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},W=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return S}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.O("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.U)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:w,deps:[v,u.z,[new u.A,b]]};let S=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)(u.Qb(u.B))},providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function d(){return new r.a}function p(){return t=>{return a()((e=d,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("30Go"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return u},"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}c(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.k)(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var d=Object(o.h)(Object.keys(e)),g=d.next();!g.done;g=d.next())e[g.value]._addComponent(a)}catch(y){u={error:y}}finally{try{g&&!g.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.o)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.u)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.13",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyAsmblXEe2gBX1-wnXb4x0qJNx-9z-G3xw",authDomain:"tablon-virtual.firebaseapp.com",databaseURL:"https://tablon-virtual.firebaseio.com",projectId:"tablon-virtual",storageBucket:"tablon-virtual.appspot.com",messagingSenderId:"468523063866",appId:"1:468523063866:web:7ec7b2d0313b922a297303",measurementId:"G-P1VRSWM1K3"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Qb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a))},t.\u0275prov=Object(r.Fb)({factory:d,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function d(){return new h(Object(r.Qb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function y(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.Qb)(a).location;return new _(Object(r.Qb)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(u),r.Qb(b,8))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(u),r.Qb(b,8))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),E=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+y(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(m),r.Qb(u))},t.normalizeQueryParams=y,t.joinWithSlash=p,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Fb)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new E(Object(r.Qb)(m),Object(r.Qb)(u))}function O(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.lb;class I{}let x=(()=>{class t extends I{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.u))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let k=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.U)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new j(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new j(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.P),r.Jb(r.K),r.Jb(r.s))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class j{constructor(t,e){this.record=t,this.view=e}}let P=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new N,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){D("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){D("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.P),r.Jb(r.K))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class N{constructor(){this.$implicit=null,this.ngIf=null}}function D(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.tb)(e)}'.`)}class R{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class L{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const M=new L,F=new R;let V=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(r.qb)(e))return M;if(Object(r.pb)(e))return F;throw n=t,Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.tb)(n)}'`);var n}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Sb())},t.\u0275pipe=r.Ib({name:"async",type:t,pure:!1}),t})(),U=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[{provide:I,useClass:x}]}),t})();function q(t){return"server"===t}let H=(()=>{class t{}return t.\u0275prov=Object(r.Fb)({token:t,providedIn:"root",factory:()=>new z(Object(r.Qb)(a),window,Object(r.Qb)(r.m))}),t})();class z{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=B(this.window.history)||B(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function B(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Q extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new Q,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=G||(G=document.querySelector("base"),G)?G.getAttribute("href"):null;return null==e?null:(n=e,W||(W=document.createElement("a")),W.setAttribute("href",n),"/"===W.pathname.charAt(0)?W.pathname:"/"+W.pathname);var n}resetBaseElement(){G=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let W,G=null;const $=new r.q("TRANSITION_ID"),K=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[$,a,r.r],multi:!0}];class Y{static init(){Object(r.W)(new Y)}addToWindow(t){r.nb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.nb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.nb.getAllAngularRootElements=()=>t.getAllRootElements(),r.nb.frameworkStabilizers||(r.nb.frameworkStabilizers=[]),r.nb.frameworkStabilizers.push(t=>{const e=r.nb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const J=new r.q("EventManagerPlugins");let X=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(J),r.Qb(r.z))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class Z{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let tt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),et=(()=>{class t extends tt{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const nt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rt=/%COMP%/g;function it(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?it(t,i,n):(i=i.replace(rt,t),n.push(i))}return n}function ot(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let st=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new at(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new ut(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.Q.ShadowDom:return new ct(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=it(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(X),r.Qb(et),r.Qb(r.c))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class at{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(nt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=nt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=nt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.F.DashCase|r.F.Important)?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ot(n)):this.eventManager.addEventListener(t,e,ot(n))}}class ut extends at{constructor(t,e,n,r){super(t),this.component=n;const i=it(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(rt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(rt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ct extends at{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=it(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let lt=(()=>{class t extends Z{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const ht=["alt","control","meta","shift"],ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let gt=(()=>{class t extends Z{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(ht.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&dt.hasOwnProperty(e)&&(e=dt[e]))}return ft[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ht.forEach(r=>{r!=n&&(0,pt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const yt=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){Q.makeCurrent(),Y.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.sb)(document),document},deps:[]}],mt=Object(r.R)(r.V,"browser",yt),vt=[[],{provide:r.Y,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:J,useClass:lt,multi:!0,deps:[a,r.z,r.B]},{provide:J,useClass:gt,multi:!0,deps:[a]},[],{provide:st,useClass:st,deps:[X,et,r.c]},{provide:r.E,useExisting:st},{provide:tt,useExisting:et},{provide:et,useClass:et,deps:[a]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:X,useClass:X,deps:[J,r.z]},[]];let bt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:$,useExisting:r.c},K]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)(r.Qb(t,12))},providers:vt,imports:[U,r.f]}),t})();function _t(){return new wt(Object(r.Qb)(a))}let wt=(()=>{class t{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a))},t.\u0275prov=Object(r.Fb)({factory:_t,token:t,providedIn:"root"}),t})();"undefined"!=typeof window&&window;var Et=n("XNiG"),Ct=n("LRne"),Ot=n("HDdC"),Tt=n("Cfvw"),St=n("VRyK"),It=n("pxpQ"),xt=n("lJxs"),At=n("zx2A");function kt(t,e){return"function"==typeof e?n=>n.pipe(kt((n,r)=>Object(Tt.a)(t(n,r)).pipe(Object(xt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new jt(t))}class jt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Pt(t,this.project))}}class Pt extends At.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new At.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(At.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var Nt=n("qgXg"),Dt=n("quSY"),Rt=n("9ppp"),Lt=n("Ylt2");class Mt extends Et.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Ft(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Rt.a;if(this.isStopped||this.hasError?o=Dt.a.EMPTY:(this.observers.push(t),o=new Lt.a(this,t)),r&&t.add(t=new It.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Nt.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Ft{constructor(t,e){this.time=t,this.value=e}}function Vt(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Mt(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const Ut=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var qt=n("7o/Q");function Ht(t,e){return function(n){return n.lift(new zt(t,e))}}class zt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Bt(t,this.predicate,this.thisArg))}}class Bt extends qt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const Qt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var Wt=n("EY2u");function Gt(t){return e=>0===t?Object(Wt.b)():e.lift(new $t(t))}class $t{constructor(t){if(this.total=t,this.total<0)throw new Qt}call(t,e){return e.subscribe(new Kt(t,this.total))}}class Kt extends qt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Yt(t=null){return e=>e.lift(new Jt(t))}class Jt{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Xt(t,this.defaultValue))}}class Xt extends qt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Zt(t=ne){return e=>e.lift(new te(t))}class te{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new ee(t,this.errorFactory))}}class ee extends qt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function ne(){return new Ut}var re=n("SpAZ");function ie(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ht((e,n)=>t(e,n,r)):re.a,Gt(1),n?Yt(e):Zt(()=>new Ut))}function oe(t,e){return e?kt(()=>t,e):kt(()=>t)}var se=n("tf+s"),ae=n("spgP");const ue=new r.q("angularfire2.auth.use-emulator"),ce=new r.q("angularfire2.auth.settings"),le=new r.q("angularfire2.auth.tenant-id"),he=new r.q("angularfire2.auth.langugage-code"),fe=new r.q("angularfire2.auth.use-device-language"),de=new r.q("angularfire.auth.persistence");let pe=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new ae.d(i),f=Object(ae.h)(h),d=new Et.a,p=Object(Ct.a)(void 0).pipe(Object(It.b)(h.outsideAngular),kt(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(xt.a)(()=>Object(ae.g)(t,i,e)),Object(xt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(ae.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Vt({bufferSize:1,refCount:!1}));if(q(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Ct.a)(null);else{p.pipe(ie()).subscribe();const t=p.pipe(kt(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Vt({bufferSize:1,refCount:!1})),e=t=>new Ot.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(kt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(kt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(oe(n),Object(se.a)(h.outsideAngular),Object(It.b)(h.insideAngular)),this.user=t.pipe(oe(r),Object(se.a)(h.outsideAngular),Object(It.b)(h.insideAngular)),this.idToken=this.user.pipe(kt(t=>t?Object(Tt.a)(t.getIdToken()):Object(Ct.a)(null))),this.idTokenResult=this.user.pipe(kt(t=>t?Object(Tt.a)(t.getIdTokenResult()):Object(Ct.a)(null))),this.credential=Object(St.a)(t,d,this.authState.pipe(Ht(t=>!t))).pipe(Object(xt.a)(t=>(null==t?void 0:t.user)?t:null),Object(se.a)(h.outsideAngular),Object(It.b)(h.insideAngular))}return Object(ae.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(ae.c),r.Qb(ae.b,8),r.Qb(r.B),r.Qb(r.z),r.Qb(ue,8),r.Qb(ce,8),r.Qb(le,8),r.Qb(he,8),r.Qb(fe,8),r.Qb(de,8))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Qb)(ae.c),Object(r.Qb)(ae.b,8),Object(r.Qb)(r.B),Object(r.Qb)(r.z),Object(r.Qb)(ue,8),Object(r.Qb)(ce,8),Object(r.Qb)(le,8),Object(r.Qb)(he,8),Object(r.Qb)(fe,8),Object(r.Qb)(de,8))},token:t,providedIn:"any"}),t})();Object(ae.e)(pe,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let ge=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[pe]}),t})();class ye extends Et.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Rt.a;return this._value}next(t){super.next(this._value=t)}}var me=n("z+Ro"),ve=n("DH7j");class be extends qt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class _e extends qt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var we=n("SeVD");function Ee(t,e,n,r,i=new _e(t,n,r)){if(!i.closed)return e instanceof Ot.a?e.subscribe(i):Object(we.a)(e)(i)}var Ce=n("yCtX");const Oe={};class Te{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Se(t,this.resultSelector))}}class Se extends be{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Oe),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Ee(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Oe?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Ie(t){return new Ot.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Tt.a)(n):Object(Wt.b)()).subscribe(e)})}var xe=n("bHdf");function Ae(){return Object(xe.a)(1)}function ke(t){return function(e){return 0===t?Object(Wt.b)():e.lift(new je(t))}}class je{constructor(t){if(this.total=t,this.total<0)throw new Qt}call(t,e){return e.subscribe(new Pe(t,this.total))}}class Pe extends qt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Ne(...t){return Ae()(Object(Ct.a)(...t))}function De(...t){const e=t[t.length-1];return Object(me.a)(e)?(t.pop(),n=>Ne(t,n,e)):e=>Ne(t,e)}function Re(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Le(t,e,n))}}class Le{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Me(t,this.accumulator,this.seed,this.hasSeed))}}class Me extends qt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Fe(t){return function(e){const n=new Ve(t),r=e.lift(n);return n.caught=r}}class Ve{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Ue(t,this.selector,this.caught))}}class Ue extends At.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new At.a(this);this.add(r);const i=Object(At.c)(n,r);i!==r&&this.add(i)}}}var qe=n("5+tZ");function He(t,e){return Object(qe.a)(t,e,1)}var ze=n("vkgz");class Be{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Qe(t,this.callback))}}class Qe extends qt.a{constructor(t,e){super(t),this.add(new Dt.a(e))}}class We{constructor(t,e){this.id=t,this.url=e}}class Ge extends We{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $e extends We{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ke extends We{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ye extends We{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Je extends We{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xe extends We{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ze extends We{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class tn extends We{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class en extends We{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nn{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class on{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class an{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class un{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cn{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ln="primary";class hn{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function fn(t){return new hn(t)}function dn(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function pn(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function gn(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!yn(t[i],e[i]))return!1;return!0}function yn(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function mn(t){return Array.prototype.concat.apply([],t)}function vn(t){return t.length>0?t[t.length-1]:null}function bn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function _n(t){return Object(r.pb)(t)?t:Object(r.qb)(t)?Object(Tt.a)(Promise.resolve(t)):Object(Ct.a)(t)}function wn(t,e,n){return n?function(t,e){return gn(t,e)}(t.queryParams,e.queryParams)&&En(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>yn(t[n],e[n]))}(t.queryParams,e.queryParams)&&Cn(t.root,e.root)}function En(t,e){if(!xn(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!En(t.children[n],e.children[n]))return!1}return!0}function Cn(t,e){return On(t,e,e.segments)}function On(t,e,n){if(t.segments.length>n.length)return!!xn(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!xn(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Cn(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!xn(t.segments,r)&&!!t.children.primary&&On(t.children.primary,e,i)}}class Tn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fn(this.queryParams)),this._queryParamMap}toString(){return Pn.serialize(this)}}class Sn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,bn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nn(this)}}class In{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=fn(this.parameters)),this._parameterMap}toString(){return Un(this)}}function xn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function An(t,e){let n=[];return bn(t.children,(t,r)=>{r===ln&&(n=n.concat(e(t,r)))}),bn(t.children,(t,r)=>{r!==ln&&(n=n.concat(e(t,r)))}),n}class kn{}class jn{parse(t){const e=new Qn(t);return new Tn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+Dn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Ln(e)}=${Ln(t)}`).join("&"):`${Ln(e)}=${Ln(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Pn=new jn;function Nn(t){return t.segments.map(t=>Un(t)).join("/")}function Dn(t,e){if(!t.hasChildren())return Nn(t);if(e){const e=t.children.primary?Dn(t.children.primary,!1):"",n=[];return bn(t.children,(t,e)=>{e!==ln&&n.push(`${e}:${Dn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=An(t,(e,n)=>n===ln?[Dn(t.children.primary,!1)]:[`${n}:${Dn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Nn(t)}/${e[0]}`:`${Nn(t)}/(${e.join("//")})`}}function Rn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ln(t){return Rn(t).replace(/%3B/gi,";")}function Mn(t){return Rn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fn(t){return decodeURIComponent(t)}function Vn(t){return Fn(t.replace(/\+/g,"%20"))}function Un(t){return`${Mn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Mn(t)}=${Mn(e[t])}`).join("")}`;var e}const qn=/^[^\/()?;=#]+/;function Hn(t){const e=t.match(qn);return e?e[0]:""}const zn=/^[^=?&#]+/,Bn=/^[^?&#]+/;class Qn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Sn([],{}):new Sn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Sn(t,e)),n}parseSegment(){const t=Hn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new In(Fn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Hn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Hn(this.remaining);t&&(n=t,this.capture(n))}t[Fn(e)]=Fn(n)}parseQueryParam(t){const e=function(t){const e=t.match(zn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Bn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Vn(e),i=Vn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Hn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=ln);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Sn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Wn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Gn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Gn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=$n(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return $n(t,this._root).map(t=>t.value)}}function Gn(t,e){if(t===e.value)return e;for(const n of e.children){const e=Gn(t,n);if(e)return e}return null}function $n(t,e){if(t===e.value)return[e];for(const n of e.children){const r=$n(t,n);if(r.length)return r.unshift(e),r}return[]}class Kn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Yn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Jn extends Wn{constructor(t,e){super(t),this.snapshot=e,rr(this,t)}toString(){return this.snapshot.toString()}}function Xn(t,e){const n=function(t,e){const n=new er([],{},{},"",{},ln,e,null,t.root,-1,{});return new nr("",new Kn(n,[]))}(t,e),r=new ye([new In("",{})]),i=new ye({}),o=new ye({}),s=new ye({}),a=new ye(""),u=new Zn(r,i,s,a,o,ln,e,n.root);return u.snapshot=n.root,new Jn(new Kn(u,[]),n)}class Zn{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(xt.a)(t=>fn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(xt.a)(t=>fn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tr(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class er{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class nr extends Wn{constructor(t,e){super(e),this.url=t,rr(this,e)}toString(){return ir(this._root)}}function rr(t,e){e.value._routerState=t,e.children.forEach(e=>rr(t,e))}function ir(t){const e=t.children.length>0?` { ${t.children.map(ir).join(", ")} } `:"";return`${t.value}${e}`}function or(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,gn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),gn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!gn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),gn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function sr(t,e){return gn(t.params,e.params)&&function(t,e){return xn(t,e)&&t.every((t,n)=>gn(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||sr(t.parent,e.parent))}function ar(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return ar(t,e,r);return ar(t,e)})}(t,e,n);return new Kn(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return ur(e,t),t}{const n=new Zn(new ye((r=e.value).url),new ye(r.params),new ye(r.queryParams),new ye(r.fragment),new ye(r.data),r.outlet,r.component,r),i=e.children.map(e=>ar(t,e));return new Kn(n,i)}}var r}function ur(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)ur(t.children[n],e.children[n])}function cr(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function lr(t){return"object"==typeof t&&null!=t&&t.outlets}function hr(t,e,n,r,i){let o={};return r&&bn(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new Tn(n.root===t?e:fr(n.root,t,e),o,i)}function fr(t,e,n){const r={};return bn(t.children,(t,i)=>{r[i]=t===e?n:fr(t,e,n)}),new Sn(t.segments,r)}class dr{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&cr(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(lr);if(r&&r!==vn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function gr(t,e,n){if(t||(t=new Sn([],{})),0===t.segments.length&&t.hasChildren())return yr(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(lr(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!_r(a,u,e))return o;r+=2}else{if(!_r(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Sn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Sn(t.segments.slice(r.pathIndex),t.children),yr(e,0,i)}return r.match&&0===i.length?new Sn(t.segments,{}):r.match&&!t.hasChildren()?mr(t,e,n):r.match?yr(t,0,i):mr(t,e,n)}function yr(t,e,n){if(0===n.length)return new Sn(t.segments,{});{const r=function(t){return lr(t[0])?t[0].outlets:{[ln]:t}}(n),i={};return bn(r,(n,r)=>{null!==n&&(i[r]=gr(t.children[r],e,n))}),bn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Sn(t.segments,i)}}function mr(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(lr(o)){const t=vr(o.outlets);return new Sn(r,t)}if(0===i&&cr(n[0])){r.push(new In(t.segments[e].path,n[0])),i++;continue}const s=lr(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&cr(a)?(r.push(new In(s,br(a))),i+=2):(r.push(new In(s,{})),i++)}return new Sn(r,{})}function vr(t){const e={};return bn(t,(t,n)=>{null!==t&&(e[n]=mr(new Sn([],{}),0,t))}),e}function br(t){const e={};return bn(t,(t,n)=>e[n]=""+t),e}function _r(t,e,n){return t==n.path&&gn(e,n.parameters)}class wr{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),or(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Yn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),bn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Yn(t),i=t.value.component?n.children:e;bn(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Yn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new un(t.value.snapshot))}),t.children.length&&this.forwardEvent(new sn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(or(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Er(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Er(t){or(t.value),t.children.forEach(Er)}class Cr{constructor(t,e){this.routes=t,this.module=e}}function Or(t){return"function"==typeof t}function Tr(t){return t instanceof Tn}const Sr=Symbol("INITIAL_VALUE");function Ir(){return kt(t=>function(...t){let e=void 0,n=void 0;return Object(me.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(ve.a)(t[0])&&(t=t[0]),Object(Ce.a)(t,n).lift(new Te(e))}(...t.map(t=>t.pipe(Gt(1),De(Sr)))).pipe(Re((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Sr)return t;if(r===Sr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Tr(r))return r}return t},t)},Sr),Ht(t=>t!==Sr),Object(xt.a)(t=>Tr(t)?t:!0===t),Gt(1)))}let xr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Kb(0,"router-outlet")},directives:function(){return[Ci]},encapsulation:2}),t})();function Ar(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];kr(r,jr(e,r))}}function kr(t,e){t.children&&Ar(t.children,e)}function jr(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Pr(t){const e=t.children&&t.children.map(Pr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ln&&(n.component=xr),n}function Nr(t){return t.outlet||ln}class Dr{constructor(t){this.segmentGroup=t||null}}class Rr{constructor(t){this.urlTree=t}}function Lr(t){return new Ot.a(e=>e.error(new Dr(t)))}function Mr(t){return new Ot.a(e=>e.error(new Rr(t)))}function Fr(t){return new Ot.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Vr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,ln).pipe(Object(xt.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Fe(t=>{if(t instanceof Rr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Dr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,ln).pipe(Object(xt.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Fe(t=>{if(t instanceof Dr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Sn([],{[ln]:t}):t;return new Tn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(xt.a)(t=>new Sn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(Ct.a)({});const n=[],r=[],i={};return bn(t,(t,o)=>{const s=e(o,t).pipe(Object(xt.a)(t=>i[o]=t));o===ln?n.push(s):r.push(s)}),Ct.a.apply(null,n.concat(r)).pipe(Ae(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ht((e,n)=>t(e,n,r)):re.a,ke(1),n?Yt(e):Zt(()=>new Ut))}(),Object(xt.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){const s=function(t){return t.reduce((t,e)=>{const n=Nr(e);return t.has(n)?t.get(n).push(e):t.set(n,[e]),t},new Map)}(n);s.has(i)||s.set(i,[]);const a=n=>Object(Tt.a)(n).pipe(He(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Fe(t=>{if(t instanceof Dr)return Object(Ct.a)(null);throw t}))),ie(t=>null!==t),Fe(t=>{if(t instanceof Ut||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(Ct.a)(new Sn([],{}));throw new Dr(e)}throw t})),u=Array.from(s.entries()).map(([t,e])=>{const n=a(e);return t===i?n:n.pipe(Object(xt.a)(()=>null),Fe(()=>Object(Ct.a)(null)))});return Object(Tt.a)(u).pipe(t=>t.lift(new Te(void 0)),ie(),Object(xt.a)(t=>t.find(t=>null!==t)))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Nr(r)!==o&&""!==r.path?Lr(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Lr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Mr(i):this.lineralizeSegments(n,i).pipe(Object(qe.a)(n=>{const i=new Sn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Ur(e,r,i);if(!s)return Lr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Mr(l):this.lineralizeSegments(r,l).pipe(Object(qe.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(xt.a)(t=>(n._loadedConfig=t,new Sn(r,{})))):Object(Ct.a)(new Sn(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=Ur(e,n,r);if(!i)return Lr(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(qe.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Hr(t,e,n)&&Nr(n)!==ln)}(t,n,r)?{segmentGroup:qr(new Sn(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&Nr(r)!==ln&&(n[Nr(r)]=new Sn([],{}));return n}(r,new Sn(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Hr(t,e,n))}(t,n,r)?{segmentGroup:qr(new Sn(t.segments,function(t,e,n,r){const i={};for(const o of n)Hr(t,e,o)&&!r[Nr(o)]&&(i[Nr(o)]=new Sn([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(xt.a)(t=>new Sn(o,t))):0===r.length&&0===s.length?Object(Ct.a)(new Sn(o,{})):this.expandSegment(n,i,r,s,ln,!0).pipe(Object(xt.a)(t=>new Sn(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Ct.a)(new Cr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Ct.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(qe.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(xt.a)(t=>(e._loadedConfig=t,t))):function(t){return new Ot.a(e=>e.error(dn(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Ct.a)(new Cr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Ct.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Or(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Or(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return _n(o)});return Object(Ct.a)(i).pipe(Ir(),Object(ze.a)(t=>{if(!Tr(t))return;const e=dn(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(xt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Ct.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Fr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Tn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return bn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return bn(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Sn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Ur(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||pn)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function qr(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Sn(t.segments.concat(e.segments),e.children)}return t}function Hr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}class zr{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Br{constructor(t,e){this.component=t,this.route=e}}function Qr(t,e,n){const r=t._root;return Gr(r,e?e._root:null,n,[r.value])}function Wr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Gr(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Yn(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!xn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!xn(t.url,e.url)||!gn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sr(t,e)||!gn(t.queryParams,e.queryParams);case"paramsChange":default:return!sr(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new zr(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Gr(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Br(a.outlet.component,s))}else s&&$r(e,a,i),i.canActivateChecks.push(new zr(r)),Gr(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),bn(o,(t,e)=>$r(t,n.getContext(e),i)),i}function $r(t,e,n){const r=Yn(t),i=t.value;bn(r,(t,r)=>{$r(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Br(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Kr(t,e){return null!==t&&e&&e(new an(t)),Object(Ct.a)(!0)}function Yr(t,e){return null!==t&&e&&e(new on(t)),Object(Ct.a)(!0)}function Jr(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Ct.a)(!0);const i=r.map(r=>Ie(()=>{const i=Wr(r,e,n);let o;if(function(t){return t&&Or(t.canActivate)}(i))o=_n(i.canActivate(e,t));else{if(!Or(i))throw new Error("Invalid CanActivate guard");o=_n(i(e,t))}return o.pipe(ie())}));return Object(Ct.a)(i).pipe(Ir())}function Xr(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Ie(()=>{const i=e.guards.map(i=>{const o=Wr(i,e.node,n);let s;if(function(t){return t&&Or(t.canActivateChild)}(o))s=_n(o.canActivateChild(r,t));else{if(!Or(o))throw new Error("Invalid CanActivateChild guard");s=_n(o(r,t))}return s.pipe(ie())});return Object(Ct.a)(i).pipe(Ir())}));return Object(Ct.a)(i).pipe(Ir())}class Zr{}class ti{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=ri(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,ln),n=new er([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ln,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Kn(n,e),i=new nr(this.url,r);return this.inheritParamsAndData(i._root),Object(Ct.a)(i)}catch(t){return new Ot.a(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=tr(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=An(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===ln?-1:e.value.outlet===ln?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(i){if(!(i instanceof Zr))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new Zr}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Zr;if((t.outlet||ln)!==r)throw new Zr;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?vn(n).parameters:{};i=new er(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,si(t),r,t.component,t,ei(e),ni(e)+n.length,ai(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Zr;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||pn)(n,t,e);if(!r)throw new Zr;const i={};bn(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new er(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,si(t),r,t.component,t,ei(e),ni(e)+o.length,ai(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=ri(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new Kn(i,t)]}if(0===a.length&&0===c.length)return[new Kn(i,[])];const l=this.processSegment(a,u,c,ln);return[new Kn(i,l)]}}function ei(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ni(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function ri(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>ii(t,e,n)&&oi(n)!==ln)}(t,n,r)){const i=new Sn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&oi(o)!==ln){const n=new Sn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[oi(o)]=n}return i}(t,e,r,new Sn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>ii(t,e,n))}(t,n,r)){const o=new Sn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(ii(t,n,a)&&!i[oi(a)]){const n=new Sn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[oi(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Sn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function ii(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function oi(t){return t.outlet||ln}function si(t){return t.data||{}}function ai(t){return t.resolve||{}}function ui(t){return function(e){return e.pipe(kt(e=>{const n=t(e);return n?Object(Tt.a)(n).pipe(Object(xt.a)(()=>e)):Object(Tt.a)([e])}))}}class ci extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const li=new r.q("ROUTES");class hi{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(xt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Cr(mn(r.injector.get(li)).map(Pr),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(Tt.a)(this.loader.load(t)):_n(t()).pipe(Object(qe.a)(t=>t instanceof r.v?Object(Ct.a)(t):Object(Tt.a)(this.compiler.compileModuleAsync(t))))}}class fi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new di,this.attachRef=null}}class di{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new fi,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class pi{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function gi(t){throw t}function yi(t,e,n){return e.parse("/")}function mi(t,e){return Object(Ct.a)(null)}let vi=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Et.a,this.errorHandler=gi,this.malformedUriErrorHandler=yi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:mi,afterPreactivation:mi},this.urlHandlingStrategy=new pi,this.routeReuseStrategy=new ci,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.x),this.console=o.get(r.X);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new Tn(new Sn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new hi(s,a,t=>this.triggerEvent(new nn(t)),t=>this.triggerEvent(new rn(t))),this.routerState=Xn(this.currentUrlTree,this.rootComponentType),this.transitions=new ye({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Ht(t=>0!==t.id),Object(xt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),kt(t=>{let n=!1,r=!1;return Object(Ct.a)(t).pipe(Object(ze.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),kt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Ct.a)(t).pipe(kt(t=>{const n=this.transitions.getValue();return e.next(new Ge(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Wt.a:[t]}),kt(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(kt(t=>function(t,e,n,r,i){return new Vr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(xt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(ze.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(qe.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new ti(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(xt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(ze.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(ze.a)(t=>{const n=new Je(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Ge(n,this.serializeUrl(r),i,o);e.next(a);const u=Xn(r,this.rootComponentType).snapshot;return Object(Ct.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Wt.a}),ui(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(ze.a)(t=>{const e=new Xe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(xt.a)(t=>Object.assign(Object.assign({},t),{guards:Qr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(qe.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Ct.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Tt.a)(t).pipe(Object(qe.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Ct.a)(!0);const s=o.map(o=>{const s=Wr(o,e,i);let a;if(function(t){return t&&Or(t.canDeactivate)}(s))a=_n(s.canDeactivate(t,e,n,r));else{if(!Or(s))throw new Error("Invalid CanDeactivate guard");a=_n(s(t,e,n,r))}return a.pipe(ie())});return Object(Ct.a)(s).pipe(Ir())}(t.component,t.route,n,e,r)),ie(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(qe.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Tt.a)(e).pipe(He(e=>Object(Tt.a)([Yr(e.route.parent,r),Kr(e.route,r),Xr(t,e.path,n),Jr(t,e.route,n)]).pipe(Ae(),ie(t=>!0!==t,!0))),ie(t=>!0!==t,!0))}(r,o,t,e):Object(Ct.a)(n)),Object(xt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(ze.a)(t=>{if(Tr(t.guardsResult)){const e=dn(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(ze.a)(t=>{const e=new Ze(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Ht(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Ke(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),ui(t=>{if(t.guards.canActivateChecks.length)return Object(Ct.a)(t).pipe(Object(ze.a)(t=>{const e=new tn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),kt(t=>{let n=!1;return Object(Ct.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(qe.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Ct.a)(t);let o=0;return Object(Tt.a)(n).pipe(He(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Ct.a)({});const o={};return Object(Tt.a)(i).pipe(Object(qe.a)(i=>function(t,e,n,r){const i=Wr(t,e,r);return _n(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(ze.a)(t=>{o[i]=t}))),ke(1),Object(qe.a)(()=>Object.keys(o).length===i.length?Object(Ct.a)(o):Wt.a))}(t._resolve,t,e,r).pipe(Object(xt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),tr(t,n).resolve),null)))}(t.route,e,r,i)),Object(ze.a)(()=>o++),ke(1),Object(qe.a)(e=>o===n.length?Object(Ct.a)(t):Wt.a))}))}),Object(ze.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Ke(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(ze.a)(t=>{const e=new en(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),ui(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(xt.a)(t=>{const e=function(t,e,n){const r=ar(t,e._root,n?n._root:void 0);return new Jn(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(ze.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(xt.a)(t=>(new wr(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(ze.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Ke(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Be(i))),Fe(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Tr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Ke(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ye(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Mf){t.reject(Mf)}}var i;return Wt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ar(t),this.config=t.map(Pr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return hr(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new dr(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return bn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new dr(n,e,r)}(n);if(o.toRoot())return hr(e.root,new Sn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new pr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new pr(t,t===e.root,0)}const r=cr(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new pr(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?yr(s.segmentGroup,s.index,o.commands):gr(s.segmentGroup,s.index,o.commands);return hr(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Tr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(Tr(t))return wn(this.currentUrlTree,t,e);const n=this.parseUrl(t);return wn(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new $e(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.M),r.Qb(kn),r.Qb(di),r.Qb(E),r.Qb(r.r),r.Qb(r.w),r.Qb(r.i),r.Qb(void 0))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),bi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new Et.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:wi(this.skipLocationChange),replaceUrl:wi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:wi(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(vi),r.Jb(Zn),r.Rb("tabindex"),r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Tb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.wb]}),t})(),_i=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new Et.a,this.subscription=t.events.subscribe(t=>{t instanceof $e&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:wi(this.skipLocationChange),replaceUrl:wi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:wi(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(vi),r.Jb(Zn),r.Jb(m))},t.\u0275dir=r.Eb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Tb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Pb("href",e.href,r.hc),r.zb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.wb]}),t})();function wi(t){return""===t||!!t}let Ei=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof $e&&this.update()})}ngAfterContentInit(){Object(Tt.a)([this.links.changes,this.linksWithHrefs.changes,Object(Ct.a)(null)]).pipe(Object(xe.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(Tt.a)(e).pipe(Object(xe.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(vi),r.Jb(r.l),r.Jb(r.D),r.Jb(r.h),r.Jb(bi,8),r.Jb(_i,8))},t.\u0275dir=r.Eb({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(r.Cb(n,bi,!0),r.Cb(n,_i,!0)),2&t){let t;r.ec(t=r.Ub())&&(e.links=t),r.ec(t=r.Ub())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.wb]}),t})(),Ci=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||ln,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Oi(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(di),r.Jb(r.P),r.Jb(r.j),r.Rb("name"),r.Jb(r.h))},t.\u0275dir=r.Eb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Oi{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Zn?this.route:t===di?this.childContexts:this.parent.get(t,e)}}class Ti{}class Si{preload(t,e){return Object(Ct.a)(null)}}let Ii=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new hi(e,n,e=>t.triggerEvent(new nn(e)),e=>t.triggerEvent(new rn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ht(t=>t instanceof $e),He(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Tt.a)(n).pipe(Object(xe.a)(),Object(xt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(qe.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(vi),r.Qb(r.w),r.Qb(r.i),r.Qb(r.r),r.Qb(Ti))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),xi=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ge?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $e&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new cn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(vi),r.Qb(H),r.Qb(void 0))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const Ai=new r.q("ROUTER_CONFIGURATION"),ki=new r.q("ROUTER_FORROOT_GUARD"),ji=[E,{provide:kn,useClass:jn},{provide:vi,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new vi(null,t,e,n,r,i,o,mn(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[kn,di,E,r.r,r.w,r.i,li,Ai,[class{},new r.A],[class{},new r.A]]},di,{provide:Zn,useFactory:function(t){return t.routerState.root},deps:[vi]},{provide:r.w,useClass:r.J},Ii,Si,class{preload(t,e){return e().pipe(Fe(()=>Object(Ct.a)(null)))}},{provide:Ai,useValue:{enableTracing:!1}}];function Pi(){return new r.y("Router",vi)}let Ni=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[ji,Mi(e),{provide:ki,useFactory:Li,deps:[[vi,new r.A,new r.I]]},{provide:Ai,useValue:n||{}},{provide:m,useFactory:Ri,deps:[u,[new r.p(b),new r.A],Ai]},{provide:xi,useFactory:Di,deps:[vi,H,Ai]},{provide:Ti,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Si},{provide:r.y,multi:!0,useFactory:Pi},[Fi,{provide:r.d,multi:!0,useFactory:Vi,deps:[Fi]},{provide:qi,useFactory:Ui,deps:[Fi]},{provide:r.b,multi:!0,useExisting:qi}]]}}static forChild(e){return{ngModule:t,providers:[Mi(e)]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)(r.Qb(ki,8),r.Qb(vi,8))}}),t})();function Di(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new xi(t,e,n)}function Ri(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function Li(t){return"guarded"}function Mi(t){return[{provide:r.a,multi:!0,useValue:t},{provide:li,multi:!0,useValue:t}]}let Fi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Et.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(vi),r=this.injector.get(Ai);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Ct.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Ai),n=this.injector.get(Ii),i=this.injector.get(xi),o=this.injector.get(vi),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.r))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();function Vi(t){return t.appInitializer.bind(t)}function Ui(t){return t.bootstrapListener.bind(t)}const qi=new r.q("Router Initializer");function Hi(t,e){if(1&t){const t=r.Nb();r.Mb(0,"div"),r.Mb(1,"div"),r.Mb(2,"h2",16),r.lc(3),r.Lb(),r.Mb(4,"button",17),r.Tb("click",function(){return r.gc(t),r.Xb(2).logOut()}),r.lc(5," Logout "),r.Lb(),r.Lb(),r.Lb()}if(2&t){const t=r.Xb().ngIf;r.yb(3),r.nc(" Hola ",t.email,"")}}function zi(t,e){if(1&t){const t=r.Nb();r.Mb(0,"div"),r.Mb(1,"h2",16),r.lc(2),r.Lb(),r.Mb(3,"button",17),r.Tb("click",function(){return r.gc(t),r.Xb(2).logOut()}),r.lc(4," Logout "),r.Lb(),r.Lb()}if(2&t){const t=r.Xb().ngIf;r.yb(2),r.nc(" Hola ",t.displayName,"")}}function Bi(t,e){if(1&t&&(r.Mb(0,"div",13),r.jc(1,Hi,6,1,"div",14),r.jc(2,zi,5,1,"ng-template",null,15,r.kc),r.Lb()),2&t){const t=e.ngIf,n=r.fc(3);r.yb(1),r.cc("ngIf",null==t.displayName)("ngIfElse",n)}}const Qi=function(){return["/login"]},Wi=function(){return["active"]},Gi=function(){return["/sign-in"]};function $i(t,e){1&t&&(r.Mb(0,"div",18),r.Mb(1,"button",19),r.lc(2,"Login "),r.Lb(),r.Mb(3,"button",19),r.lc(4,"Sign Up"),r.Lb(),r.Lb()),2&t&&(r.yb(1),r.cc("routerLink",r.dc(4,Qi))("routerLinkActive",r.dc(5,Wi)),r.yb(2),r.cc("routerLink",r.dc(6,Gi))("routerLinkActive",r.dc(7,Wi)))}const Ki=function(){return["/main"]},Yi=function(){return["/tablones"]};function Ji(t,e){1&t&&(r.Mb(0,"ul",20),r.Mb(1,"a",21),r.lc(2,"Main"),r.Lb(),r.Mb(3,"a",21),r.lc(4,"Login "),r.Lb(),r.Mb(5,"a",21),r.lc(6,"Tablones "),r.Lb(),r.Lb()),2&t&&(r.yb(1),r.cc("routerLink",r.dc(6,Ki))("routerLinkActive",r.dc(7,Wi)),r.yb(2),r.cc("routerLink",r.dc(8,Qi))("routerLinkActive",r.dc(9,Wi)),r.yb(2),r.cc("routerLink",r.dc(10,Yi))("routerLinkActive",r.dc(11,Wi)))}function Xi(t,e){1&t&&(r.Mb(0,"ul",20),r.Mb(1,"a",21),r.lc(2,"Main"),r.Lb(),r.Mb(3,"a",21),r.lc(4,"Login "),r.Lb(),r.Lb()),2&t&&(r.yb(1),r.cc("routerLink",r.dc(4,Ki))("routerLinkActive",r.dc(5,Wi)),r.yb(2),r.cc("routerLink",r.dc(6,Qi))("routerLinkActive",r.dc(7,Wi)))}let Zi=(()=>{class t{constructor(t){this.auth=t,this.title="Type it"}logOut(){this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(pe))},t.\u0275cmp=r.Db({type:t,selectors:[["app-root"]],decls:22,vars:8,consts:[[1,"cabecera"],["type","checkbox","id","check",1,"burguer_check"],["for","check",1,"burger_nav"],[1,"barras"],["fxFlex","50",1,"logo"],["src","./assets/type-it-final-final.png","alt","Type It Icon","width","120px"],["href","#"],["class","sign-and-login",4,"ngIf","ngIfElse"],["showLogin",""],[1,"burguer_desplegado"],["class","burguer_menu",4,"ngIf","ngIfElse"],["showMain",""],[1,"fondo"],[1,"sign-and-login"],[4,"ngIf","ngIfElse"],["showName",""],[1,"d-inline"],[1,"logout","d-inline",3,"click"],[1,"log"],[1,"showLogin",3,"routerLink","routerLinkActive"],[1,"burguer_menu"],[1,"nav-link",3,"routerLink","routerLinkActive"]],template:function(t,e){if(1&t&&(r.Mb(0,"header",0),r.Kb(1,"input",1),r.Mb(2,"label",2),r.Kb(3,"div",3),r.Kb(4,"div",3),r.Kb(5,"div",3),r.Lb(),r.Mb(6,"div",4),r.Kb(7,"img",5),r.Mb(8,"a",6),r.lc(9,"Type it!"),r.Lb(),r.Lb(),r.jc(10,Bi,4,2,"div",7),r.Yb(11,"async"),r.jc(12,$i,5,8,"ng-template",null,8,r.kc),r.Mb(14,"nav",9),r.jc(15,Ji,7,12,"ul",10),r.Yb(16,"async"),r.jc(17,Xi,5,8,"ng-template",null,11,r.kc),r.Lb(),r.Lb(),r.Mb(19,"div",12),r.Kb(20,"img"),r.Kb(21,"router-outlet"),r.Lb()),2&t){const t=r.fc(13),n=r.fc(18);r.yb(10),r.cc("ngIf",r.Zb(11,4,e.auth.user))("ngIfElse",t),r.yb(5),r.cc("ngIf",r.Zb(16,6,e.auth.user))("ngIfElse",n)}},directives:[P,Ci,bi,Ei,_i],pipes:[V],styles:["@font-face{font-family:Sketch_3D;src:url(Sketch_3D.8031f9716778868bc1ee.woff)}.cabecera[_ngcontent-%COMP%]{position:fixed;align-items:center;position:relative;top:0;width:100%;height:10vh;background:linear-gradient(90deg,#92693d,#61351c)}.cabecera[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]{display:flex;justify-content:center}.logo[_ngcontent-%COMP%]{flex:33.33%;width:12px;filter:drop-shadow(2px 2px 5px beige)}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Sketch_3D;color:#fff;bottom:10px;font-size:60px;text-align:end}.burger_nav[_ngcontent-%COMP%]{width:100px;flex:33.33%;margin-left:25px;cursor:pointer;z-index:501}.sign-and-login[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end;margin-right:0;flex:33.33%}.sign-and-login[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{bottom:10px;text-shadow:2px 2px 5px beige;text-align:end}.sign-and-login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .sign-and-login[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Sketch_3D;color:#fff;font-size:30px}.sign-and-login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:2vh;text-decoration:none;padding:3px 10px;font-weight:300;background-color:#92693d;border-radius:15px;border:3px double beige;box-shadow:2px 2px 5px beige;z-index:501}.sign-and-login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.6;text-decoration:none}#showLogin[_ngcontent-%COMP%], .log[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end;margin-right:0;flex:33.33%}.showLogin[_ngcontent-%COMP%]{font-family:Sketch_3D;margin-right:2vh;text-decoration:none;padding:3px 10px;font-weight:300;font-size:35px;color:#fff;background-color:#92693d;border-radius:15px;border:3px double beige;box-shadow:2px 2px 5px beige;z-index:501}.showLogin[_ngcontent-%COMP%]:hover{opacity:.6;text-decoration:none}.barras[_ngcontent-%COMP%]{height:3px;width:46px;background-color:#f5f5f5;box-shadow:2px 2px 5px #f5f5f5;transition:transform .5s}.barras[_ngcontent-%COMP%]:nth-last-child(2){margin:6px 0}.burguer_desplegado[_ngcontent-%COMP%]{position:absolute;top:11vh;left:1vh;width:0;transition:width .3s;height:20vh;background-color:#92693d;z-index:500}.burguer_menu[_ngcontent-%COMP%]{font-family:Sketch_3D;padding:0;margin:0;flex-wrap:wrap;align-content:left;justify-content:center;z-index:501}.burguer_menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;font-size:0;font-weight:400;color:#fff;transition:text .3s;flex:10%;animation:font-size .5s}.burguer_check[_ngcontent-%COMP%]{display:none}.burguer_check[_ngcontent-%COMP%]:checked + .burger_nav[_ngcontent-%COMP%]   .barras[_ngcontent-%COMP%]:nth-last-child(3){transform:translateY(-100vh)}.burguer_check[_ngcontent-%COMP%]:checked + .burger_nav[_ngcontent-%COMP%]   .barras[_ngcontent-%COMP%]:nth-last-child(2){transform:rotate(35deg);position:absolute;top:31px}.burguer_check[_ngcontent-%COMP%]:checked + .burger_nav[_ngcontent-%COMP%]   .barras[_ngcontent-%COMP%]:last-child{transform:rotate(-35deg);position:absolute;top:37px}.burguer_check[_ngcontent-%COMP%]:checked + .burger_nav[_ngcontent-%COMP%]   .barras[_ngcontent-%COMP%]{display:flex;box-shadow:2px 2px 5px #f5f5f5;border:1px solid #f5f5f5}.burguer_check[_ngcontent-%COMP%]:checked + .burger_nav[_ngcontent-%COMP%] + .logo[_ngcontent-%COMP%] + .sign-and-login[_ngcontent-%COMP%] + .burguer_desplegado[_ngcontent-%COMP%]{width:auto;border-radius:15px;border-color:#f5f5f5;border-style:double}.burguer_check[_ngcontent-%COMP%]:checked + .burger_nav[_ngcontent-%COMP%] + .logo[_ngcontent-%COMP%] + .sign-and-login[_ngcontent-%COMP%] + .burguer_desplegado[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}.burguer_check[_ngcontent-%COMP%]:checked + .burger_nav[_ngcontent-%COMP%] + .logo[_ngcontent-%COMP%] + .log[_ngcontent-%COMP%] + .burguer_desplegado[_ngcontent-%COMP%]{width:auto;border-radius:15px;border-color:#f5f5f5;border-style:double}.burguer_check[_ngcontent-%COMP%]:checked + .burger_nav[_ngcontent-%COMP%] + .logo[_ngcontent-%COMP%] + .log[_ngcontent-%COMP%] + .burguer_desplegado[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:25px}.fondo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;background-repeat:round;width:100%;height:90vh;background-image:url(corcho.354800e041aeadbfe30c.jpg);opacity:.7;z-index:-1}"]}),t})();var to=n("D0XW"),eo=n("w1tV");function no(t,e){return n=>n.lift(new ro(t,e))}class ro{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new io(t,this.compare,this.keySelector))}}class io extends qt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class oo{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new so(t,this.observables,this.project))}}class so extends be{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Ee(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class ao{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new uo(t,this.predicate))}}class uo extends qt.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}n("6Uf2");var co=n("Jgta");function lo(t){return null==t}function ho(t){return"function"==typeof t.set}function fo(t,e){return ho(e)?e:t.ref(e)}function po(t,e){if("string"==typeof t)return e.stringCase();if(ho(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function go(t,e,n="on",r=to.a){return new Ot.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(xt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(eo.a)())}function yo(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function mo(t,e){const{payload:n,prevKey:r,key:i}=e,o=yo(t,i),s=function(t,e){if(lo(e))return 0;{const n=yo(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function vo(t){return(lo(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function bo(t,e,n){return function(t,e,n){return go(t,"value","once",n).pipe(kt(r=>{const i=[Object(Ct.a)(r)];return e.forEach(e=>i.push(go(t,e,"on",n))),Object(St.a)(...i).pipe(Re(mo,[]))}),no())}(t,e=vo(e),n)}function _o(t,e,n){const r=(e=vo(e)).map(e=>go(t,e,"on",n));return Object(St.a)(...r)}function wo(t,e){return function(n,r){return po(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Eo(t,e){return function(){return go(t,"value","on",e)}}const Co=new r.q("angularfire2.realtimeDatabaseURL"),Oo=new r.q("angularfire2.database.use-emulator");let To=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new ae.d(i),this.keepUnstableUntilFirst=Object(ae.h)(this.schedulers);const a=o,u=Object(ae.g)(t,i,e);!co.a.auth&&s&&Object(ae.j)(),this.database=Object(ae.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>fo(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:wo(r,"update"),set:wo(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?po(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>bo(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>_o(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return go(t,"value","on",e).pipe(Object(xt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new oo(t,n))}}(e),Object(xt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new ao(r))),Object(xt.a)(t=>t.actions));var r}(t,_o(t,e).pipe(Re((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>bo(t,r,n).pipe(Object(xt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>fo(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Eo(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Eo(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(xt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(ae.c),r.Qb(ae.b,8),r.Qb(Co,8),r.Qb(r.B),r.Qb(r.z),r.Qb(Oo,8),r.Qb(ue,8))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Qb)(ae.c),Object(r.Qb)(ae.b,8),Object(r.Qb)(Co,8),Object(r.Qb)(r.B),Object(r.Qb)(r.z),Object(r.Qb)(Oo,8),Object(r.Qb)(ue,8))},token:t,providedIn:"any"}),t})(),So=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[To]}),t})(),Io=(()=>{class t{constructor(t){this.TitleService=t}ngOnInit(){this.TitleService.setTitle("Main Type it!")}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(wt))},t.\u0275cmp=r.Db({type:t,selectors:[["app-main"]],decls:32,vars:0,consts:[["id","que-es"],[1,"container","pt-7","pb-6","text-white"],[1,"row","align-items-center","text-center","text-md-left",2,"opacity","1"],[1,"col-lg-6",2,"opacity","1"],["src","../../assets/imagen_tablon_mundo.png","alt","","width","582",1,"img-fluid",2,"opacity","1"],[2,"opacity","1","font-size","55px"],[2,"font-size","55px"],[1,"lead",2,"opacity","1","font-size","25px"],["id","compartido"],[1,"row","align-items-center","text-center","text-md-left"],[1,"col-lg-6"],[1,"lead"],["src","../../assets/maxresdefault.jpg","alt","","width","582",1,"img-fluid"],["id","plantillas"]],template:function(t,e){1&t&&(r.Mb(0,"section",0),r.Mb(1,"div",1),r.Mb(2,"div",2),r.Mb(3,"div",3),r.Kb(4,"img",4),r.Lb(),r.Mb(5,"div",3),r.Mb(6,"h1",5),r.lc(7," Type It! "),r.Mb(8,"h1",6),r.lc(9,"Tu tabl\xf3n virtual personalizable para cualquier \xe1mbito"),r.Lb(),r.Lb(),r.Mb(10,"p",7),r.lc(11," Con la personalizaci\xf3n de Type It! podr\xe1s almacenar toda la informaci\xf3n que consideres oportuna y organizarla a tu gusto. "),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(12,"section",8),r.Mb(13,"div",1),r.Mb(14,"div",9),r.Mb(15,"div",10),r.Mb(16,"h1"),r.lc(17,"Tu tabl\xf3n virtual personalizable para cualquier \xe1mbito"),r.Lb(),r.Mb(18,"p",11),r.lc(19," Con la personalizacion de Type It! podr\xe1s guardar toda informaci\xf3n que crees necesaria y organizarla a tu gusto. "),r.Lb(),r.Lb(),r.Mb(20,"div",10),r.Kb(21,"img",12),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(22,"section",13),r.Mb(23,"div",1),r.Mb(24,"div",9),r.Mb(25,"div",10),r.Mb(26,"h1"),r.lc(27,"Tu tabl\xf3n virtual personalizable para cualquier \xe1mbito"),r.Lb(),r.Mb(28,"p",11),r.lc(29," Con la personalizacion de Type It! podr\xe1s guardar toda informaci\xf3n que crees necesaria y organizarla a tu gusto. "),r.Lb(),r.Lb(),r.Mb(30,"div",10),r.Kb(31,"img",12),r.Lb(),r.Lb(),r.Lb(),r.Lb())},styles:['@font-face{font-family:LoveOliva;src:url(LoveOlivia.27823244bf358b378f5e.ttf)}#que-es[_ngcontent-%COMP%]{background-image:url(corcho.354800e041aeadbfe30c.jpg);padding:15vh}#que-es[_ngcontent-%COMP%]:before{content:"";width:100%;min-height:72vh;left:0;top:10vh;position:absolute;background:linear-gradient(180deg,#d4973c,#000);opacity:.8}#que-es[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:drop-shadow(2px 2px 5px whitesmoke)}#que-es[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:LoveOliva}#compartido[_ngcontent-%COMP%]{background-image:url(corcho.354800e041aeadbfe30c.jpg);padding:15vh}#compartido[_ngcontent-%COMP%]:before{content:"";width:100%;min-height:72vh;left:0;top:82vh;position:absolute;background:linear-gradient(180deg,#000,#d4973c);opacity:.8}#compartido[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:drop-shadow(2px 2px 5px whitesmoke)}#compartido[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:LoveOliva}#plantillas[_ngcontent-%COMP%]{background-image:url(corcho.354800e041aeadbfe30c.jpg);padding:15vh}#plantillas[_ngcontent-%COMP%]:before{content:"";width:100%;min-height:67vh;left:0;top:154vh;position:absolute;background:linear-gradient(180deg,#d4973c,#000);opacity:.8}#plantillas[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:drop-shadow(2px 2px 5px whitesmoke)}#plantillas[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:LoveOliva}']}),t})();var xo=n("XoHu");function Ao(...t){if(1===t.length){const e=t[0];if(Object(ve.a)(e))return ko(e,null);if(Object(xo.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return ko(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return ko(t=1===t.length&&Object(ve.a)(t[0])?t[0]:t,null).pipe(Object(xt.a)(t=>e(...t)))}return ko(t,null)}function ko(t,e){return new Ot.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(Tt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const jo=new r.q("NgValueAccessor"),Po={provide:jo,useExisting:Object(r.T)(()=>No),multi:!0};let No=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.xb([Po])]}),t})();const Do={provide:jo,useExisting:Object(r.T)(()=>Lo),multi:!0},Ro=new r.q("CompositionEventMode");let Lo=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l),r.Jb(Ro,8))},t.\u0275dir=r.Eb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Tb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.xb([Do])]}),t})();function Mo(t){return null==t||0===t.length}function Fo(t){return null!=t&&"number"==typeof t.length}const Vo=new r.q("NgValidators"),Uo=new r.q("NgAsyncValidators"),qo=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ho{static min(t){return e=>{if(Mo(e.value)||Mo(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Mo(e.value)||Mo(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Mo(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Mo(t.value)||qo.test(t.value)?null:{email:!0}}static minLength(t){return e=>Mo(e.value)||!Fo(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>Fo(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Ho.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Mo(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(zo);return 0==e.length?null:function(t){return Qo(Wo(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(zo);return 0==e.length?null:function(t){return Ao(Wo(t,e).map(Bo)).pipe(Object(xt.a)(Qo))}}}function zo(t){return null!=t}function Bo(t){const e=Object(r.qb)(t)?Object(Tt.a)(t):t;return Object(r.pb)(e),e}function Qo(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Wo(t,e){return e.map(e=>e(t))}function Go(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function $o(t){return null!=t?Ho.compose(Go(t)):null}function Ko(t){return null!=t?Ho.composeAsync(Go(t)):null}function Yo(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Jo(t){return t._rawValidators}function Xo(t){return t._rawAsyncValidators}let Zo=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=$o(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ko(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t}),t})(),ts=(()=>{class t extends Zo{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return es(e||t)},t.\u0275dir=r.Eb({type:t,features:[r.vb]}),t})();const es=r.Ob(ts);class ns extends Zo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rs{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let is=(()=>{class t extends rs{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(ns,2))},t.\u0275dir=r.Eb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Bb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})(),os=(()=>{class t extends rs{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(ts,2))},t.\u0275dir=r.Eb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Bb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})();const ss={provide:jo,useExisting:Object(r.T)(()=>as),multi:!0};let as=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.xb([ss])]}),t})();const us={provide:jo,useExisting:Object(r.T)(()=>ls),multi:!0};let cs=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),ls=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(ns),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l),r.Jb(cs),r.Jb(r.r))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.xb([us])]}),t})();const hs={provide:jo,useExisting:Object(r.T)(()=>fs),multi:!0};let fs=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.xb([hs])]}),t})();const ds={provide:jo,useExisting:Object(r.T)(()=>ps),multi:!0};let ps=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Tb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.xb([ds])]}),t})();const gs={provide:jo,useExisting:Object(r.T)(()=>ys),multi:!0};let ys=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.xb([gs])]}),t})();function ms(t,e){bs(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ws(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ws(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function vs(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bs(t,e,n){const r=Jo(t);null!==e.validator?t.setValidators(Yo(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=Xo(t);if(null!==e.asyncValidator?t.setAsyncValidators(Yo(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();vs(e._rawValidators,n),vs(e._rawAsyncValidators,n)}}function _s(t,e,n){if(null!==t){if(null!==e.validator){const n=Jo(t);Array.isArray(n)&&n.length>0&&t.setValidators(n.filter(t=>t!==e.validator))}if(null!==e.asyncValidator){const n=Xo(t);Array.isArray(n)&&n.length>0&&t.setAsyncValidators(n.filter(t=>t!==e.asyncValidator))}}if(n){const t=()=>{};vs(e._rawValidators,t),vs(e._rawAsyncValidators,t)}}function ws(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Es(t,e){bs(t,e,!1)}const Cs=[No,fs,as,ps,ys,ls];function Os(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ts="VALID",Ss="INVALID",Is="PENDING",xs="DISABLED";function As(t){return(Ns(t)?t.validators:t)||null}function ks(t){return Array.isArray(t)?$o(t):t||null}function js(t,e){return(Ns(e)?e.asyncValidators:t)||null}function Ps(t){return Array.isArray(t)?Ko(t):t||null}function Ns(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Ds{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=ks(this._rawValidators),this._composedAsyncValidatorFn=Ps(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Ts}get invalid(){return this.status===Ss}get pending(){return this.status==Is}get disabled(){return this.status===xs}get enabled(){return this.status!==xs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=ks(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Ps(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Is,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=xs,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ts,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Ts&&this.status!==Is||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xs:Ts}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Is,this._hasOwnPendingAsyncValidator=!0;const e=Bo(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Ls?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Ms&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?xs:this.errors?Ss:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Is)?Is:this._anyControlsHaveStatus(Ss)?Ss:Ts}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ns(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Rs extends Ds{constructor(t=null,e,n){super(As(e),js(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Os(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Os(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Ls extends Ds{constructor(t,e,n){super(As(e),js(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Rs?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ms extends Ds{constructor(t,e,n){super(As(e),js(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Rs?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let Fs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Vs=new r.q("NgModelWithFormControlWarning"),Us={provide:ts,useExisting:Object(r.T)(()=>qs)};let qs=(()=>{class t extends ts{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return ms(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Os(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);Es(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);Es(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){const n=()=>{};e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n),_s(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}(t.control||null,t),e&&ms(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){bs(this.form,this,!1),this._oldForm&&_s(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Vo,10),r.Jb(Uo,10))},t.\u0275dir=r.Eb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Tb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.xb([Us]),r.vb,r.wb]}),t})();const Hs={provide:ns,useExisting:Object(r.T)(()=>zs)};let zs=(()=>{class t extends ns{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===Lo?n=t:(e=t,Cs.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(e){var n,i;this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(e,this.viewModel)&&(n=t,this,i=this._ngModelWarningConfig,Object(r.U)()&&"never"!==i&&((null!==i&&"once"!==i||n._ngModelWarningSentOnce)&&("always"!==i||this._ngModelWarningSent)||(n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(t,e){return[...e.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(ts,13),r.Jb(Vo,10),r.Jb(Uo,10),r.Jb(jo,10),r.Jb(Vs,8))},t.\u0275dir=r.Eb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.xb([Hs]),r.vb,r.wb]}),t._ngModelWarningSentOnce=!1,t})();const Bs={provide:Vo,useExisting:Object(r.T)(()=>Qs),multi:!0};let Qs=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}validate(t){return this.required?Ho.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.zb("required",e.required?"":null)},inputs:{required:"required"},features:[r.xb([Bs])]}),t})(),Ws=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)}}),t})(),Gs=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new Ls(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new Rs(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Ms(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Rs||t instanceof Ls||t instanceof Ms?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),$s=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Vs,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[Gs,cs],imports:[Ws]}),t})();function Ks(){return t=>t.lift(new Ys)}class Ys{call(t,e){return e.subscribe(new Js(t))}}class Js extends qt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Xs=n("30Go"),Zs=n("zIRd"),ta=n("q/0M"),ea=n("qOnz"),na=function(t,e){return(na=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ra(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ia,oa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},sa=sa||{},aa=oa||self;function ua(){}function ca(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function la(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ha="closure_uid_"+(1e9*Math.random()>>>0),fa=0;function da(t,e,n){return t.call.apply(t.bind,arguments)}function pa(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ga(t,e,n){return(ga=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?da:pa).apply(null,arguments)}function ya(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ma(){return Date.now()}function va(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ba(){this.j=this.j,this.i=this.i}ba.prototype.j=!1,ba.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,ha)&&t[ha]||(t[ha]=++fa)}(this)},ba.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _a=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},wa=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ea(t){return Array.prototype.concat.apply([],arguments)}function Ca(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Oa(t){return/^[\s\xa0]*$/.test(t)}var Ta,Sa=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ia(t,e){return-1!=t.indexOf(e)}function xa(t,e){return t<e?-1:t>e?1:0}t:{var Aa=aa.navigator;if(Aa){var ka=Aa.userAgent;if(ka){Ta=ka;break t}}Ta=""}function ja(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Pa(t){var e={};for(var n in t)e[n]=t[n];return e}var Na="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Da(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Na.length;o++)n=Na[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ra(t){return Ra[" "](t),t}Ra[" "]=ua;var La,Ma,Fa=Ia(Ta,"Opera"),Va=Ia(Ta,"Trident")||Ia(Ta,"MSIE"),Ua=Ia(Ta,"Edge"),qa=Ua||Va,Ha=Ia(Ta,"Gecko")&&!(Ia(Ta.toLowerCase(),"webkit")&&!Ia(Ta,"Edge"))&&!(Ia(Ta,"Trident")||Ia(Ta,"MSIE"))&&!Ia(Ta,"Edge"),za=Ia(Ta.toLowerCase(),"webkit")&&!Ia(Ta,"Edge");function Ba(){var t=aa.document;return t?t.documentMode:void 0}t:{var Qa="",Wa=(Ma=Ta,Ha?/rv:([^\);]+)(\)|;)/.exec(Ma):Ua?/Edge\/([\d\.]+)/.exec(Ma):Va?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ma):za?/WebKit\/(\S+)/.exec(Ma):Fa?/(?:Version)[ \/]?(\S+)/.exec(Ma):void 0);if(Wa&&(Qa=Wa?Wa[1]:""),Va){var Ga=Ba();if(null!=Ga&&Ga>parseFloat(Qa)){La=String(Ga);break t}}La=Qa}var $a={};function Ka(t){return function(t,e){var n=$a;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Sa(String(La)).split("."),r=Sa(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=xa(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||xa(0==s[2].length,0==a[2].length)||xa(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Ya=aa.document&&Va&&(Ba()||parseInt(La,10))||void 0,Ja=!Va||9<=Number(Ya),Xa=Va&&!Ka("9"),Za=function(){if(!aa.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{aa.addEventListener("test",ua,e),aa.removeEventListener("test",ua,e)}catch(n){}return t}();function tu(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function eu(t,e){if(tu.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ha){t:{try{Ra(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:nu[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}tu.prototype.b=function(){this.defaultPrevented=!0},va(eu,tu);var nu={2:"touch",3:"pen",4:"mouse"};eu.prototype.b=function(){eu.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Xa)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ru="closure_listenable_"+(1e6*Math.random()|0),iu=0;function ou(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++iu,this.Y=this.Z=!1}function su(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function au(t){this.src=t,this.a={},this.b=0}function uu(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=_a(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(su(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function cu(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}au.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=cu(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ou(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var lu="closure_lm_"+(1e6*Math.random()|0),hu={};function fu(t,e,n,r,i){if(r&&r.once)return pu(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)fu(t,e[o],n,r,i);return null}return n=Eu(n),t&&t[ru]?t.va(e,n,la(r)?!!r.capture:!!r,i):du(t,e,n,!1,r,i)}function du(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=la(i)?!!i.capture:!!i;if(s&&!Ja)return null;var a=_u(t);if(a||(t[lu]=a=new au(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=bu,e=Ja?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Za||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mu(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function pu(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)pu(t,e[o],n,r,i);return null}return n=Eu(n),t&&t[ru]?t.wa(e,n,la(r)?!!r.capture:!!r,i):du(t,e,n,!0,r,i)}function gu(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)gu(t,e[o],n,r,i);else r=la(r)?!!r.capture:!!r,n=Eu(n),t&&t[ru]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=cu(o=t.a[e],n,r,i))&&(su(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=_u(t))&&(e=t.a[e.toString()],t=-1,e&&(t=cu(e,n,r,i)),(n=-1<t?e[t]:null)&&yu(n))}function yu(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ru])uu(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mu(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_u(e))?(uu(n,t),0==n.b&&(n.src=null,e[lu]=null)):su(t)}}}function mu(t){return t in hu?hu[t]:hu[t]="on"+t}function vu(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&yu(t),n.call(r,e)}function bu(t,e){if(t.Y)return!0;if(!Ja){if(!e)t:{e=["window","event"];for(var n=aa,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return vu(t,e=new eu(e,this))}return vu(t,new eu(e,this))}function _u(t){return(t=t[lu])instanceof au?t:null}var wu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eu(t){return"function"==typeof t?t:(t[wu]||(t[wu]=function(e){return t.handleEvent(e)}),t[wu])}function Cu(){ba.call(this),this.c=new au(this),this.J=this,this.C=null}function Ou(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new tu(e,t);else if(e instanceof tu)e.target=e.target||t;else{var i=e;Da(e=new tu(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Tu(s,r,!0,e)&&i}if(i=Tu(s=e.a=t,r,!0,e)&&i,i=Tu(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Tu(s=e.a=n[o],r,!1,e)&&i}function Tu(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&uu(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}va(Cu,ba),Cu.prototype[ru]=!0,(ia=Cu.prototype).addEventListener=function(t,e,n,r){fu(this,t,e,n,r)},ia.removeEventListener=function(t,e,n,r){gu(this,t,e,n,r)},ia.G=function(){if(Cu.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)su(n[r]);delete e.a[t],e.b--}}this.C=null},ia.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ia.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Su=aa.JSON.stringify;function Iu(){this.b=this.a=null}var xu,Au=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ju},function(t){t.reset()});function ku(){var t=Ru,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ju(){this.next=this.b=this.a=null}function Pu(t){aa.setTimeout(function(){throw t},0)}function Nu(t,e){xu||function(){var t=aa.Promise.resolve(void 0);xu=function(){t.then(Lu)}}(),Du||(xu(),Du=!0),Ru.add(t,e)}Iu.prototype.add=function(t,e){var n=Au.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ju.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ju.prototype.reset=function(){this.next=this.b=this.a=null};var Du=!1,Ru=new Iu;function Lu(){for(var t;t=ku();){try{t.a.call(t.b)}catch(n){Pu(n)}var e=Au;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Du=!1}function Mu(t,e){Cu.call(this),this.b=t||1,this.a=e||aa,this.f=ga(this.Za,this),this.g=ma()}function Fu(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Vu(t,e,n){if("function"==typeof t)n&&(t=ga(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ga(t.handleEvent,t)}return 2147483647<Number(e)?-1:aa.setTimeout(t,e||0)}function Uu(t){t.a=Vu(function(){t.a=null,t.c&&(t.c=!1,Uu(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}va(Mu,Cu),(ia=Mu.prototype).aa=!1,ia.M=null,ia.Za=function(){if(this.aa){var t=ma()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ou(this,"tick"),this.aa&&(Fu(this),this.start()))}},ia.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=ma())},ia.G=function(){Mu.X.G.call(this),Fu(this),delete this.a};var qu=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}na(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Uu(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(aa.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ba);function Hu(t){ba.call(this),this.b=t,this.a={}}va(Hu,ba);var zu=[];function Bu(t,e,n,r){Array.isArray(n)||(n&&(zu[0]=n.toString()),n=zu);for(var i=0;i<n.length;i++){var o=fu(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Qu(t){ja(t.a,function(t,e){this.a.hasOwnProperty(e)&&yu(t)},t),t.a={}}function Wu(){this.a=!0}function Gu(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Su(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Hu.prototype.G=function(){Hu.X.G.call(this),Qu(this)},Hu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wu.prototype.info=function(){};var $u={},Ku=null;function Yu(){return Ku=Ku||new Cu}function Ju(t){tu.call(this,$u.Fa,t)}function Xu(t){var e=Yu();Ou(e,new Ju(e,t))}function Zu(t,e){tu.call(this,$u.STAT_EVENT,t),this.stat=e}function tc(t){var e=Yu();Ou(e,new Zu(e,t))}function ec(t){tu.call(this,$u.Ga,t)}function nc(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return aa.setTimeout(function(){t()},e)}$u.Fa="serverreachability",va(Ju,tu),$u.STAT_EVENT="statevent",va(Zu,tu),$u.Ga="timingevent",va(ec,tu);var rc={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ic={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function oc(){}function sc(){}oc.prototype.a=null;var ac,uc={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function cc(){tu.call(this,"d")}function lc(){tu.call(this,"c")}function hc(){}function fc(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Hu(this),this.P=dc,this.R=new Mu(t=qa?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}va(cc,tu),va(lc,tu),va(hc,oc),ac=new hc;var dc=45e3,pc={},gc={};function yc(t,e,n){t.H=1,t.i=Fc(Pc(e)),t.j=n,t.I=!0,mc(t,null)}function mc(t,e){t.u=ma(),_c(t),t.l=Pc(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Jc(n.b,"t",r),t.D=0,t.a=Ql(t.g,t.g.C?e:null),0<t.O&&(t.F=new qu(ga(t.Ca,t,t.a),t.O)),Bu(t.J,t.a,"readystatechange",t.Xa),e=t.B?Pa(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Xu(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function vc(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=bc(t,n);if(i==gc){4==e&&(t.h=4,tc(14),r=!1),Gu(t.c,t.f,null,"[Incomplete Response]");break}if(i==pc){t.h=4,tc(15),Gu(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Gu(t.c,t.f,i,null),Tc(t,i)}4==e&&0==n.length&&(t.h=1,tc(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ml(e),e.F=!0,tc(11))):(Gu(t.c,t.f,n,"[Invalid Chunked Response]"),Oc(t),Cc(t))}function bc(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?gc:(n=Number(e.substring(n,r)),isNaN(n)?pc:(r+=1)+n>e.length?gc:(e=e.substr(r,n),t.D=r+n,e))}function _c(t){t.T=ma()+t.P,wc(t,t.P)}function wc(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=nc(ga(t.Va,t),e)}function Ec(t){t.o&&(aa.clearTimeout(t.o),t.o=null)}function Cc(t){0==t.g.v||t.A||Ul(t.g,t)}function Oc(t){Ec(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Fu(t.R),Qu(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Tc(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||il(n.b,t)))if(n.I=t.N,!t.C&&il(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(D_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Vl(n),xl(n)}Ll(n),tc(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=nc(ga(n.Sa,n),6e3));if(1>=rl(n.b)&&n.ea){try{n.ea()}catch(D_){}n.ea=void 0}}else Hl(n,11)}else if((t.C||n.a==t)&&Vl(n),!Oa(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Ia(l,"spdy")||Ia(l,"quic")||Ia(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ol(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Mc(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=ma()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Bl(u,u.C?u.ga:null,u.fa),d.C){sl(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Ec(p),_c(p)),u.a=d}else Rl(u);0<n.g.length&&jl(n)}else"stop"!=i[0]&&"close"!=i[0]||Hl(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Hl(n,7):Il(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Xu(4)}catch(D_){}}function Sc(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ca(t)||"string"==typeof t)wa(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(ca(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ca(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ic(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ic)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xc(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ac(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ac(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ac(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ia=fc.prototype).setTimeout=function(t){this.P=t},ia.Xa=function(t){t=t.target;var e=this.F;e&&3==Cl(t)?e.f():this.Ca(t)},ia.Ca=function(t){try{if(t==this.a)t:{var e=Cl(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!qa&&!this.a.$())){this.A||4!=e||7==n||Xu(8==n||0>=r?3:2),Ec(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oa(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,tc(12),Oc(this),Cc(this);break t}Gu(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Tc(this,u)}this.I?(vc(this,e,o),qa&&this.b&&3==e&&(Bu(this.J,this.R,"tick",this.Wa),this.R.start())):(Gu(this.c,this.f,o,null),Tc(this,o)),4==e&&Oc(this),this.b&&!this.A&&(4==e?Ul(this.g,this):(this.b=!1,_c(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,tc(12)):(this.h=0,tc(13)),Oc(this),Cc(this)}}}catch(c){}},ia.Wa=function(){if(this.a){var t=Cl(this.a),e=this.a.$();this.D<e.length&&(Ec(this),vc(this,t,e),this.b&&4!=t&&_c(this))}},ia.cancel=function(){this.A=!0,Oc(this)},ia.Va=function(){this.o=null;var t=ma();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Xu(3),tc(17)),Oc(this),this.h=2,Cc(this)):wc(this,this.T-t)},(ia=Ic.prototype).K=function(){xc(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ia.L=function(){return xc(this),this.a.concat()},ia.get=function(t,e){return Ac(this.b,t)?this.b[t]:e},ia.set=function(t,e){Ac(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ia.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var kc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function jc(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof jc){this.a=void 0!==e?e:t.a,Nc(this,t.f),this.j=t.j,Dc(this,t.c),Rc(this,t.h),this.g=t.g,e=t.b;var n=new Gc;n.c=e.c,e.a&&(n.a=new Ic(e.a),n.b=e.b),Lc(this,n),this.i=t.i}else t&&(n=String(t).match(kc))?(this.a=!!e,Nc(this,n[1]||"",!0),this.j=Vc(n[2]||""),Dc(this,n[3]||"",!0),Rc(this,n[4]),this.g=Vc(n[5]||"",!0),Lc(this,n[6]||"",!0),this.i=Vc(n[7]||"")):(this.a=!!e,this.b=new Gc(null,this.a))}function Pc(t){return new jc(t)}function Nc(t,e,n){t.f=n?Vc(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Dc(t,e,n){t.c=n?Vc(e,!0):e}function Rc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Lc(t,e,n){e instanceof Gc?(t.b=e,function(t,e){e&&!t.f&&($c(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Kc(this,e),Jc(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Uc(e,Qc)),t.b=new Gc(e,t.a))}function Mc(t,e,n){t.b.set(e,n)}function Fc(t){return Mc(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ma()).toString(36)),t}function Vc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Uc(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qc),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qc(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}jc.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Uc(e,Hc,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Uc(e,Hc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Uc(n,"/"==n.charAt(0)?Bc:zc,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Uc(n,Wc)),t.join("")};var Hc=/[#\/\?@]/g,zc=/[#\?:]/g,Bc=/[#\?]/g,Qc=/[#\?@]/g,Wc=/#/g;function Gc(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $c(t){t.a||(t.a=new Ic,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Kc(t,e){$c(t),e=Xc(t,e),Ac(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ac((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xc(t)))}function Yc(t,e){return $c(t),e=Xc(t,e),Ac(t.a.b,e)}function Jc(t,e,n){Kc(t,e),0<n.length&&(t.c=null,t.a.set(Xc(t,e),Ca(n)),t.b+=n.length)}function Xc(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ia=Gc.prototype).add=function(t,e){$c(this),this.c=null,t=Xc(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ia.forEach=function(t,e){$c(this),this.a.forEach(function(n,r){wa(n,function(n){t.call(e,n,r,this)},this)},this)},ia.L=function(){$c(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ia.K=function(t){$c(this);var e=[];if("string"==typeof t)Yc(this,t)&&(e=Ea(e,this.a.get(Xc(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ea(e,t[n])}return e},ia.set=function(t,e){return $c(this),this.c=null,Yc(this,t=Xc(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ia.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ia.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Zc=function(){return function(t,e){this.b=t,this.a=e}}();function tl(t){this.g=t||el,t=aa.PerformanceNavigationTiming?0<(t=aa.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(aa.ia&&aa.ia.ya&&aa.ia.ya()&&aa.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var el=10;function nl(t){return!!t.b||!!t.a&&t.a.size>=t.f}function rl(t){return t.b?1:t.a?t.a.size:0}function il(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ol(t,e){t.a?t.a.add(e):t.b=e}function sl(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function al(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=ra(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ca(t.c)}function ul(){}function cl(){this.a=new ul}function ll(t,e,n){var r=n||"";try{Sc(t,function(t,n){var i=t;la(t)&&(i=Su(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}tl.prototype.cancel=function(){var t,e;if(this.c=al(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ra(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ul.prototype.stringify=function(t){return aa.JSON.stringify(t,void 0)},ul.prototype.parse=function(t){return aa.JSON.parse(t,void 0)};var fl=aa.JSON.parse;function dl(t){Cu.call(this),this.headers=new Ic,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=pl,this.D=this.F=!1}va(dl,Cu);var pl="",gl=/^https?$/i,yl=["POST","PUT"];function ml(t){return"content-type"==t.toLowerCase()}function vl(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,bl(t),wl(t)}function bl(t){t.u||(t.u=!0,Ou(t,"complete"),Ou(t,"error"))}function _l(t){if(t.b&&void 0!==sa&&(!t.s[1]||4!=Cl(t)||2!=t.W()))if(t.l&&4==Cl(t))Vu(t.za,0,t);else if(Ou(t,"readystatechange"),4==Cl(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(kc)[1]||null;if(!o&&aa.self&&aa.self.location){var s=aa.self.location.protocol;o=s.substr(0,s.length-1)}i=!gl.test(o?o.toLowerCase():"")}e=i}if(e)Ou(t,"complete"),Ou(t,"success");else{t.h=6;try{var a=2<Cl(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",bl(t)}}finally{wl(t)}}}function wl(t,e){if(t.a){El(t);var n=t.a,r=t.s[0]?ua:null;t.a=null,t.s=null,e||Ou(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function El(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(aa.clearTimeout(t.m),t.m=null)}function Cl(t){return t.a?t.a.readyState:0}function Ol(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ja(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Mc(t,e,n))}function Tl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sl(t){this.pa=0,this.g=[],this.c=new Wu,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Tl("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Tl("baseRetryDelayMs",5e3,t),this.Ra=Tl("retryDelaySeedMs",1e4,t),this.Ma=Tl("forwardChannelMaxRetries",2,t),this.ma=Tl("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new tl(t&&t.concurrentRequestLimit),this.ka=new cl,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Il(t){if(Al(t),3==t.v){var e=t.R++,n=Pc(t.B);Mc(n,"SID",t.J),Mc(n,"RID",e),Mc(n,"TYPE","terminate"),Nl(t,n),(e=new fc(t,t.c,e,void 0)).H=2,e.i=Fc(Pc(n)),n=!1,aa.navigator&&aa.navigator.sendBeacon&&(n=aa.navigator.sendBeacon(e.i.toString(),"")),!n&&aa.Image&&((new Image).src=e.i,n=!0),n||(e.a=Ql(e.g,null),e.a.ba(e.i)),e.u=ma(),_c(e)}zl(t)}function xl(t){t.a&&(Ml(t),t.a.cancel(),t.a=null)}function Al(t){xl(t),t.j&&(aa.clearTimeout(t.j),t.j=null),Vl(t),t.b.cancel(),t.h&&("number"==typeof t.h&&aa.clearTimeout(t.h),t.h=null)}function kl(t,e){t.g.push(new Zc(t.Oa++,e)),3==t.v&&jl(t)}function jl(t){nl(t.b)||t.h||(t.h=!0,Nu(t.Ba,t),t.u=0)}function Pl(t,e){var n;n=e?e.f:t.R++;var r=Pc(t.B);Mc(r,"SID",t.J),Mc(r,"RID",n),Mc(r,"AID",t.P),Nl(t,r),t.i&&t.l&&Ol(r,t.i,t.l),n=new fc(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Dl(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ol(t.b,n),yc(n,r,e)}function Nl(t,e){t.f&&Sc({},function(t,n){Mc(e,n,t)})}function Dl(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ga(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{ll(l,s,"req"+c+"_")}catch(Ch){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Rl(t){t.a||t.j||(t.T=1,Nu(t.Aa,t),t.o=0)}function Ll(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=nc(ga(t.Aa,t),ql(t,t.o)),t.o++,0))}function Ml(t){null!=t.s&&(aa.clearTimeout(t.s),t.s=null)}function Fl(t){t.a=new fc(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Pc(t.la);Mc(e,"RID","rpc"),Mc(e,"SID",t.J),Mc(e,"CI",t.H?"0":"1"),Mc(e,"AID",t.P),Nl(t,e),Mc(e,"TYPE","xmlhttp"),t.i&&t.l&&Ol(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Fc(Pc(e)),n.j=null,n.I=!0,mc(n,t)}function Vl(t){null!=t.m&&(aa.clearTimeout(t.m),t.m=null)}function Ul(t,e){var n=null;if(t.a==e){Vl(t),Ml(t),t.a=null;var r=2}else{if(!il(t.b,e))return;n=e.s,sl(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=ma()-e.u;var i=t.u;Ou(r=Yu(),new ec(r,n,e,i)),jl(t)}else Rl(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(rl(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=nc(ga(t.Ba,t,e),ql(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ll(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Hl(t,5);break;case 4:Hl(t,10);break;case 3:Hl(t,6);break;default:Hl(t,2)}}function ql(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Hl(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ga(t.Ya,t);n||(n=new jc("//www.google.com/images/cleardot.gif"),aa.location&&"http"==aa.location.protocol||Nc(n,"https"),Fc(n)),function(t,e){var n=new Wu;if(aa.Image){var r=new Image;r.onload=ya(hl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ya(hl,n,r,"TestLoadImage: error",!1,e),r.onabort=ya(hl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ya(hl,n,r,"TestLoadImage: timeout",!1,e),aa.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else tc(2);t.v=0,t.f&&t.f.ra(e),zl(t),Al(t)}function zl(t){t.v=0,t.I=-1,t.f&&(0==al(t.b).length&&0==t.g.length||(t.b.c.length=0,Ca(t.g),t.g.length=0),t.f.qa())}function Bl(t,e,n){var r=function(t){return t instanceof jc?Pc(t):new jc(t,void 0)}(n);if(""!=r.c)e&&Dc(r,e+"."+r.c),Rc(r,r.h);else{var i=aa.location;r=function(t,e,n,r){var i=new jc(null,void 0);return t&&Nc(i,t),e&&Dc(i,e),n&&Rc(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ja(t.V,function(t,e){Mc(r,e,t)}),n=t.na,(e=t.A)&&n&&Mc(r,e,n),Mc(r,"VER",t.ha),Nl(t,r),r}function Ql(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dl(t.Na)).F=t.C,e}function Wl(){}function Gl(){if(Va&&!(10<=Number(Ya)))throw Error("Environmental error: no available transport.")}function $l(t,e){Cu.call(this),this.a=new Sl(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Oa(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Oa(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Jl(this)}function Kl(t){cc.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Yl(){lc.call(this),this.status=1}function Jl(t){this.a=t}(ia=dl.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ac),this.a.onreadystatechange=ga(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void vl(this,o)}t=n||"";var i=new Ic(this.headers);r&&Sc(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=ml,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=aa.FormData&&t instanceof aa.FormData,!(0<=_a(yl,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{El(this),0<this.o&&((this.D=function(t){return Va&&Ka(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ga(this.xa,this)):this.m=Vu(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){vl(this,o)}},ia.xa=function(){void 0!==sa&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ou(this,"timeout"),this.abort(8))},ia.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ou(this,"complete"),Ou(this,"abort"),wl(this))},ia.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),wl(this,!0)),dl.X.G.call(this)},ia.za=function(){this.j||(this.A||this.l||this.g?_l(this):this.Ua())},ia.Ua=function(){_l(this)},ia.W=function(){try{return 2<Cl(this)?this.a.status:-1}catch(Ma){return-1}},ia.$=function(){try{return this.a?this.a.responseText:""}catch(Ma){return""}},ia.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),fl(e)}},ia.ua=function(){return this.h},ia.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ia=Sl.prototype).ha=8,ia.v=1,ia.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new fc(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Da(r=Pa(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Dl(this,n,e),Mc(i=Pc(this.B),"RID",t),Mc(i,"CVER",22),this.A&&Mc(i,"X-HTTP-Session-Id",this.A),Nl(this,i),this.i&&r&&Ol(i,this.i,r),ol(this.b,n),this.Ia&&Mc(i,"TYPE","init"),this.da?(Mc(i,"$req",e),Mc(i,"SID","null"),n.U=!0,yc(n,i,null)):yc(n,i,e),this.v=2}}else 3==this.v&&(t?Pl(this,t):0==this.g.length||nl(this.b)||Pl(this))},ia.Aa=function(){if(this.j=null,Fl(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=nc(ga(this.Ta,this),t)}},ia.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,tc(10),xl(this),Fl(this))},ia.Sa=function(){null!=this.m&&(this.m=null,xl(this),Ll(this),tc(19))},ia.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),tc(2)):(this.c.info("Failed to ping google.com"),tc(1))},(ia=Wl.prototype).ta=function(){},ia.sa=function(){},ia.ra=function(){},ia.qa=function(){},ia.Ja=function(){},Gl.prototype.a=function(t,e){return new $l(t,e)},va($l,Cu),$l.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;tc(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Bl(t,null,t.fa),jl(t)},$l.prototype.close=function(){Il(this.a)},$l.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,kl(this.a,e)}else this.l?((e={}).__data__=Su(t),kl(this.a,e)):kl(this.a,t)},$l.prototype.G=function(){this.a.f=null,delete this.f,Il(this.a),delete this.a,$l.X.G.call(this)},va(Kl,cc),va(Yl,lc),va(Jl,Wl),Jl.prototype.ta=function(){Ou(this.a,"a")},Jl.prototype.sa=function(t){Ou(this.a,new Kl(t))},Jl.prototype.ra=function(t){Ou(this.a,new Yl(t))},Jl.prototype.qa=function(){Ou(this.a,"b")},Gl.prototype.createWebChannel=Gl.prototype.a,$l.prototype.send=$l.prototype.h,$l.prototype.open=$l.prototype.g,$l.prototype.close=$l.prototype.close,rc.NO_ERROR=0,rc.TIMEOUT=8,rc.HTTP_ERROR=6,ic.COMPLETE="complete",sc.EventType=uc,uc.OPEN="a",uc.CLOSE="b",uc.ERROR="c",uc.MESSAGE="d",Cu.prototype.listen=Cu.prototype.va,dl.prototype.listenOnce=dl.prototype.wa,dl.prototype.getLastError=dl.prototype.Qa,dl.prototype.getLastErrorCode=dl.prototype.ua,dl.prototype.getStatus=dl.prototype.W,dl.prototype.getResponseJson=dl.prototype.Pa,dl.prototype.getResponseText=dl.prototype.$,dl.prototype.send=dl.prototype.ba;var Xl=rc,Zl=ic,th=$u,eh=sc,nh=dl,rh=n("/6Yf"),ih=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},oh=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),sh=function(){function t(t){this.uid=t}return t.prototype.u=function(){return null!=this.uid},t.prototype.h=function(){return this.u()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();sh.UNAUTHENTICATED=new sh(null),sh.l=new sh("google-credentials-uid"),sh._=new sh("first-party-uid");var ah=new ta.b("@firebase/firestore");function uh(){return ah.logLevel}function ch(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ah.logLevel<=ta.a.DEBUG){var r=e.map(fh);ah.debug.apply(ah,Object(Xs.g)(["Firestore (8.1.2): "+t],r))}}function lh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ah.logLevel<=ta.a.ERROR){var r=e.map(fh);ah.error.apply(ah,Object(Xs.g)(["Firestore (8.1.2): "+t],r))}}function hh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ah.logLevel<=ta.a.WARN){var r=e.map(fh);ah.warn.apply(ah,Object(Xs.g)(["Firestore (8.1.2): "+t],r))}}function fh(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function dh(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.1.2) INTERNAL ASSERTION FAILED: "+t;throw lh(e),new Error(e)}function ph(t,e){t||dh()}function gh(t,e){return t}var yh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},mh=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Xs.c)(e,t),e}(Error),vh=function(t,e){this.user=e,this.type="OAuth",this.T={},this.T.Authorization="Bearer "+t},bh=function(){function t(){this.I=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.m=function(){},t.prototype.A=function(t){this.I=t,t(sh.UNAUTHENTICATED)},t.prototype.R=function(){this.I=null},t}(),_h=function(){function t(t){var e=this;this.P=null,this.currentUser=sh.UNAUTHENTICATED,this.g=!1,this.V=0,this.I=null,this.forceRefresh=!1,this.P=function(){e.V++,e.currentUser=e.p(),e.g=!0,e.I&&e.I(e.currentUser)},this.V=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.P):(this.P(null),t.get().then(function(t){e.auth=t,e.P&&e.auth.addAuthTokenListener(e.P)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.V,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.V!==e?(ch("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ph("string"==typeof n.accessToken),new vh(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.m=function(){this.forceRefresh=!0},t.prototype.A=function(t){this.I=t,this.g&&t(this.currentUser)},t.prototype.R=function(){this.auth&&this.auth.removeAuthTokenListener(this.P),this.P=null,this.I=null},t.prototype.p=function(){var t=this.auth&&this.auth.getUid();return ph(null===t||"string"==typeof t),new sh(t)},t}(),wh=function(){function t(t,e){this.v=t,this.S=e,this.type="FirstParty",this.user=sh._}return Object.defineProperty(t.prototype,"T",{get:function(){var t={"X-Goog-AuthUser":this.S},e=this.v.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Eh=function(){function t(t,e){this.v=t,this.S=e}return t.prototype.getToken=function(){return Promise.resolve(new wh(this.v,this.S))},t.prototype.A=function(t){t(sh._)},t.prototype.R=function(){},t.prototype.m=function(){},t}();function Ch(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Oh=function(){function t(){}return t.D=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ch(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Th(t,e){return t<e?-1:t>e?1:0}function Sh(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Ih(t){return t+"\0"}var xh=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new mh(yh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new mh(yh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new mh(yh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mh(yh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.C=function(t){return this.seconds===t.seconds?Th(this.nanoseconds,t.nanoseconds):Th(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ah=function(){function t(t){this.timestamp=t}return t.N=function(e){return new t(e)},t.min=function(){return new t(new xh(0,0))},t.prototype.F=function(t){return this.timestamp.C(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.O=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.M=function(){return this.timestamp},t}(),kh=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&dh(),void 0===n?n=t.length-e:n>t.length-e&&dh(),this.segments=t,this.offset=e,this.k=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.$(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.L(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.B=function(t){return this.L(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.q=function(){return this.L(this.segments,this.offset,this.length-1)},t.prototype.U=function(){return this.segments[this.offset]},t.prototype.K=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.W=function(){return 0===this.length},t.prototype.j=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.G=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.H=function(){return this.segments.slice(this.offset,this.limit())},t.$=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),jh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xs.c)(e,t),e.prototype.L=function(t,n,r){return new e(t,n,r)},e.prototype.J=function(){return this.H().join("/")},e.prototype.toString=function(){return this.J()},e.Y=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new mh(yh.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.X=function(){return new e([])},e}(kh),Ph=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Nh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xs.c)(e,t),e.prototype.L=function(t,n,r){return new e(t,n,r)},e.Z=function(t){return Ph.test(t)},e.prototype.J=function(){return this.H().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.Z(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.J()},e.prototype.tt=function(){return 1===this.length&&"__name__"===this.get(0)},e.et=function(){return new e(["__name__"])},e.nt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new mh(yh.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new mh(yh.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new mh(yh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new mh(yh.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.X=function(){return new e([])},e}(kh),Dh=function(){function t(t){this.path=t}return t.st=function(e){return new t(jh.Y(e))},t.it=function(e){return new t(jh.Y(e).B(5))},t.prototype.rt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===jh.$(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.$=function(t,e){return jh.$(t.path,e.path)},t.ot=function(t){return t.length%2==0},t.ct=function(e){return new t(new jh(e.slice()))},t}();function Rh(t){return null==t}function Lh(t){return 0===t&&1/t==-1/0}function Mh(t){return"number"==typeof t&&Number.isInteger(t)&&!Lh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Fh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ut=null};function Vh(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Fh(t,e,n,r,i,o,s)}function Uh(t){var e=gh(t);if(null===e.ut){var n=e.path.J();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.J()+t.op.toString()+Lf(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.J()+t.dir}(t)}).join(","),Rh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Fp(e.startAt)),e.endAt&&(n+="|ub:",n+=Fp(e.endAt)),e.ut=n}return e.ut}function qh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!zp(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Pf(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Up(t.startAt,e.startAt)&&Up(t.endAt,e.endAt)}function Hh(t){return Dh.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}var zh=function(){function t(t){this.at=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.at)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.at)},t.prototype.ht=function(){return 2*this.at.length},t.prototype.F=function(t){return Th(this.at,t.at)},t.prototype.isEqual=function(t){return this.at===t.at},t}();zh.lt=new zh("");var Bh,Qh,Wh=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ah.min()),void 0===o&&(o=Ah.min()),void 0===s&&(s=zh.lt),this.target=t,this.targetId=e,this._t=n,this.sequenceNumber=r,this.ft=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.dt=function(e){return new t(this.target,this.targetId,this._t,e,this.ft,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.wt=function(e,n){return new t(this.target,this.targetId,this._t,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Et=function(e){return new t(this.target,this.targetId,this._t,this.sequenceNumber,this.ft,e,this.resumeToken)},t}(),Gh=function(t){this.count=t};function $h(t){switch(t){case yh.OK:return dh();case yh.CANCELLED:case yh.UNKNOWN:case yh.DEADLINE_EXCEEDED:case yh.RESOURCE_EXHAUSTED:case yh.INTERNAL:case yh.UNAVAILABLE:case yh.UNAUTHENTICATED:return!1;case yh.INVALID_ARGUMENT:case yh.NOT_FOUND:case yh.ALREADY_EXISTS:case yh.PERMISSION_DENIED:case yh.FAILED_PRECONDITION:case yh.ABORTED:case yh.OUT_OF_RANGE:case yh.UNIMPLEMENTED:case yh.DATA_LOSS:return!0;default:return dh()}}function Kh(t){if(void 0===t)return lh("GRPC error has no .code"),yh.UNKNOWN;switch(t){case Bh.OK:return yh.OK;case Bh.CANCELLED:return yh.CANCELLED;case Bh.UNKNOWN:return yh.UNKNOWN;case Bh.DEADLINE_EXCEEDED:return yh.DEADLINE_EXCEEDED;case Bh.RESOURCE_EXHAUSTED:return yh.RESOURCE_EXHAUSTED;case Bh.INTERNAL:return yh.INTERNAL;case Bh.UNAVAILABLE:return yh.UNAVAILABLE;case Bh.UNAUTHENTICATED:return yh.UNAUTHENTICATED;case Bh.INVALID_ARGUMENT:return yh.INVALID_ARGUMENT;case Bh.NOT_FOUND:return yh.NOT_FOUND;case Bh.ALREADY_EXISTS:return yh.ALREADY_EXISTS;case Bh.PERMISSION_DENIED:return yh.PERMISSION_DENIED;case Bh.FAILED_PRECONDITION:return yh.FAILED_PRECONDITION;case Bh.ABORTED:return yh.ABORTED;case Bh.OUT_OF_RANGE:return yh.OUT_OF_RANGE;case Bh.UNIMPLEMENTED:return yh.UNIMPLEMENTED;case Bh.DATA_LOSS:return yh.DATA_LOSS;default:return dh()}}(Qh=Bh||(Bh={}))[Qh.OK=0]="OK",Qh[Qh.CANCELLED=1]="CANCELLED",Qh[Qh.UNKNOWN=2]="UNKNOWN",Qh[Qh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qh[Qh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qh[Qh.NOT_FOUND=5]="NOT_FOUND",Qh[Qh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qh[Qh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qh[Qh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qh[Qh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qh[Qh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qh[Qh.ABORTED=10]="ABORTED",Qh[Qh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qh[Qh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qh[Qh.INTERNAL=13]="INTERNAL",Qh[Qh.UNAVAILABLE=14]="UNAVAILABLE",Qh[Qh.DATA_LOSS=15]="DATA_LOSS";var Yh=function(){function t(t,e){this.$=t,this.root=e||Xh.EMPTY}return t.prototype.Tt=function(e,n){return new t(this.$,this.root.Tt(e,n,this.$).copy(null,null,Xh.It,null,null))},t.prototype.remove=function(e){return new t(this.$,this.root.remove(e,this.$).copy(null,null,Xh.It,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.W();){var n=this.$(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.W();){var r=this.$(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.W=function(){return this.root.W()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.At=function(){return this.root.At()},t.prototype.Rt=function(){return this.root.Rt()},t.prototype.Pt=function(t){return this.root.Pt(t)},t.prototype.forEach=function(t){this.Pt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Pt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.yt=function(){return new Jh(this.root,null,this.$,!1)},t.prototype.Vt=function(t){return new Jh(this.root,t,this.$,!1)},t.prototype.vt=function(){return new Jh(this.root,null,this.$,!0)},t.prototype.bt=function(t){return new Jh(this.root,t,this.$,!0)},t}(),Jh=function(){function t(t,e,n,r){this.St=r,this.Dt=[];for(var i=1;!t.W();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.St?t.left:t.right;else{if(0===i){this.Dt.push(t);break}this.Dt.push(t),t=this.St?t.right:t.left}}return t.prototype.Ct=function(){var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.St)for(t=t.left;!t.W();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.W();)this.Dt.push(t),t=t.left;return e},t.prototype.Nt=function(){return this.Dt.length>0},t.prototype.xt=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},t}(),Xh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.W=function(){return!1},t.prototype.Pt=function(t){return this.left.Pt(t)||t(this.key,this.value)||this.right.Pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.W()?this:this.left.min()},t.prototype.At=function(){return this.min().key},t.prototype.Rt=function(){return this.right.W()?this.key:this.right.Rt()},t.prototype.Tt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Tt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Tt(t,e,n))).Ft()},t.prototype.Ot=function(){if(this.left.W())return t.EMPTY;var e=this;return e.left.Mt()||e.left.left.Mt()||(e=e.kt()),(e=e.copy(null,null,null,e.left.Ot(),null)).Ft()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.W()||i.left.Mt()||i.left.left.Mt()||(i=i.kt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Mt()&&(i=i.$t()),i.right.W()||i.right.Mt()||i.right.left.Mt()||(i=i.Lt()),0===n(e,i.key)){if(i.right.W())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Ot())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ft()},t.prototype.Mt=function(){return this.color},t.prototype.Ft=function(){var t=this;return t.right.Mt()&&!t.left.Mt()&&(t=t.Bt()),t.left.Mt()&&t.left.left.Mt()&&(t=t.$t()),t.left.Mt()&&t.right.Mt()&&(t=t.qt()),t},t.prototype.kt=function(){var t=this.qt();return t.right.left.Mt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.$t())).Bt()).qt()),t},t.prototype.Lt=function(){var t=this.qt();return t.left.left.Mt()&&(t=(t=t.$t()).qt()),t},t.prototype.Bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.$t=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.qt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.Qt();return Math.pow(2,t)<=this.size+1},t.prototype.Qt=function(){if(this.Mt()&&this.left.Mt())throw dh();if(this.right.Mt())throw dh();var t=this.left.Qt();if(t!==this.right.Qt())throw dh();return t+(this.Mt()?0:1)},t}();Xh.EMPTY=null,Xh.RED=!0,Xh.It=!1,Xh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw dh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw dh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw dh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw dh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw dh()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Tt=function(t,e,n){return new Xh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.W=function(){return!0},t.prototype.Pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.At=function(){return null},t.prototype.Rt=function(){return null},t.prototype.Mt=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.Qt=function(){return 0},t}());var Zh=function(){function t(t){this.$=t,this.data=new Yh(this.$)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.At()},t.prototype.last=function(){return this.data.Rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pt(function(e,n){return t(e),!1})},t.prototype.Kt=function(t,e){for(var n=this.data.Vt(t[0]);n.Nt();){var r=n.Ct();if(this.$(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Wt=function(t,e){var n;for(n=void 0!==e?this.data.Vt(e):this.data.yt();n.Nt();)if(!t(n.Ct().key))return},t.prototype.jt=function(t){var e=this.data.Vt(t);return e.Nt()?e.Ct().key:null},t.prototype.yt=function(){return new tf(this.data.yt())},t.prototype.Vt=function(t){return new tf(this.data.Vt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Tt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.W=function(){return this.data.W()},t.prototype.Gt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.yt(),r=e.data.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(0!==this.$(i,o))return!1}return!0},t.prototype.H=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.$);return n.data=e,n},t}(),tf=function(){function t(t){this.zt=t}return t.prototype.Ct=function(){return this.zt.Ct().key},t.prototype.Nt=function(){return this.zt.Nt()},t}(),ef=new Yh(Dh.$);function nf(){return ef}function rf(){return nf()}var of=new Yh(Dh.$);function sf(){return of}var af=new Yh(Dh.$),uf=new Zh(Dh.$);function cf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=uf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var lf=new Zh(Th);function hf(){return lf}var ff=function(){function t(t){this.$=t?function(e,n){return t(e,n)||Dh.$(e.key,n.key)}:function(t,e){return Dh.$(t.key,e.key)},this.Ht=sf(),this.Jt=new Yh(this.$)}return t.Yt=function(e){return new t(e.$)},t.prototype.has=function(t){return null!=this.Ht.get(t)},t.prototype.get=function(t){return this.Ht.get(t)},t.prototype.first=function(){return this.Jt.At()},t.prototype.last=function(){return this.Jt.Rt()},t.prototype.W=function(){return this.Jt.W()},t.prototype.indexOf=function(t){var e=this.Ht.get(t);return e?this.Jt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Jt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Jt.Pt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ht.Tt(t.key,t),e.Jt.Tt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ht.remove(t),this.Jt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Jt.yt(),r=e.Jt.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.$=this.$,r.Ht=e,r.Jt=n,r},t}(),df=function(){function t(){this.Xt=new Yh(Dh.$)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Xt.get(e);n?0!==t.type&&3===n.type?this.Xt=this.Xt.Tt(e,t):3===t.type&&1!==n.type?this.Xt=this.Xt.Tt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Xt=this.Xt.Tt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Xt=this.Xt.remove(e):1===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):dh():this.Xt=this.Xt.Tt(e,t)},t.prototype.Zt=function(){var t=[];return this.Xt.Pt(function(e,n){t.push(n)}),t},t}(),pf=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.te=n,this.docChanges=r,this.ee=i,this.fromCache=o,this.ne=s,this.se=a}return t.ie=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,ff.Yt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.ee.W()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ne===t.ne&&this.ee.isEqual(t.ee)&&Cp(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.te.isEqual(t.te)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),gf=function(){function t(t,e,n,r,i){this.ft=t,this.re=e,this.oe=n,this.ce=r,this.ue=i}return t.ae=function(e,n){var r=new Map;return r.set(e,yf.he(e,n)),new t(Ah.min(),r,hf(),nf(),cf())},t}(),yf=function(){function t(t,e,n,r,i){this.resumeToken=t,this.le=e,this._e=n,this.fe=r,this.de=i}return t.he=function(e,n){return new t(zh.lt,n,cf(),cf(),cf())},t}(),mf=function(t,e,n,r){this.we=t,this.removedTargetIds=e,this.key=n,this.Ee=r},vf=function(t,e){this.targetId=t,this.Te=e},bf=function(t,e,n,r){void 0===n&&(n=zh.lt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},_f=function(){function t(){this.Ie=0,this.me=Cf(),this.Ae=zh.lt,this.Re=!1,this.Pe=!0}return Object.defineProperty(t.prototype,"le",{get:function(){return this.Re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ge",{get:function(){return 0!==this.Ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ye",{get:function(){return this.Pe},enumerable:!1,configurable:!0}),t.prototype.Ve=function(t){t.ht()>0&&(this.Pe=!0,this.Ae=t)},t.prototype.pe=function(){var t=cf(),e=cf(),n=cf();return this.me.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:dh()}}),new yf(this.Ae,this.Re,t,e,n)},t.prototype.ve=function(){this.Pe=!1,this.me=Cf()},t.prototype.be=function(t,e){this.Pe=!0,this.me=this.me.Tt(t,e)},t.prototype.Se=function(t){this.Pe=!0,this.me=this.me.remove(t)},t.prototype.De=function(){this.Ie+=1},t.prototype.Ce=function(){this.Ie-=1},t.prototype.Ne=function(){this.Pe=!0,this.Re=!0},t}(),wf=function(){function t(t){this.xe=t,this.Fe=new Map,this.Oe=nf(),this.Me=Ef(),this.ke=new Zh(Th)}return t.prototype.$e=function(t){for(var e=0,n=t.we;e<n.length;e++){var r=n[e];t.Ee instanceof cp?this.Le(r,t.Ee):t.Ee instanceof lp&&this.Be(r,t.key,t.Ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Be(o[i],t.key,t.Ee)},t.prototype.qe=function(t){var e=this;this.Ue(t,function(n){var r=e.Qe(n);switch(t.state){case 0:e.Ke(n)&&r.Ve(t.resumeToken);break;case 1:r.Ce(),r.ge||r.ve(),r.Ve(t.resumeToken);break;case 2:r.Ce(),r.ge||e.removeTarget(n);break;case 3:e.Ke(n)&&(r.Ne(),r.Ve(t.resumeToken));break;case 4:e.Ke(n)&&(e.We(n),r.Ve(t.resumeToken));break;default:dh()}})},t.prototype.Ue=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fe.forEach(function(t,r){n.Ke(r)&&e(r)})},t.prototype.je=function(t){var e=t.targetId,n=t.Te.count,r=this.Ge(e);if(r){var i=r.target;if(Hh(i))if(0===n){var o=new Dh(i.path);this.Be(e,o,new lp(o,Ah.min()))}else ph(1===n);else this.ze(e)!==n&&(this.We(e),this.ke=this.ke.add(e))}},t.prototype.He=function(t){var e=this,n=new Map;this.Fe.forEach(function(r,i){var o=e.Ge(i);if(o){if(r.le&&Hh(o.target)){var s=new Dh(o.target.path);null!==e.Oe.get(s)||e.Je(i,s)||e.Be(i,s,new lp(s,t))}r.ye&&(n.set(i,r.pe()),r.ve())}});var r=cf();this.Me.forEach(function(t,n){var i=!0;n.Wt(function(t){var n=e.Ge(t);return!n||2===n._t||(i=!1,!1)}),i&&(r=r.add(t))});var i=new gf(t,n,this.ke,this.Oe,r);return this.Oe=nf(),this.Me=Ef(),this.ke=new Zh(Th),i},t.prototype.Le=function(t,e){if(this.Ke(t)){var n=this.Je(t,e.key)?2:0;this.Qe(t).be(e.key,n),this.Oe=this.Oe.Tt(e.key,e),this.Me=this.Me.Tt(e.key,this.Ye(e.key).add(t))}},t.prototype.Be=function(t,e,n){if(this.Ke(t)){var r=this.Qe(t);this.Je(t,e)?r.be(e,1):r.Se(e),this.Me=this.Me.Tt(e,this.Ye(e).delete(t)),n&&(this.Oe=this.Oe.Tt(e,n))}},t.prototype.removeTarget=function(t){this.Fe.delete(t)},t.prototype.ze=function(t){var e=this.Qe(t).pe();return this.xe.Xe(t).size+e._e.size-e.de.size},t.prototype.De=function(t){this.Qe(t).De()},t.prototype.Qe=function(t){var e=this.Fe.get(t);return e||(e=new _f,this.Fe.set(t,e)),e},t.prototype.Ye=function(t){var e=this.Me.get(t);return e||(e=new Zh(Th),this.Me=this.Me.Tt(t,e)),e},t.prototype.Ke=function(t){var e=null!==this.Ge(t);return e||ch("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ge=function(t){var e=this.Fe.get(t);return e&&e.ge?null:this.xe.Ze(t)},t.prototype.We=function(t){var e=this;this.Fe.set(t,new _f),this.xe.Xe(t).forEach(function(n){e.Be(t,n,null)})},t.prototype.Je=function(t,e){return this.xe.Xe(t).has(e)},t}();function Ef(){return new Yh(Dh.$)}function Cf(){return new Yh(Dh.$)}function Of(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Tf(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Sf(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function If(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function xf(t){var e=t.mapValue.fields.__previous_value__;return If(e)?xf(e):e}function Af(t){var e=Ff(t.mapValue.fields.__local_write_time__.timestampValue);return new xh(e.seconds,e.nanos)}var kf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?If(t)?4:10:dh()}function Pf(t,e){var n=jf(t);if(n!==jf(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Af(t).isEqual(Af(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ff(t.timestampValue),r=Ff(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Uf(t.bytesValue).isEqual(Uf(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Vf(t.geoPointValue.latitude)===Vf(e.geoPointValue.latitude)&&Vf(t.geoPointValue.longitude)===Vf(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Vf(t.integerValue)===Vf(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Vf(t.doubleValue),r=Vf(e.doubleValue);return n===r?Lh(n)===Lh(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Sh(t.arrayValue.values||[],e.arrayValue.values||[],Pf);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Of(n)!==Of(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Pf(n[i],r[i])))return!1;return!0}(t,e);default:return dh()}}function Nf(t,e){return void 0!==(t.values||[]).find(function(t){return Pf(t,e)})}function Df(t,e){var n=jf(t),r=jf(e);if(n!==r)return Th(n,r);switch(n){case 0:return 0;case 1:return Th(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Vf(t.integerValue||t.doubleValue),r=Vf(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Rf(t.timestampValue,e.timestampValue);case 4:return Rf(Af(t),Af(e));case 5:return Th(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Uf(t),r=Uf(e);return n.F(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Th(n[i],r[i]);if(0!==o)return o}return Th(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Th(Vf(t.latitude),Vf(e.latitude));return 0!==n?n:Th(Vf(t.longitude),Vf(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Df(n[i],r[i]);if(o)return o}return Th(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Th(r[s],o[s]);if(0!==a)return a;var u=Df(n[r[s]],i[o[s]]);if(0!==u)return u}return Th(r.length,o.length)}(t.mapValue,e.mapValue);default:throw dh()}}function Rf(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Th(t,e);var n=Ff(t),r=Ff(e),i=Th(n.seconds,r.seconds);return 0!==i?i:Th(n.nanos,r.nanos)}function Lf(t){return Mf(t)}function Mf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Ff(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Uf(t.bytesValue).toBase64():"referenceValue"in t?Dh.it(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Mf(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Mf(t.fields[o])}return e+"}"}(t.mapValue):dh();var e}function Ff(t){if(ph(!!t),"string"==typeof t){var e=0,n=kf.exec(t);if(ph(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vf(t.seconds),nanos:Vf(t.nanos)}}function Vf(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Uf(t){return"string"==typeof t?zh.fromBase64String(t):zh.fromUint8Array(t)}function qf(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.J()}}function Hf(t){return!!t&&"integerValue"in t}function zf(t){return!!t&&"arrayValue"in t}function Bf(t){return!!t&&"nullValue"in t}function Qf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wf(t){return!!t&&"mapValue"in t}var Gf={asc:"ASCENDING",desc:"DESCENDING"},$f={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kf=function(t,e){this.t=t,this.tn=e};function Yf(t){return{integerValue:""+t}}function Jf(t,e){if(t.tn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function Xf(t,e){return Mh(e)?Yf(e):Jf(t,e)}function Zf(t,e){return t.tn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function td(t,e){return t.tn?e.toBase64():e.toUint8Array()}function ed(t,e){return Zf(t,e.M())}function nd(t){return ph(!!t),Ah.N(function(t){var e=Ff(t);return new xh(e.seconds,e.nanos)}(t))}function rd(t,e){return function(t){return new jh(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).J()}function id(t){var e=jh.Y(t);return ph(Id(e)),e}function od(t,e){return rd(t.t,e.path)}function sd(t,e){var n=id(e);if(n.get(1)!==t.t.projectId)throw new mh(yh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new mh(yh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Dh(ld(n))}function ad(t,e){return rd(t.t,e)}function ud(t){var e=id(t);return 4===e.length?jh.X():ld(e)}function cd(t){return new jh(["projects",t.t.projectId,"databases",t.t.database]).J()}function ld(t){return ph(t.length>4&&"documents"===t.get(4)),t.B(5)}function hd(t,e,n){return{name:od(t,e),fields:n.proto.mapValue.fields}}function fd(t,e){var n;if(e instanceof Jd)n={update:hd(t,e.key,e.value)};else if(e instanceof rp)n={delete:od(t,e.key)};else if(e instanceof Xd)n={update:hd(t,e.key,e.data),updateMask:Sd(e.en)};else if(e instanceof tp)n={transform:{document:od(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Pd)return{fieldPath:e.field.J(),setToServerValue:"REQUEST_TIME"};if(n instanceof Nd)return{fieldPath:e.field.J(),appendMissingElements:{values:n.elements}};if(n instanceof Rd)return{fieldPath:e.field.J(),removeAllFromArray:{values:n.elements}};if(n instanceof Md)return{fieldPath:e.field.J(),increment:n.nn};throw dh()}(0,t)})}};else{if(!(e instanceof ip))return dh();n={verify:od(t,e.key)}}return e.rn.sn||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ed(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:dh()}(t,e.rn)),n}function dd(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?zd.updateTime(nd(t.updateTime)):void 0!==t.exists?zd.exists(t.exists):zd.on()}(e.currentDocument):zd.on();if(e.update){var r=sd(t,e.update.name),i=new op({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new Ud((t.fieldPaths||[]).map(function(t){return Nh.nt(t)}))}(e.updateMask);return new Xd(r,i,o,n)}return new Jd(r,i,n)}if(e.delete){var s=sd(t,e.delete);return new rp(s,n)}if(e.transform){var a=sd(t,e.transform.document),u=e.transform.fieldTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(ph("REQUEST_TIME"===e.setToServerValue),n=new Pd):"appendMissingElements"in e?n=new Nd(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Rd(e.removeAllFromArray.values||[]):"increment"in e?n=new Md(t,e.increment):dh();var r=Nh.nt(e.fieldPath);return new qd(r,n)}(t,e)});return ph(!0===n.exists),new tp(a,u)}if(e.verify){var c=sd(t,e.verify);return new ip(c,n)}return dh()}function pd(t,e){return{documents:[ad(t,e.path)]}}function gd(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ad(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ad(t,r.q()),n.structuredQuery.from=[{collectionId:r.K()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Qf(t.value))return{unaryFilter:{field:Ed(t.field),op:"IS_NAN"}};if(Bf(t.value))return{unaryFilter:{field:Ed(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Qf(t.value))return{unaryFilter:{field:Ed(t.field),op:"IS_NOT_NAN"}};if(Bf(t.value))return{unaryFilter:{field:Ed(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ed(t.field),op:wd(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Ed(t.field),direction:_d(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.tn||Rh(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=vd(e.startAt)),e.endAt&&(n.structuredQuery.endAt=vd(e.endAt)),n}function yd(t){var e=ud(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ph(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=md(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new qp(Cd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Rh(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=bd(n.startAt));var l=null;return n.endAt&&(l=bd(n.endAt)),dp(e,i,a,s,u,"F",c,l)}function md(t){return t?void 0!==t.unaryFilter?[Td(t)]:void 0!==t.fieldFilter?[Od(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return md(t)}).reduce(function(t,e){return t.concat(e)}):dh():[]}function vd(t){return{before:t.before,values:t.position}}function bd(t){return new Mp(t.values||[],!!t.before)}function _d(t){return Gf[t]}function wd(t){return $f[t]}function Ed(t){return{fieldPath:t.J()}}function Cd(t){return Nh.nt(t.fieldPath)}function Od(t){return xp.create(Cd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return dh()}}(t.fieldFilter.op),t.fieldFilter.value)}function Td(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Cd(t.unaryFilter.field);return xp.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Cd(t.unaryFilter.field);return xp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cd(t.unaryFilter.field);return xp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cd(t.unaryFilter.field);return xp.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return dh()}}function Sd(t){var e=[];return t.fields.forEach(function(t){return e.push(t.J())}),{fieldPaths:e}}function Id(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var xd=function(){this.cn=void 0};function Ad(t,e,n){return t instanceof Pd?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Nd?Dd(t,e):t instanceof Rd?Ld(t,e):function(t,e){var n=jd(t,e),r=Fd(n)+Fd(t.nn);return Hf(n)&&Hf(t.nn)?Yf(r):Jf(t.serializer,r)}(t,e)}function kd(t,e,n){return t instanceof Nd?Dd(t,e):t instanceof Rd?Ld(t,e):n}function jd(t,e){return t instanceof Md?Hf(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Pd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xs.c)(e,t),e}(xd),Nd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Xs.c)(e,t),e}(xd);function Dd(t,e){for(var n=Vd(e),r=function(t){n.some(function(e){return Pf(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Rd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Xs.c)(e,t),e}(xd);function Ld(t,e){for(var n=Vd(e),r=function(t){n=n.filter(function(e){return!Pf(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Md=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.nn=n,r}return Object(Xs.c)(e,t),e}(xd);function Fd(t){return Vf(t.integerValue||t.doubleValue)}function Vd(t){return zf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ud=function(){function t(t){this.fields=t,t.sort(Nh.$)}return t.prototype.un=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].j(t))return!0;return!1},t.prototype.isEqual=function(t){return Sh(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),qd=function(t,e){this.field=t,this.transform=e},Hd=function(t,e){this.version=t,this.transformResults=e},zd=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.on=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"sn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Bd(t,e){return void 0!==t.updateTime?e instanceof cp&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof cp}var Qd=function(){};function Wd(t,e,n){return t instanceof Jd?function(t,e,n){return new cp(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Xd?function(t,e,n){if(!Bd(t.rn,e))return new hp(t.key,n.version);var r=Zd(t,e);return new cp(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof tp?function(t,e,n){if(ph(null!=n.transformResults),!Bd(t.rn,e))return new hp(t.key,n.version);var r=ep(0,e),i=function(t,e,n){var r=[];ph(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof cp&&(a=e.field(o.field)),r.push(kd(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=np(t,r.data(),i);return new cp(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new lp(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Gd(t,e,n,r){return t instanceof Jd?function(t,e){if(!Bd(t.rn,e))return e;var n=Yd(e);return new cp(t.key,n,t.value,{an:!0})}(t,e):t instanceof Xd?function(t,e){if(!Bd(t.rn,e))return e;var n=Yd(e),r=Zd(t,e);return new cp(t.key,n,r,{an:!0})}(t,e):t instanceof tp?function(t,e,n,r){if(!Bd(t.rn,e))return e;var i=ep(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof cp&&(c=n.field(a.field)),null===c&&r instanceof cp&&(c=r.field(a.field)),i.push(Ad(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=np(t,i.data(),o);return new cp(t.key,i.version,s,{an:!0})}(t,e,r,n):function(t,e){return Bd(t.rn,e)?new lp(t.key,Ah.min()):e}(t,e)}function $d(t,e){return t instanceof tp?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof cp?e.field(o.field):void 0,a=jd(o.transform,s||null);null!=a&&(n=null==n?(new sp).set(o.field,a):n.set(o.field,a))}return n?n.hn():null}(t,e):null}function Kd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.rn.isEqual(e.rn)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.en.isEqual(e.en):2!==t.type||Sh(t.fieldTransforms,t.fieldTransforms,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Nd&&e instanceof Nd||t instanceof Rd&&e instanceof Rd?Sh(t.elements,e.elements,Pf):t instanceof Md&&e instanceof Md?Pf(t.nn,e.nn):t instanceof Pd&&e instanceof Pd}(t.transform,e.transform)}(t,e)}))}function Yd(t){return t instanceof cp?t.version:Ah.min()}var Jd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.rn=r,i.type=0,i}return Object(Xs.c)(e,t),e}(Qd),Xd=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.en=r,o.rn=i,o.type=1,o}return Object(Xs.c)(e,t),e}(Qd);function Zd(t,e){return function(t,e){var n=new sp(e);return t.en.fields.forEach(function(e){if(!e.W()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.hn()}(t,e instanceof cp?e.data():op.empty())}var tp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.rn=zd.exists(!0),r}return Object(Xs.c)(e,t),e}(Qd);function ep(t,e){return e}function np(t,e,n){for(var r=new sp(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.hn()}var rp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=3,r}return Object(Xs.c)(e,t),e}(Qd),ip=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=4,r}return Object(Xs.c)(e,t),e}(Qd),op=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.W())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Wf(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.K()])||null},t.prototype.isEqual=function(t){return Pf(this.proto,t.proto)},t}(),sp=function(){function t(t){void 0===t&&(t=op.empty()),this.ln=t,this._n=new Map}return t.prototype.set=function(t,e){return this.fn(t,e),this},t.prototype.delete=function(t){return this.fn(t,null),this},t.prototype.fn=function(t,e){for(var n=this._n,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===jf(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.K(),e)},t.prototype.hn=function(){var t=this.dn(Nh.X(),this._n);return null!=t?new op(t):this.ln},t.prototype.dn=function(t,e){var n=this,r=!1,i=this.ln.field(t),o=Wf(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.dn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function ap(t){var e=[];return Tf(t.fields||{},function(t,n){var r=new Nh([t]);if(Wf(n)){var i=ap(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Ud(e)}var up=function(t,e){this.key=t,this.version=e},cp=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).wn=r,o.an=!!i.an,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Xs.c)(e,t),e.prototype.field=function(t){return this.wn.field(t)},e.prototype.data=function(){return this.wn},e.prototype.En=function(){return this.wn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.an===t.an&&this.hasCommittedMutations===t.hasCommittedMutations&&this.wn.isEqual(t.wn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.wn.toString()+", {hasLocalMutations: "+this.an+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.an||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(up),lp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Xs.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(up),hp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xs.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(up),fp=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Tn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.In=null,this.mn=null};function dp(t,e,n,r,i,o,s,a){return new fp(t,e,n,r,i,o,s,a)}function pp(t){return new fp(t)}function gp(t){return!Rh(t.limit)&&"F"===t.limitType}function yp(t){return!Rh(t.limit)&&"L"===t.limitType}function mp(t){return t.Tn.length>0?t.Tn[0].field:null}function vp(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.An())return r.field}return null}function bp(t){return null!==t.collectionGroup}function _p(t){var e=gh(t);if(null===e.In){e.In=[];var n=vp(e),r=mp(e);if(null!==n&&null===r)n.tt()||e.In.push(new qp(n)),e.In.push(new qp(Nh.et(),"asc"));else{for(var i=!1,o=0,s=e.Tn;o<s.length;o++){var a=s[o];e.In.push(a),a.field.tt()&&(i=!0)}if(!i){var u=e.Tn.length>0?e.Tn[e.Tn.length-1].dir:"asc";e.In.push(new qp(Nh.et(),u))}}}return e.In}function wp(t){var e=gh(t);if(!e.mn)if("F"===e.limitType)e.mn=Vh(e.path,e.collectionGroup,_p(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=_p(e);r<i.length;r++){var o=i[r];n.push(new qp(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Mp(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Mp(e.startAt.position,!e.startAt.before):null;e.mn=Vh(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.mn}function Ep(t,e,n){return new fp(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cp(t,e){return qh(wp(t),wp(e))&&t.limitType===e.limitType}function Op(t){return Uh(wp(t))+"|lt:"+t.limitType}function Tp(t){return"Query(target="+function(t){var e=t.path.J();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.J()+" "+e.op+" "+Lf(e.value);var e}).join(", ")+"]"),Rh(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.J()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Fp(t.startAt)),t.endAt&&(e+=", endAt: "+Fp(t.endAt)),"Target("+e+")"}(wp(t))+"; limitType="+t.limitType+")"}function Sp(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.rt(t.collectionGroup)&&t.path.j(n):Dh.ot(t.path)?t.path.isEqual(n):t.path.G(n)}(t,e)&&function(t,e){for(var n=0,r=t.Tn;n<r.length;n++){var i=r[n];if(!i.field.tt()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Vp(t.startAt,_p(t),e)||t.endAt&&Vp(t.endAt,_p(t),e))}(t,e)}function Ip(t){return function(e,n){for(var r=!1,i=0,o=_p(t);i<o.length;i++){var s=o[i],a=Hp(s,e,n);if(0!==a)return a;r=r||s.field.tt()}return 0}}var xp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Xs.c)(e,t),e.create=function(t,n,r){return t.tt()?"in"===n||"not-in"===n?this.Rn(t,n,r):new Ap(t,n,r):"array-contains"===n?new Np(t,r):"in"===n?new Dp(t,r):"not-in"===n?new Rp(t,r):"array-contains-any"===n?new Lp(t,r):new e(t,n,r)},e.Rn=function(t,e,n){return"in"===e?new kp(t,n):new jp(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Pn(Df(e,this.value)):null!==e&&jf(this.value)===jf(e)&&this.Pn(Df(e,this.value))},e.prototype.Pn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return dh()}},e.prototype.An=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Ap=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Dh.it(r.referenceValue),i}return Object(Xs.c)(e,t),e.prototype.matches=function(t){var e=Dh.$(t.key,this.key);return this.Pn(e)},e}(xp),kp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Pp(0,n),r}return Object(Xs.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(xp),jp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Pp(0,n),r}return Object(Xs.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(xp);function Pp(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Dh.it(t.referenceValue)})}var Np=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Xs.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return zf(e)&&Nf(e.arrayValue,this.value)},e}(xp),Dp=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Xs.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Nf(this.value.arrayValue,e)},e}(xp),Rp=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Xs.c)(e,t),e.prototype.matches=function(t){if(Nf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Nf(this.value.arrayValue,e)},e}(xp),Lp=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Xs.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!zf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Nf(e.value.arrayValue,t)})},e}(xp),Mp=function(t,e){this.position=t,this.before=e};function Fp(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Lf(t)}).join(",")}function Vp(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.tt()?Dh.$(Dh.it(s.referenceValue),n.key):Df(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Up(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Pf(t.position[n],e.position[n]))return!1;return!0}var qp=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Hp(t,e,n){var r=t.field.tt()?Dh.$(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Df(r,i):dh()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return dh()}}function zp(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Bp=function(){function t(t,e,n,r){this.batchId=t,this.gn=e,this.baseMutations=n,this.mutations=r}return t.prototype.yn=function(t,e,n){for(var r=n.Vn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Wd(o,e,r[i]))}return e},t.prototype.pn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Gd(i,e,e,this.gn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Gd(u,e,o,this.gn))}return e},t.prototype.vn=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.pn(r.key,t.get(r.key));i&&(n=n.Tt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},cf())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Sh(this.mutations,t.mutations,function(t,e){return Kd(t,e)})&&Sh(this.baseMutations,t.baseMutations,function(t,e){return Kd(t,e)})},t}(),Qp=function(){function t(t,e,n,r){this.batch=t,this.bn=e,this.Vn=n,this.Sn=r}return t.from=function(e,n,r){ph(e.mutations.length===r.length);for(var i=af,o=e.mutations,s=0;s<o.length;s++)i=i.Tt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Wp=function(){function t(t,e){this.Dn=t,this.Cn=e,this.Nn={}}return t.prototype.get=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.Cn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Dn(t),r=this.Nn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.Cn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.Nn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.Cn(n[r][0],t))return 1===n.length?delete this.Nn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Tf(this.Nn,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.W=function(){return Sf(this.Nn)},t}(),Gp=function(){function t(t){var e=this;this.xn=null,this.Fn=null,this.result=void 0,this.error=void 0,this.On=!1,this.Mn=!1,t(function(t){e.On=!0,e.result=t,e.xn&&e.xn(t)},function(t){e.On=!0,e.error=t,e.Fn&&e.Fn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Mn&&dh(),this.Mn=!0,this.On?this.error?this.kn(n,this.error):this.$n(e,this.result):new t(function(t,i){r.xn=function(n){r.$n(e,n).next(t,i)},r.Fn=function(e){r.kn(n,e).next(t,i)}})},t.prototype.Ln=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.Bn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.$n=function(e,n){return e?this.Bn(function(){return e(n)}):t.resolve(n)},t.prototype.kn=function(e,n){return e?this.Bn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.qn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Un=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.qn(r)},t}(),$p=function(){function t(){this.Qn=new Wp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.Kn=!1}return t.prototype.Wn=function(t){var e=this.Qn.get(t);return e?e.readTime:Ah.min()},t.prototype.jn=function(t,e){this.Gn(),this.Qn.set(t.key,{zn:t,readTime:e})},t.prototype.Hn=function(t,e){void 0===e&&(e=null),this.Gn(),this.Qn.set(t,{zn:null,readTime:e})},t.prototype.Jn=function(t,e){this.Gn();var n=this.Qn.get(e);return void 0!==n?Gp.resolve(n.zn):this.Yn(t,e)},t.prototype.getEntries=function(t,e){return this.Xn(t,e)},t.prototype.apply=function(t){return this.Gn(),this.Kn=!0,this.Zn(t)},t.prototype.Gn=function(){},t}(),Kp=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};function Yp(t){return new Kf(t,!0)}function Jp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Xp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zp=function(){function t(){this.ts=[]}return t.prototype.es=function(t){this.ts.push(t)},t.prototype.ns=function(){this.ts.forEach(function(t){return t()})},t}(),tg=function(){function t(t,e,n){this.ss=t,this.rs=e,this.os=n}return t.prototype.cs=function(t,e){var n=this;return this.rs.us(t,e).next(function(r){return n.hs(t,e,r)})},t.prototype.hs=function(t,e,n){return this.ss.Jn(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].pn(e,t);return t})},t.prototype.ls=function(t,e,n){var r=rf();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].pn(t,e);r=r.Tt(t,e)}),r},t.prototype._s=function(t,e){var n=this;return this.ss.getEntries(t,e).next(function(e){return n.fs(t,e)})},t.prototype.fs=function(t,e){var n=this;return this.rs.ds(t,e).next(function(r){var i=n.ls(t,e,r),o=nf();return i.forEach(function(t,e){e||(e=new lp(t,Ah.min())),o=o.Tt(t,e)}),o})},t.prototype.ws=function(t,e,n){return function(t){return Dh.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Es(t,e.path):bp(e)?this.Ts(t,e,n):this.Is(t,e,n)},t.prototype.Es=function(t,e){return this.cs(t,new Dh(e)).next(function(t){var e=sf();return t instanceof cp&&(e=e.Tt(t.key,t)),e})},t.prototype.Ts=function(t,e,n){var r=this,i=e.collectionGroup,o=sf();return this.os.As(t,i).next(function(s){return Gp.forEach(s,function(s){var a=function(t,e){return new fp(e,null,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Is(t,a,n).next(function(t){t.forEach(function(t,e){o=o.Tt(t,e)})})}).next(function(){return o})})},t.prototype.Is=function(t,e,n){var r,i,o=this;return this.ss.ws(t,e,n).next(function(n){return r=n,o.rs.Rs(t,e)}).next(function(e){return o.Ps(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=Gd(u,l,l,o.gn);r=h instanceof cp?r.Tt(c,h):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Sp(e,n)||(r=r.remove(t))}),r})},t.prototype.Ps=function(t,e,n){for(var r=cf(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Xd&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ss.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof cp&&(c=c.Tt(t,e))}),c})},t}(),eg=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.gs=n,this.ys=r}return t.Vs=function(e,n){for(var r=cf(),i=cf(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ng=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ps=function(t){return n.vs(t)},this.bs=function(t){return e.Ss(t)})}return t.prototype.vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.bs&&this.bs(t),t},t}();ng.Ds=-1;var rg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Cs=t,this.Ns=e,this.xs=n,this.Fs=r,this.Os=i,this.Ms=0,this.ks=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ms=0},t.prototype.Ls=function(){this.Ms=this.Os},t.prototype.Bs=function(t){var e=this;this.cancel();var n=Math.floor(this.Ms+this.qs()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&ch("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ms+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ks=this.Cs.Us(this.Ns,i,function(){return e.$s=Date.now(),t()}),this.Ms*=this.Fs,this.Ms<this.xs&&(this.Ms=this.xs),this.Ms>this.Os&&(this.Ms=this.Os)},t.prototype.Qs=function(){null!==this.ks&&(this.ks.Ks(),this.ks=null)},t.prototype.cancel=function(){null!==this.ks&&(this.ks.cancel(),this.ks=null)},t.prototype.qs=function(){return(Math.random()-.5)*this.Ms},t}(),ig=function(){function t(e,n,r){this.name=e,this.version=n,this.Ws=r,12.2===t.js(Object(ea.m)())&&lh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ch("SimpleDb","Removing database:",t),lg(window.indexedDB.deleteDatabase(t)).Ln()},t.Gs=function(){if("undefined"==typeof indexedDB)return!1;if(t.zs())return!0;var e=Object(ea.m)(),n=t.js(e),r=0<n&&n<10,i=t.Hs(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.zs=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Js)},t.Ys=function(t,e){return t.store(e)},t.js=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Hs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Xs=function(t){return Object(Xs.b)(this,void 0,void 0,function(){var e,n=this;return Object(Xs.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(ch("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new sg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new mh(yh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new sg(t,n))},i.onupgradeneeded=function(t){ch("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Ws.createOrUpgrade(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){ch("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Zs&&(this.db.onversionchange=function(t){return n.Zs(t)}),this.db)]}})})},t.prototype.ti=function(t){this.Zs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Xs.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Xs.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Xs.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Xs(t)];case 2:return a.db=h.sent(),e=ug.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Gp.reject(t)}).Ln(),u={},s.catch(function(){}),[4,e.ei];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return ch("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),og=function(){function t(t){this.ni=t,this.si=!1,this.ii=null}return Object.defineProperty(t.prototype,"On",{get:function(){return this.si},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ri",{get:function(){return this.ii},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ni=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.si=!0},t.prototype.oi=function(t){this.ii=t},t.prototype.delete=function(){return lg(this.ni.delete())},t}(),sg=function(t){function e(e,n){var r=this;return(r=t.call(this,yh.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Xs.c)(e,t),e}(mh);function ag(t){return"IndexedDbTransactionError"===t.name}var ug=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ci=new Kp,this.transaction.oncomplete=function(){n.ci.resolve()},this.transaction.onabort=function(){e.error?n.ci.reject(new sg(t,e.error)):n.ci.resolve()},this.transaction.onerror=function(e){var r=fg(e.target.error);n.ci.reject(new sg(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new sg(n,e)}},Object.defineProperty(t.prototype,"ei",{get:function(){return this.ci.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ci.reject(t),this.aborted||(ch("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new cg(e)},t}(),cg=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ch("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ch("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),lg(n)},t.prototype.add=function(t){return ch("SimpleDb","ADD",this.store.name,t,t),lg(this.store.add(t))},t.prototype.get=function(t){var e=this;return lg(this.store.get(t)).next(function(n){return void 0===n&&(n=null),ch("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return ch("SimpleDb","DELETE",this.store.name,t),lg(this.store.delete(t))},t.prototype.count=function(){return ch("SimpleDb","COUNT",this.store.name),lg(this.store.count())},t.prototype.ui=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ai(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.hi=function(t,e){ch("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.li=!1;var r=this.cursor(n);return this.ai(r,function(t,e,n){return n.delete()})},t.prototype._i=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ai(r,e)},t.prototype.fi=function(t){var e=this.cursor({});return new Gp(function(n,r){e.onerror=function(t){var e=fg(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.ai=function(t,e){var n=[];return new Gp(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new og(i),s=e(i.primaryKey,i.value,o);if(s instanceof Gp){var a=s.catch(function(t){return o.done(),Gp.reject(t)});n.push(a)}o.On?r():null===o.ri?i.continue():i.continue(o.ri)}else r()}}).next(function(){return Gp.qn(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.li?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function lg(t){return new Gp(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=fg(t.target.error);n(e)}})}var hg=!1;function fg(t){var e=ig.js(Object(ea.m)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new mh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hg||(hg=!0,setTimeout(function(){throw r},0)),r}}return t}function dg(){return"undefined"!=typeof window?window:null}function pg(){return"undefined"!=typeof document?document:null}var gg=function(){function t(t,e,n,r,i){this.di=t,this.Ns=e,this.wi=n,this.op=r,this.Ei=i,this.Ti=new Kp,this.then=this.Ti.promise.then.bind(this.Ti.promise),this.Ti.promise.catch(function(t){})}return t.Ii=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.mi=setTimeout(function(){return e.Ai()},t)},t.prototype.Ks=function(){return this.Ai()},t.prototype.cancel=function(t){null!==this.mi&&(this.clearTimeout(),this.Ti.reject(new mh(yh.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Ai=function(){var t=this;this.di.Ri(function(){return null!==t.mi?(t.clearTimeout(),t.op().then(function(e){return t.Ti.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.mi&&(this.Ei(this),clearTimeout(this.mi),this.mi=null)},t}(),yg=function(){function t(){var t=this;this.Pi=Promise.resolve(),this.gi=[],this.yi=!1,this.Vi=[],this.pi=null,this.vi=!1,this.bi=[],this.Si=new rg(this,"async_queue_retry"),this.Di=function(){var e=pg();e&&ch("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Si.Qs()};var e=pg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Di)}return Object.defineProperty(t.prototype,"Ci",{get:function(){return this.yi},enumerable:!1,configurable:!0}),t.prototype.Ri=function(t){this.enqueue(t)},t.prototype.Ni=function(t){this.xi(),this.Fi(t)},t.prototype.Oi=function(){if(!this.yi){this.yi=!0;var t=pg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Di)}},t.prototype.enqueue=function(t){return this.xi(),this.yi?new Promise(function(t){}):this.Fi(t)},t.prototype.Mi=function(t){var e=this;this.Ri(function(){return e.gi.push(t),e.ki()})},t.prototype.ki=function(){return Object(Xs.b)(this,void 0,void 0,function(){var t,e=this;return Object(Xs.d)(this,function(n){switch(n.label){case 0:if(0===this.gi.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gi[0]()];case 2:return n.sent(),this.gi.shift(),this.Si.reset(),[3,4];case 3:if(!ag(t=n.sent()))throw t;return ch("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gi.length>0&&this.Si.Bs(function(){return e.ki()}),n.label=5;case 5:return[2]}})})},t.prototype.Fi=function(t){var e=this,n=this.Pi.then(function(){return e.vi=!0,t().catch(function(t){throw e.pi=t,e.vi=!1,lh("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.vi=!1,t})});return this.Pi=n,n},t.prototype.Us=function(t,e,n){var r=this;this.xi(),this.bi.indexOf(t)>-1&&(e=0);var i=gg.Ii(this,t,e,n,function(t){return r.$i(t)});return this.Vi.push(i),i},t.prototype.xi=function(){this.pi&&dh()},t.prototype.Li=function(){},t.prototype.Bi=function(){return Object(Xs.b)(this,void 0,void 0,function(){var t;return Object(Xs.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Pi];case 1:e.sent(),e.label=2;case 2:if(t!==this.Pi)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.qi=function(t){for(var e=0,n=this.Vi;e<n.length;e++)if(n[e].Ns===t)return!0;return!1},t.prototype.Ui=function(t){var e=this;return this.Bi().then(function(){e.Vi.sort(function(t,e){return t.wi-e.wi});for(var n=0,r=e.Vi;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ns===t)break}return e.Bi()})},t.prototype.Qi=function(t){this.bi.push(t)},t.prototype.$i=function(t){var e=this.Vi.indexOf(t);this.Vi.splice(e,1)},t}();function mg(t,e){if(lh("AsyncQueue",e+": "+t),ag(t))return new mh(yh.UNAVAILABLE,e+": "+t);throw t}function vg(t,e){var n=t[1],r=e[1],i=Th(t[0],e[0]);return 0===i?Th(n,r):i}var bg=function(){function t(t){this.Ki=t,this.buffer=new Zh(vg),this.Wi=0}return t.prototype.ji=function(){return++this.Wi},t.prototype.Gi=function(t){var e=[t,this.ji()];if(this.buffer.size<this.Ki)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();vg(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),_g={zi:!1,Hi:0,Ji:0,Yi:0},wg=function(){function t(t,e,n){this.Xi=t,this.Zi=e,this.tr=n}return t.er=function(e){return new t(e,t.nr,t.sr)},t}();wg.nr=10,wg.sr=1e3,wg.ir=new wg(41943040,wg.nr,wg.sr),wg.rr=new wg(-1,0,0);var Eg=function(){function t(t,e){this.cr=t,this.di=e,this.ur=!1,this.ar=null}return t.prototype.start=function(t){-1!==this.cr.params.Xi&&this.hr(t)},t.prototype.stop=function(){this.ar&&(this.ar.cancel(),this.ar=null)},Object.defineProperty(t.prototype,"lr",{get:function(){return null!==this.ar},enumerable:!1,configurable:!0}),t.prototype.hr=function(t){var e=this,n=this.ur?3e5:6e4;ch("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ar=this.di.Us("lru_garbage_collection",n,function(){return Object(Xs.b)(e,void 0,void 0,function(){var e;return Object(Xs.d)(this,function(n){switch(n.label){case 0:this.ar=null,this.ur=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t._r(this.cr)];case 2:return n.sent(),[3,7];case 3:return ag(e=n.sent())?(ch("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Yy(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.hr(t)];case 8:return n.sent(),[2]}})})})},t}(),Cg=function(){function t(t,e){this.dr=t,this.params=e}return t.prototype.wr=function(t,e){return this.dr.Er(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Tr=function(t,e){var n=this;if(0===e)return Gp.resolve(ng.Ds);var r=new bg(e);return this.dr.Ue(t,function(t){return r.Gi(t.sequenceNumber)}).next(function(){return n.dr.Ir(t,function(t){return r.Gi(t)})}).next(function(){return r.maxValue})},t.prototype.mr=function(t,e,n){return this.dr.mr(t,e,n)},t.prototype.Ar=function(t,e){return this.dr.Ar(t,e)},t.prototype.Rr=function(t,e){var n=this;return-1===this.params.Xi?(ch("LruGarbageCollector","Garbage collection skipped; disabled"),Gp.resolve(_g)):this.Pr(t).next(function(r){return r<n.params.Xi?(ch("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Xi),_g):n.gr(t,e)})},t.prototype.Pr=function(t){return this.dr.Pr(t)},t.prototype.gr=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.wr(t,this.params.Zi).next(function(e){return e>c.params.tr?(ch("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.tr+" from "+e),r=c.params.tr):r=e,o=Date.now(),c.Tr(t,r)}).next(function(r){return n=r,s=Date.now(),c.mr(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.Ar(t,n)}).next(function(t){return u=Date.now(),uh()<=ta.a.DEBUG&&ch("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Gp.resolve({zi:!0,Hi:r,Ji:i,Yi:t})})},t}(),Og=function(){function t(){}return t.prototype.yr=function(t){this.Vr=t},t.prototype.ws=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Tn.length||1===t.Tn.length&&t.Tn[0].field.tt())}(e)||n.isEqual(Ah.min())?this.pr(t,e):this.Vr._s(t,r).next(function(o){var s=i.vr(e,o);return(gp(e)||yp(e))&&i.br(e.limitType,s,r,n)?i.pr(t,e):(uh()<=ta.a.DEBUG&&ch("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Tp(e)),i.Vr.ws(t,e,n).next(function(t){return s.forEach(function(e){t=t.Tt(e.key,e)}),t}))})},t.prototype.vr=function(t,e){var n=new Zh(Ip(t));return e.forEach(function(e,r){r instanceof cp&&Sp(t,r)&&(n=n.add(r))}),n},t.prototype.br=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.F(r)>0)},t.prototype.pr=function(t,e){return uh()<=ta.a.DEBUG&&ch("QueryEngine","Using full collection scan to execute query:",Tp(e)),this.Vr.ws(t,e,Ah.min())},t}();function Tg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ig(e)),e=Sg(t.get(n),e);return Ig(e)}function Sg(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ig(t){return t+"\x01\x01"}function xg(t){var e=t.length;if(ph(e>=2),2===e)return ph("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),jh.X();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&dh(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:dh()}o=s+2}return new jh(r)}var Ag=function(t){this.Sr=t};function kg(t,e){if(e.document)return function(t,e,n){var r=sd(t,e.name),i=nd(e.updateTime),o=new op({mapValue:{fields:e.fields}});return new cp(r,i,o,{hasCommittedMutations:!!n})}(t.Sr,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Dh.ct(e.noDocument.path),r=Rg(e.noDocument.readTime);return new lp(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Dh.ct(e.unknownDocument.path),o=Rg(e.unknownDocument.version);return new hp(i,o)}return dh()}function jg(t,e,n){var r=Pg(n),i=e.key.path.q().H();if(e instanceof cp){var o=function(t,e){return{name:od(t,e.key),fields:e.En().mapValue.fields,updateTime:Zf(t,e.version.M())}}(t.Sr,e);return new uy(null,null,o,e.hasCommittedMutations,r,i)}if(e instanceof lp){var s=e.key.path.H(),a=Dg(e.version),u=e.hasCommittedMutations;return new uy(null,new sy(s,a),null,u,r,i)}if(e instanceof hp){var c=e.key.path.H(),l=Dg(e.version);return new uy(new ay(c,l),null,null,!0,r,i)}return dh()}function Pg(t){var e=t.M();return[e.seconds,e.nanoseconds]}function Ng(t){var e=new xh(t[0],t[1]);return Ah.N(e)}function Dg(t){var e=t.M();return new ey(e.seconds,e.nanoseconds)}function Rg(t){var e=new xh(t.seconds,t.nanoseconds);return Ah.N(e)}function Lg(t,e){var n=(e.baseMutations||[]).map(function(e){return dd(t.Sr,e)}),r=e.mutations.map(function(e){return dd(t.Sr,e)}),i=xh.fromMillis(e.localWriteTimeMs);return new Bp(e.batchId,i,n,r)}function Mg(t){var e,n,r=Rg(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Rg(t.lastLimboFreeSnapshotVersion):Ah.min();return void 0!==t.query.documents?(ph(1===(n=t.query).documents.length),e=wp(pp(ud(n.documents[0])))):e=function(t){return wp(yd(t))}(t.query),new Wh(e,t.targetId,0,t.lastListenSequenceNumber,r,i,zh.fromBase64String(t.resumeToken))}function Fg(t,e){var n,r=Dg(e.ft),i=Dg(e.lastLimboFreeSnapshotVersion);n=Hh(e.target)?pd(t.Sr,e.target):gd(t.Sr,e.target);var o=e.resumeToken.toBase64();return new ly(e.targetId,Uh(e.target),r,o,e.sequenceNumber,i,n)}function Vg(t){var e=yd({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ep(e,e.limit,"L"):e}var Ug=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.os=n,this.Dr=r,this.Cr={}}return t.Nr=function(e,n,r,i){return ph(""!==e.uid),new t(e.u()?e.uid:"",n,r,i)},t.prototype.Fr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zg(t)._i({index:iy.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Or=function(t,e,n,r){var i=this,o=Bg(t),s=zg(t);return s.add({}).next(function(a){ph("number"==typeof a);for(var u=new Bp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return fd(t.Sr,e)}),i=n.mutations.map(function(e){return fd(t.Sr,e)});return new iy(e,n.batchId,n.gn.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new Zh(function(t,e){return Th(t.J(),e.J())}),f=0,d=r;f<d.length;f++){var p=d[f],g=oy.key(i.userId,p.key.path,a);h=h.add(p.key.path.q()),l.push(s.put(c)),l.push(o.put(g,oy.PLACEHOLDER))}return h.forEach(function(e){l.push(i.os.Mr(t,e))}),t.es(function(){i.Cr[a]=u.keys()}),Gp.qn(l).next(function(){return u})})},t.prototype.kr=function(t,e){var n=this;return zg(t).get(e).next(function(t){return t?(ph(t.userId===n.userId),Lg(n.serializer,t)):null})},t.prototype.$r=function(t,e){var n=this;return this.Cr[e]?Gp.resolve(this.Cr[e]):this.kr(t,e).next(function(t){if(t){var r=t.keys();return n.Cr[e]=r,r}return null})},t.prototype.Lr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return zg(t)._i({index:iy.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(ph(e.batchId>=r),o=Lg(n.serializer,e)),i.done()}).next(function(){return o})},t.prototype.Br=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zg(t)._i({index:iy.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.qr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zg(t).ui(iy.userMutationsIndex,n).next(function(t){return t.map(function(t){return Lg(e.serializer,t)})})},t.prototype.us=function(t,e){var n=this,r=oy.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Bg(t)._i({range:i},function(r,i,s){var a=r[0],u=r[2],c=xg(r[1]);if(a===n.userId&&e.path.isEqual(c))return zg(t).get(u).next(function(t){if(!t)throw dh();ph(t.userId===n.userId),o.push(Lg(n.serializer,t))});s.done()}).next(function(){return o})},t.prototype.ds=function(t,e){var n=this,r=new Zh(Th),i=[];return e.forEach(function(e){var o=oy.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Bg(t)._i({range:s},function(t,i,o){var s=t[0],a=t[2],u=xg(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Gp.qn(i).next(function(){return n.Ur(t,r)})},t.prototype.Rs=function(t,e){var n=this,r=e.path,i=r.length+1,o=oy.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Zh(Th);return Bg(t)._i({range:s},function(t,e,o){var s=t[0],u=t[2],c=xg(t[1]);s===n.userId&&r.j(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Ur(t,a)})},t.prototype.Ur=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(zg(t).get(e).next(function(t){if(null===t)throw dh();ph(t.userId===n.userId),r.push(Lg(n.serializer,t))}))}),Gp.qn(i).next(function(){return r})},t.prototype.Qr=function(t,e){var n=this;return Hg(t.Kr,this.userId,e).next(function(r){return t.es(function(){n.Wr(e.batchId)}),Gp.forEach(r,function(e){return n.Dr.jr(t,e)})})},t.prototype.Wr=function(t){delete this.Cr[t]},t.prototype.Gr=function(t){var e=this;return this.Fr(t).next(function(n){if(!n)return Gp.resolve();var r=IDBKeyRange.lowerBound(oy.prefixForUser(e.userId)),i=[];return Bg(t)._i({range:r},function(t,n,r){if(t[0]===e.userId){var o=xg(t[1]);i.push(o)}else r.done()}).next(function(){ph(0===i.length)})})},t.prototype.zr=function(t,e){return qg(t,this.userId,e)},t.prototype.Hr=function(t){var e=this;return Qg(t).get(this.userId).next(function(t){return t||new ry(e.userId,-1,"")})},t}();function qg(t,e,n){var r=oy.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Bg(t)._i({range:o,li:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Hg(t,e,n){var r=t.store(iy.store),i=t.store(oy.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r._i({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){ph(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=oy.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Gp.qn(o).next(function(){return c})}function zg(t){return jy.Ys(t,iy.store)}function Bg(t){return jy.Ys(t,oy.store)}function Qg(t){return jy.Ys(t,ry.store)}var Wg=function(){function t(t,e){this.serializer=t,this.os=e}return t.prototype.jn=function(t,e,n){return Kg(t).put(Yg(e),n)},t.prototype.Hn=function(t,e){var n=Kg(t),r=Yg(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Jr(t,r)})},t.prototype.Jn=function(t,e){var n=this;return Kg(t).get(Yg(e)).next(function(t){return n.Yr(t)})},t.prototype.Xr=function(t,e){var n=this;return Kg(t).get(Yg(e)).next(function(t){var e=n.Yr(t);return e?{zn:e,size:Jg(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=rf();return this.Zr(t,e,function(t,e){var i=n.Yr(e);r=r.Tt(t,i)}).next(function(){return r})},t.prototype.eo=function(t,e){var n=this,r=rf(),i=new Yh(Dh.$);return this.Zr(t,e,function(t,e){var o=n.Yr(e);o?(r=r.Tt(t,o),i=i.Tt(t,Jg(e))):(r=r.Tt(t,null),i=i.Tt(t,0))}).next(function(){return{no:r,so:i}})},t.prototype.Zr=function(t,e,n){if(e.W())return Gp.resolve();var r=IDBKeyRange.bound(e.first().path.H(),e.last().path.H()),i=e.yt(),o=i.Ct();return Kg(t)._i({range:r},function(t,e,r){for(var s=Dh.ct(t);o&&Dh.$(o,s)<0;)n(o,null),o=i.Ct();o&&o.isEqual(s)&&(n(o,e),o=i.Nt()?i.Ct():null),o?r.oi(o.path.H()):r.done()}).next(function(){for(;o;)n(o,null),o=i.Nt()?i.Ct():null})},t.prototype.ws=function(t,e,n){var r=this,i=sf(),o=e.path.length+1,s={};if(n.isEqual(Ah.min())){var a=e.path.H();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.H(),c=Pg(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=uy.collectionReadTimeIndex}return Kg(t)._i(s,function(t,n,s){if(t.length===o){var a=kg(r.serializer,n);e.path.j(a.key.path)?a instanceof cp&&Sp(e,a)&&(i=i.Tt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.io=function(t){return new Gg(this,!!t&&t.ro)},t.prototype.oo=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return $g(t).get(cy.key).next(function(t){return ph(!!t),t})},t.prototype.Jr=function(t,e){return $g(t).put(cy.key,e)},t.prototype.Yr=function(t){if(t){var e=kg(this.serializer,t);return e instanceof lp&&e.version.isEqual(Ah.min())?null:e}return null},t}(),Gg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).co=e,r.ro=n,r.uo=new Wp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Xs.c)(e,t),e.prototype.Zn=function(t){var e=this,n=[],r=0,i=new Zh(function(t,e){return Th(t.J(),e.J())});return this.Qn.forEach(function(o,s){var a=e.uo.get(o);if(s.zn){var u=jg(e.co.serializer,s.zn,e.Wn(o));i=i.add(o.path.q());var c=Jg(u);r+=c-a,n.push(e.co.jn(t,o,u))}else if(r-=a,e.ro){var l=jg(e.co.serializer,new lp(o,Ah.min()),e.Wn(o));n.push(e.co.jn(t,o,l))}else n.push(e.co.Hn(t,o))}),i.forEach(function(r){n.push(e.co.os.Mr(t,r))}),n.push(this.co.updateMetadata(t,r)),Gp.qn(n)},e.prototype.Yn=function(t,e){var n=this;return this.co.Xr(t,e).next(function(t){return null===t?(n.uo.set(e,0),null):(n.uo.set(e,t.size),t.zn)})},e.prototype.Xn=function(t,e){var n=this;return this.co.eo(t,e).next(function(t){var e=t.no;return t.so.forEach(function(t,e){n.uo.set(t,e)}),e})},e}($p);function $g(t){return jy.Ys(t,cy.store)}function Kg(t){return jy.Ys(t,uy.store)}function Yg(t){return t.path.H()}function Jg(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw dh();e=t.noDocument}return JSON.stringify(e).length}var Xg=function(){function t(){this.ao=new Zg}return t.prototype.Mr=function(t,e){return this.ao.add(e),Gp.resolve()},t.prototype.As=function(t,e){return Gp.resolve(this.ao.getEntries(e))},t}(),Zg=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.K(),n=t.q(),r=this.index[e]||new Zh(jh.$),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.K(),n=t.q(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Zh(jh.$)).H()},t}(),ty=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;ph(n<r&&n>=0&&r<=11);var o=new ug("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ny.store)}(t),function(t){t.createObjectStore(ry.store,{keyPath:ry.keyPath}),t.createObjectStore(iy.store,{keyPath:iy.keyPath,autoIncrement:!0}).createIndex(iy.userMutationsIndex,iy.userMutationsKeyPath,{unique:!0}),t.createObjectStore(oy.store)}(t),py(t),function(t){t.createObjectStore(uy.store)}(t));var s=Gp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(hy.store),t.deleteObjectStore(ly.store),t.deleteObjectStore(fy.store)}(t),py(t)),s=s.next(function(){return function(t){var e=t.store(fy.store),n=new fy(0,0,Ah.min().M(),0);return e.put(fy.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(iy.store).ui().next(function(n){t.deleteObjectStore(iy.store),t.createObjectStore(iy.store,{keyPath:iy.keyPath,autoIncrement:!0}).createIndex(iy.userMutationsIndex,iy.userMutationsKeyPath,{unique:!0});var r=e.store(iy.store),i=n.map(function(t){return r.put(t)});return Gp.qn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(gy.store,{keyPath:gy.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.removeAcknowledgedMutations(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(cy.store)}(t),i.addDocumentGlobal(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ensureSequenceNumbers(o)})),n<8&&r>=8&&(s=s.next(function(){return i.createCollectionParentIndex(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(uy.store);e.createIndex(uy.readTimeIndex,uy.readTimeIndexPath,{unique:!1}),e.createIndex(uy.collectionReadTimeIndex,uy.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.rewriteCanonicalIds(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(yy.store,{keyPath:yy.keyPath})}(t),function(t){t.createObjectStore(my.store,{keyPath:my.keyPath})}(t)})),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(uy.store)._i(function(t,n){e+=Jg(n)}).next(function(){var n=new cy(e);return t.store(cy.store).put(cy.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(ry.store),r=t.store(iy.store);return n.ui().next(function(n){return Gp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ui(iy.userMutationsIndex,i).next(function(r){return Gp.forEach(r,function(r){ph(r.userId===n.userId);var i=Lg(e.serializer,r);return Hg(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(hy.store),n=t.store(uy.store);return t.store(fy.store).get(fy.key).next(function(t){var r=[];return n._i(function(n,i){var o=new jh(n),s=function(t){return[0,Tg(t)]}(o);r.push(e.get(s).next(function(n){return n?Gp.resolve():function(n){return e.put(new hy(0,Tg(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Gp.qn(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(dy.store,{keyPath:dy.keyPath});var n=e.store(dy.store),r=new Zg,i=function(t){if(r.add(t)){var e=t.K(),i=t.q();return n.put({collectionId:e,parent:Tg(i)})}};return e.store(uy.store)._i({li:!0},function(t,e){var n=new jh(t);return i(n.q())}).next(function(){return e.store(oy.store)._i({li:!0},function(t,e){var n=xg(t[1]);return i(n.q())})})},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(ly.store);return n._i(function(t,r){var i=Mg(r),o=Fg(e.serializer,i);return n.put(o)})},t}(),ey=function(t,e){this.seconds=t,this.nanoseconds=e},ny=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ny.store="owner",ny.key="owner";var ry=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ry.store="mutationQueues",ry.keyPath="userId";var iy=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};iy.store="mutations",iy.keyPath="batchId",iy.userMutationsIndex="userMutationsIndex",iy.userMutationsKeyPath=["userId","batchId"];var oy=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Tg(e)]},t.key=function(t,e,n){return[t,Tg(e),n]},t}();oy.store="documentMutations",oy.PLACEHOLDER=new oy;var sy=function(t,e){this.path=t,this.readTime=e},ay=function(t,e){this.path=t,this.version=e},uy=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};uy.store="remoteDocuments",uy.readTimeIndex="readTimeIndex",uy.readTimeIndexPath="readTime",uy.collectionReadTimeIndex="collectionReadTimeIndex",uy.collectionReadTimeIndexPath=["parentPath","readTime"];var cy=function(t){this.byteSize=t};cy.store="remoteDocumentGlobal",cy.key="remoteDocumentGlobalKey";var ly=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};ly.store="targets",ly.keyPath="targetId",ly.queryTargetsIndexName="queryTargetsIndex",ly.queryTargetsKeyPath=["canonicalId","targetId"];var hy=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};hy.store="targetDocuments",hy.keyPath=["targetId","path"],hy.documentTargetsIndex="documentTargetsIndex",hy.documentTargetsKeyPath=["path","targetId"];var fy=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};fy.key="targetGlobalKey",fy.store="targetGlobal";var dy=function(t,e){this.collectionId=t,this.parent=e};function py(t){t.createObjectStore(hy.store,{keyPath:hy.keyPath}).createIndex(hy.documentTargetsIndex,hy.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ly.store,{keyPath:ly.keyPath}).createIndex(ly.queryTargetsIndexName,ly.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(fy.store)}dy.store="collectionParents",dy.keyPath=["collectionId","parent"];var gy=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};gy.store="clientMetadata",gy.keyPath="clientId";var yy=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};yy.store="bundles",yy.keyPath="bundleId";var my=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};my.store="namedQueries",my.keyPath="name";var vy=Object(Xs.g)(Object(Xs.g)(Object(Xs.g)(Object(Xs.g)([ry.store,iy.store,oy.store,uy.store,ly.store,ny.store,fy.store,hy.store],[gy.store]),[cy.store]),[dy.store]),[yy.store,my.store]),by=function(){function t(t){this.serializer=t}return t.prototype.ho=function(t,e){return _y(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Rg(e.createTime),version:e.version};var e})},t.prototype.lo=function(t,e){return _y(t).put({bundleId:(n=e).id,createTime:Dg(nd(n.createTime)),version:n.version});var n},t.prototype._o=function(t,e){return wy(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Vg(e.bundledQuery),readTime:Rg(e.readTime)};var e})},t.prototype.fo=function(t,e){return wy(t).put(function(t){return{name:t.name,readTime:Dg(nd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function _y(t){return jy.Ys(t,yy.store)}function wy(t){return jy.Ys(t,my.store)}var Ey=function(){function t(){this.wo=new Zg}return t.prototype.Mr=function(t,e){var n=this;if(!this.wo.has(e)){var r=e.K(),i=e.q();t.es(function(){n.wo.add(e)});var o={collectionId:r,parent:Tg(i)};return Cy(t).put(o)}return Gp.resolve()},t.prototype.As=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ih(e),""],!1,!0);return Cy(t).ui(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(xg(o.parent))}return n})},t}();function Cy(t){return jy.Ys(t,dy.store)}var Oy=function(){function t(t){this.Eo=t}return t.prototype.next=function(){return this.Eo+=2,this.Eo},t.To=function(){return new t(0)},t.Io=function(){return new t(-1)},t}(),Ty=function(){function t(t,e){this.Dr=t,this.serializer=e}return t.prototype.mo=function(t){var e=this;return this.Ao(t).next(function(n){var r=new Oy(n.highestTargetId);return n.highestTargetId=r.next(),e.Ro(t,n).next(function(){return n.highestTargetId})})},t.prototype.Po=function(t){return this.Ao(t).next(function(t){return Ah.N(new xh(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.yo=function(t){return this.Ao(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Vo=function(t,e,n){var r=this;return this.Ao(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.M()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ro(t,i)})},t.prototype.po=function(t,e){var n=this;return this.vo(t,e).next(function(){return n.Ao(t).next(function(r){return r.targetCount+=1,n.bo(e,r),n.Ro(t,r)})})},t.prototype.So=function(t,e){return this.vo(t,e)},t.prototype.Do=function(t,e){var n=this;return this.Co(t,e.targetId).next(function(){return Sy(t).delete(e.targetId)}).next(function(){return n.Ao(t)}).next(function(e){return ph(e.targetCount>0),e.targetCount-=1,n.Ro(t,e)})},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return Sy(t)._i(function(s,a){var u=Mg(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Do(t,u)))}).next(function(){return Gp.qn(o)}).next(function(){return i})},t.prototype.Ue=function(t,e){return Sy(t)._i(function(t,n){var r=Mg(n);e(r)})},t.prototype.Ao=function(t){return Iy(t).get(fy.key).next(function(t){return ph(null!==t),t})},t.prototype.Ro=function(t,e){return Iy(t).put(fy.key,e)},t.prototype.vo=function(t,e){return Sy(t).put(Fg(this.serializer,e))},t.prototype.bo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.No=function(t){return this.Ao(t).next(function(t){return t.targetCount})},t.prototype.xo=function(t,e){var n=Uh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Sy(t)._i({range:r,index:ly.queryTargetsIndexName},function(t,n,r){var o=Mg(n);qh(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.Fo=function(t,e,n){var r=this,i=[],o=xy(t);return e.forEach(function(e){var s=Tg(e.path);i.push(o.put(new hy(n,s))),i.push(r.Dr.Oo(t,n,e))}),Gp.qn(i)},t.prototype.Mo=function(t,e,n){var r=this,i=xy(t);return Gp.forEach(e,function(e){var o=Tg(e.path);return Gp.qn([i.delete([n,o]),r.Dr.ko(t,n,e)])})},t.prototype.Co=function(t,e){var n=xy(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.$o=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=xy(t),i=cf();return r._i({range:n,li:!0},function(t,e,n){var r=xg(t[1]),o=new Dh(r);i=i.add(o)}).next(function(){return i})},t.prototype.zr=function(t,e){var n=Tg(e.path),r=IDBKeyRange.bound([n],[Ih(n)],!1,!0),i=0;return xy(t)._i({index:hy.documentTargetsIndex,li:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Ze=function(t,e){return Sy(t).get(e).next(function(t){return t?Mg(t):null})},t}();function Sy(t){return jy.Ys(t,ly.store)}function Iy(t){return jy.Ys(t,fy.store)}function xy(t){return jy.Ys(t,hy.store)}var Ay="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ky=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kr=e,r.Lo=n,r}return Object(Xs.c)(e,t),e}(Zp),jy=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Cs=o,this.window=s,this.document=a,this.Bo=c,this.qo=l,this.Uo=null,this.Qo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ko=null,this.inForeground=!1,this.Wo=null,this.jo=null,this.Go=Number.NEGATIVE_INFINITY,this.zo=function(t){return Promise.resolve()},!t.Gs())throw new mh(yh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Dr=new Dy(this,i),this.Ho=n+"main",this.serializer=new Ag(u),this.Jo=new ig(this.Ho,11,new ty(this.serializer)),this.Yo=new Ty(this.Dr,this.serializer),this.os=new Ey,this.ss=function(t,e){return new Wg(t,e)}(this.serializer,this.os),this.Xo=new by(this.serializer),this.window&&this.window.localStorage?this.Zo=this.window.localStorage:(this.Zo=null,!1===l&&lh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Ys=function(t,e){if(t instanceof ky)return ig.Ys(t.Kr,e);throw dh()},t.prototype.start=function(){var t=this;return this.tc().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new mh(yh.FAILED_PRECONDITION,Ay);return t.ec(),t.nc(),t.sc(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Yo.yo(e)})}).then(function(e){t.Uo=new ng(e,t.Bo)}).then(function(){t.Qo=!0}).catch(function(e){return t.Jo&&t.Jo.close(),Promise.reject(e)})},t.prototype.ic=function(t){var e=this;return this.zo=function(n){return Object(Xs.b)(e,void 0,void 0,function(){return Object(Xs.d)(this,function(e){return this.lr?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.rc=function(t){var e=this;this.Jo.ti(function(n){return Object(Xs.b)(e,void 0,void 0,function(){return Object(Xs.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.oc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Cs.Ri(function(){return Object(Xs.b)(e,void 0,void 0,function(){return Object(Xs.d)(this,function(t){switch(t.label){case 0:return this.lr?[4,this.tc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.tc=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Ny(e).put(new gy(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.cc(e).next(function(e){e||(t.isPrimary=!1,t.Cs.Mi(function(){return t.zo(!1)}))})}).next(function(){return t.uc(e)}).next(function(n){return t.isPrimary&&!n?t.ac(e).next(function(){return!1}):!!n&&t.hc(e).next(function(){return!0})})}).catch(function(e){if(ag(e))return ch("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ch("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Cs.Mi(function(){return t.zo(e)}),t.isPrimary=e})},t.prototype.cc=function(t){var e=this;return Py(t).get(ny.key).next(function(t){return Gp.resolve(e.lc(t))})},t.prototype._c=function(t){return Ny(t).delete(this.clientId)},t.prototype.fc=function(){return Object(Xs.b)(this,void 0,void 0,function(){var e,n,r,i=this;return Object(Xs.d)(this,function(o){switch(o.label){case 0:return!this.isPrimary||this.dc(this.Go,18e5)?[3,2]:(this.Go=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var n=t.Ys(e,gy.store);return n.ui().next(function(t){var e=i.wc(t,18e5),r=t.filter(function(t){return-1===e.indexOf(t)});return Gp.forEach(r,function(t){return n.delete(t.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(e=o.sent(),this.Zo)for(n=0,r=e;n<r.length;n++)this.Zo.removeItem(this.Ec(r[n].clientId));o.label=2;case 2:return[2]}})})},t.prototype.sc=function(){var t=this;this.jo=this.Cs.Us("client_metadata_refresh",4e3,function(){return t.tc().then(function(){return t.fc()}).then(function(){return t.sc()})})},t.prototype.lc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.uc=function(t){var e=this;return this.qo?Gp.resolve(!0):Py(t).get(ny.key).next(function(n){if(null!==n&&e.dc(n.leaseTimestampMs,5e3)&&!e.Tc(n.ownerId)){if(e.lc(n)&&e.networkEnabled)return!0;if(!e.lc(n)){if(!n.allowTabSynchronization)throw new mh(yh.FAILED_PRECONDITION,Ay);return!1}}return!(!e.networkEnabled||!e.inForeground)||Ny(t).ui().next(function(t){return void 0===e.wc(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&ch("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.Ic=function(){return Object(Xs.b)(this,void 0,void 0,function(){var t=this;return Object(Xs.d)(this,function(e){switch(e.label){case 0:return this.Qo=!1,this.mc(),this.jo&&(this.jo.cancel(),this.jo=null),this.Ac(),this.Rc(),[4,this.Jo.runTransaction("shutdown","readwrite",[ny.store,gy.store],function(e){var n=new ky(e,ng.Ds);return t.ac(n).next(function(){return t._c(n)})})];case 1:return e.sent(),this.Jo.close(),this.Pc(),[2]}})})},t.prototype.wc=function(t,e){var n=this;return t.filter(function(t){return n.dc(t.updateTimeMs,e)&&!n.Tc(t.clientId)})},t.prototype.gc=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Ny(e).ui().next(function(e){return t.wc(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"lr",{get:function(){return this.Qo},enumerable:!1,configurable:!0}),t.prototype.yc=function(t){return Ug.Nr(t,this.serializer,this.os,this.Dr)},t.prototype.Vc=function(){return this.Yo},t.prototype.vc=function(){return this.ss},t.prototype.bc=function(){return this.os},t.prototype.Sc=function(){return this.Xo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return ch("IndexedDbPersistence","Starting transaction:",t),this.Jo.runTransaction(t,"readonly"===e?"readonly":"readwrite",vy,function(o){return r=new ky(o,i.Uo?i.Uo.next():ng.Ds),"readwrite-primary"===e?i.cc(r).next(function(t){return!!t||i.uc(r)}).next(function(e){if(!e)throw lh("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Cs.Mi(function(){return i.zo(!1)}),new mh(yh.FAILED_PRECONDITION,Xp);return n(r)}).next(function(t){return i.hc(r).next(function(){return t})}):i.Dc(r).next(function(){return n(r)})}).then(function(t){return r.ns(),t})},t.prototype.Dc=function(t){var e=this;return Py(t).get(ny.key).next(function(t){if(null!==t&&e.dc(t.leaseTimestampMs,5e3)&&!e.Tc(t.ownerId)&&!e.lc(t)&&!(e.qo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new mh(yh.FAILED_PRECONDITION,Ay)})},t.prototype.hc=function(t){var e=new ny(this.clientId,this.allowTabSynchronization,Date.now());return Py(t).put(ny.key,e)},t.Gs=function(){return ig.Gs()},t.prototype.ac=function(t){var e=this,n=Py(t);return n.get(ny.key).next(function(t){return e.lc(t)?(ch("IndexedDbPersistence","Releasing primary lease."),n.delete(ny.key)):Gp.resolve()})},t.prototype.dc=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(lh("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.ec=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Wo=function(){t.Cs.Ri(function(){return t.inForeground="visible"===t.document.visibilityState,t.tc()})},this.document.addEventListener("visibilitychange",this.Wo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Ac=function(){this.Wo&&(this.document.removeEventListener("visibilitychange",this.Wo),this.Wo=null)},t.prototype.nc=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Ko=function(){e.mc(),e.Cs.Ri(function(){return e.Ic()})},this.window.addEventListener("unload",this.Ko))},t.prototype.Rc=function(){this.Ko&&(this.window.removeEventListener("unload",this.Ko),this.Ko=null)},t.prototype.Tc=function(t){var e;try{var n=null!==(null===(e=this.Zo)||void 0===e?void 0:e.getItem(this.Ec(t)));return ch("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return lh("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.mc=function(){if(this.Zo)try{this.Zo.setItem(this.Ec(this.clientId),String(Date.now()))}catch(t){lh("Failed to set zombie client id.",t)}},t.prototype.Pc=function(){if(this.Zo)try{this.Zo.removeItem(this.Ec(this.clientId))}catch(t){}},t.prototype.Ec=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Py(t){return jy.Ys(t,ny.store)}function Ny(t){return jy.Ys(t,gy.store)}var Dy=function(){function t(t,e){this.db=t,this.cr=new Cg(this,e)}return t.prototype.Er=function(t){var e=this.Cc(t);return this.db.Vc().No(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.Cc=function(t){var e=0;return this.Ir(t,function(t){e++}).next(function(){return e})},t.prototype.Ue=function(t,e){return this.db.Vc().Ue(t,e)},t.prototype.Ir=function(t,e){return this.Nc(t,function(t,n){return e(n)})},t.prototype.Oo=function(t,e,n){return Ry(t,n)},t.prototype.ko=function(t,e,n){return Ry(t,n)},t.prototype.mr=function(t,e,n){return this.db.Vc().mr(t,e,n)},t.prototype.jr=function(t,e){return Ry(t,e)},t.prototype.xc=function(t,e){return function(t,e){var n=!1;return Qg(t).fi(function(r){return qg(t,r,e).next(function(t){return t&&(n=!0),Gp.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.Ar=function(t,e){var n=this,r=this.db.vc().io(),i=[],o=0;return this.Nc(t,function(s,a){if(a<=e){var u=n.xc(t,s).next(function(e){if(!e)return o++,r.Jn(t,s).next(function(){return r.Hn(s),xy(t).delete([0,Tg(s.path)])})});i.push(u)}}).next(function(){return Gp.qn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.dt(t.Lo);return this.db.Vc().So(t,n)},t.prototype.Fc=function(t,e){return Ry(t,e)},t.prototype.Nc=function(t,e){var n,r=xy(t),i=ng.Ds;return r._i({index:hy.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==ng.Ds&&e(new Dh(xg(n)),i),i=s,n=o):i=ng.Ds}).next(function(){i!==ng.Ds&&e(new Dh(xg(n)),i)})},t.prototype.Pr=function(t){return this.db.vc().oo(t)},t}();function Ry(t,e){return xy(t).put(function(t,e){return new hy(0,Tg(t.path),e)}(e,t.Lo))}function Ly(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var My=function(){function t(t,e,n,r){this.persistence=t,this.Oc=e,this.serializer=r,this.Mc=new Yh(Th),this.kc=new Wp(function(t){return Uh(t)},qh),this.$c=Ah.min(),this.rs=t.yc(n),this.Lc=t.vc(),this.Yo=t.Vc(),this.Bc=new tg(this.Lc,this.rs,this.persistence.bc()),this.Xo=t.Sc(),this.Oc.yr(this.Bc)}return t.prototype._r=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Rr(n,e.Mc)})},t}();function Fy(t,e,n,r){return new My(t,e,n,r)}function Vy(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Xs.d)(this,function(s){switch(s.label){case 0:return n=gh(t),r=n.rs,i=n.Bc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.rs.qr(t).next(function(s){return o=s,r=n.persistence.yc(e),i=new tg(n.Lc,r,n.persistence.bc()),r.qr(t)}).next(function(e){for(var n=[],r=[],s=cf(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i._s(t,s).next(function(t){return{qc:t,Uc:n,Qc:r}})})})];case 1:return o=s.sent(),[2,(n.rs=r,n.Bc=i,n.Oc.yr(n.Bc),o)]}})})}function Uy(t,e){var n=gh(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Lc.io({ro:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Gp.resolve();return o.forEach(function(t){s=s.next(function(){return r.Jn(e,t)}).next(function(e){var o=e,s=n.Sn.get(t);ph(null!==s),(!o||o.version.F(s)<0)&&(o=i.yn(t,o,n))&&r.jn(o,n.bn)})}),s.next(function(){return t.rs.Qr(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.rs.Gr(t)}).next(function(){return n.Bc._s(t,r)})})}function qy(t){var e=gh(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Yo.Po(t)})}function Hy(t,e){var n=gh(t),r=e.ft,i=n.Mc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Lc.io({ro:!0});i=n.Mc;var s=[];e.re.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Yo.Mo(t,e.de,o).next(function(){return n.Yo.Fo(t,e._e,o)}));var u=e.resumeToken;if(u.ht()>0){var c=a.wt(u,r).dt(t.Lo);i=i.Tt(o,c),function(t,e,n){return ph(e.resumeToken.ht()>0),0===t.resumeToken.ht()||e.ft.O()-t.ft.O()>=3e8||n._e.size+n.fe.size+n.de.size>0}(a,c,e)&&s.push(n.Yo.So(t,c))}}});var a=nf();if(e.ce.forEach(function(r,i){e.ue.has(r)&&s.push(n.persistence.Dr.Fc(t,r))}),s.push(function(t,e,n,r,i){var o=cf();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var i=nf();return n.forEach(function(n,o){var s=t.get(n),a=r;o instanceof lp&&o.version.isEqual(Ah.min())?(e.Hn(n,a),i=i.Tt(n,o)):null==s||o.version.F(s.version)>0||0===o.version.F(s.version)&&s.hasPendingWrites?(e.jn(o,a),i=i.Tt(n,o)):ch("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),i})}(t,o,e.ce,r).next(function(t){a=t})),!r.isEqual(Ah.min())){var u=n.Yo.Po(t).next(function(e){return n.Yo.Vo(t,t.Lo,r)});s.push(u)}return Gp.qn(s).next(function(){return o.apply(t)}).next(function(){return n.Bc.fs(t,a)})}).then(function(t){return n.Mc=i,t})}function zy(t,e){var n=gh(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.rs.Lr(t,e)})}function By(t,e){var n=gh(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Yo.xo(t,e).next(function(i){return i?Gp.resolve(r=i):n.Yo.mo(t).next(function(i){return r=new Wh(e,i,0,t.Lo),n.Yo.po(t,r).next(function(){return r})})})}).then(function(t){var r=n.Mc.get(t.targetId);return(null===r||t.ft.F(r.ft)>0)&&(n.Mc=n.Mc.Tt(t.targetId,t),n.kc.set(e,t.targetId)),t})}function Qy(t,e,n){return Object(Xs.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Xs.d)(this,function(a){switch(a.label){case 0:r=gh(t),i=r.Mc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Dr.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ag(s=a.sent()))throw s;return ch("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Mc=r.Mc.remove(e),r.kc.delete(i.target),[2]}})})}function Wy(t,e,n){var r=gh(t),i=Ah.min(),o=cf();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=gh(t),i=r.kc.get(n);return void 0!==i?Gp.resolve(r.Mc.get(i)):r.Yo.xo(e,n)}(r,t,wp(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Yo.$o(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Oc.ws(t,e,n?i:Ah.min(),n?o:cf())}).next(function(t){return{documents:t,Kc:o}})})}function Gy(t,e){var n=gh(t),r=gh(n.Yo),i=n.Mc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Ze(t,e).next(function(t){return t?t.target:null})})}function $y(t){var e=gh(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=gh(t),i=nf(),o=Pg(n),s=Kg(e),a=IDBKeyRange.lowerBound(o,!0);return s._i({index:uy.readTimeIndex,range:a},function(t,e){var n=kg(r.serializer,e);i=i.Tt(n.key,n),o=e.readTime}).next(function(){return{Wc:i,readTime:Ng(o)}})}(e.Lc,t,e.$c)}).then(function(t){var n=t.Wc;return e.$c=t.readTime,n})}function Ky(t){return Object(Xs.b)(this,void 0,void 0,function(){var e;return Object(Xs.d)(this,function(n){return[2,(e=gh(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Kg(t),n=Ah.min();return e._i({index:uy.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Ng(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$c=t})]})})}function Yy(t){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(e){if(t.code!==yh.FAILED_PRECONDITION||t.message!==Xp)throw t;return ch("LocalStore","Unexpectedly lost primary lease"),[2]})})}var Jy=function(){function t(t,e,n,r,i,o){this.Cs=t,this.jc=n,this.Gc=r,this.zc=i,this.listener=o,this.state=0,this.Hc=0,this.Jc=null,this.stream=null,this.Si=new rg(t,e)}return t.prototype.Yc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Xc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Zc()},t.prototype.stop=function(){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(t){switch(t.label){case 0:return this.Yc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.tu=function(){this.state=0,this.Si.reset()},t.prototype.eu=function(){var t=this;this.Xc()&&null===this.Jc&&(this.Jc=this.Cs.Us(this.jc,6e4,function(){return t.nu()}))},t.prototype.su=function(t){this.iu(),this.stream.send(t)},t.prototype.nu=function(){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(t){return this.Xc()?[2,this.close(0)]:[2]})})},t.prototype.iu=function(){this.Jc&&(this.Jc.cancel(),this.Jc=null)},t.prototype.close=function(t,e){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(n){switch(n.label){case 0:return this.iu(),this.Si.cancel(),this.Hc++,3!==t?this.Si.reset():e&&e.code===yh.RESOURCE_EXHAUSTED?(lh(e.toString()),lh("Using maximum backoff delay to prevent overloading the backend."),this.Si.Ls()):e&&e.code===yh.UNAUTHENTICATED&&this.zc.m(),null!==this.stream&&(this.ru(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.ou(e)];case 1:return n.sent(),[2]}})})},t.prototype.ru=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.cu(this.Hc),n=this.Hc;this.zc.getToken().then(function(e){t.Hc===n&&t.uu(e)},function(n){e(function(){var e=new mh(yh.UNKNOWN,"Fetching auth token failed: "+n.message);return t.au(e)})})},t.prototype.uu=function(t){var e=this,n=this.cu(this.Hc);this.stream=this.hu(t),this.stream.lu(function(){n(function(){return e.state=2,e.listener.lu()})}),this.stream.ou(function(t){n(function(){return e.au(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Zc=function(){var t=this;this.state=4,this.Si.Bs(function(){return Object(Xs.b)(t,void 0,void 0,function(){return Object(Xs.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.au=function(t){return ch("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.cu=function(t){var e=this;return function(n){e.Cs.Ri(function(){return e.Hc===t?n():(ch("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Xy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(Xs.c)(e,t),e.prototype.hu=function(t){return this.Gc._u("Listen",t)},e.prototype.onMessage=function(t){this.Si.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:dh()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.tn?(ph(void 0===e||"string"==typeof e),zh.fromBase64String(e||"")):(ph(void 0===e||e instanceof Uint8Array),zh.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?yh.UNKNOWN:Kh(t.code);return new mh(e,t.message||"")}(s);n=new bf(r,i,o,a||null)}else if("documentChange"in e){var u=e.documentChange,c=sd(t,u.document.name),l=nd(u.document.updateTime),h=new op({mapValue:{fields:u.document.fields}}),f=new cp(c,l,h,{});n=new mf(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){var d=e.documentDelete,p=sd(t,d.document),g=d.readTime?nd(d.readTime):Ah.min(),y=new lp(p,g);n=new mf([],d.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){var m=e.documentRemove,v=sd(t,m.document);n=new mf([],m.removedTargetIds||[],v,null)}else{if(!("filter"in e))return dh();var b=e.filter,_=new Gh(b.count||0);n=new vf(b.targetId,_)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Ah.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ah.min():e.readTime?nd(e.readTime):Ah.min()}(t);return this.listener.fu(e,n)},e.prototype.du=function(t){var e={};e.database=cd(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Hh(r)?{documents:pd(t,r)}:{query:gd(t,r)}).targetId=e.targetId,e.resumeToken.ht()>0?n.resumeToken=td(t,e.resumeToken):e.ft.F(Ah.min())>0&&(n.readTime=Zf(t,e.ft.M())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dh()}}(0,e._t);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.su(e)},e.prototype.wu=function(t){var e={};e.database=cd(this.serializer),e.removeTarget=t,this.su(e)},e}(Jy),Zy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Eu=!1,s}return Object(Xs.c)(e,t),Object.defineProperty(e.prototype,"Tu",{get:function(){return this.Eu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Eu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ru=function(){this.Eu&&this.Iu([])},e.prototype.hu=function(t){return this.Gc._u("Write",t)},e.prototype.onMessage=function(t){if(ph(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Eu){this.Si.reset();var e=function(t,e){return t&&t.length>0?(ph(void 0!==e),t.map(function(t){return function(t,e){var n=nd(t.updateTime?t.updateTime:e);n.isEqual(Ah.min())&&(n=nd(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Hd(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=nd(t.commitTime);return this.listener.mu(n,e)}return ph(!t.writeResults||0===t.writeResults.length),this.Eu=!0,this.listener.Au()},e.prototype.Ru=function(){var t={};t.database=cd(this.serializer),this.su(t)},e.prototype.Iu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return fd(e.serializer,t)})};this.su(n)},e}(Jy),tm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Gc=n,i.serializer=r,i.Pu=!1,i}return Object(Xs.c)(e,t),e.prototype.gu=function(){if(this.Pu)throw new mh(yh.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.yu=function(t,e,n){var r=this;return this.gu(),this.credentials.getToken().then(function(i){return r.Gc.yu(t,e,n,i)}).catch(function(t){throw t.code===yh.UNAUTHENTICATED&&r.credentials.m(),t})},e.prototype.Vu=function(t,e,n){var r=this;return this.gu(),this.credentials.getToken().then(function(i){return r.Gc.Vu(t,e,n,i)}).catch(function(t){throw t.code===yh.UNAUTHENTICATED&&r.credentials.m(),t})},e.prototype.terminate=function(){this.Pu=!1},e}(function(){}),em=function(){function t(t,e){this.di=t,this.pu=e,this.state="Unknown",this.vu=0,this.bu=null,this.Su=!0}return t.prototype.Du=function(){var t=this;0===this.vu&&(this.Cu("Unknown"),this.bu=this.di.Us("online_state_timeout",1e4,function(){return t.bu=null,t.Nu("Backend didn't respond within 10 seconds."),t.Cu("Offline"),Promise.resolve()}))},t.prototype.xu=function(t){"Online"===this.state?this.Cu("Unknown"):(this.vu++,this.vu>=1&&(this.Fu(),this.Nu("Connection failed 1 times. Most recent error: "+t.toString()),this.Cu("Offline")))},t.prototype.set=function(t){this.Fu(),this.vu=0,"Online"===t&&(this.Su=!1),this.Cu(t)},t.prototype.Cu=function(t){t!==this.state&&(this.state=t,this.pu(t))},t.prototype.Nu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Su?(lh(e),this.Su=!1):ch("OnlineStateTracker",e)},t.prototype.Fu=function(){null!==this.bu&&(this.bu.cancel(),this.bu=null)},t}(),nm=function(t,e,n,r,i){var o=this;this.Ou=t,this.Mu=e,this.di=n,this.ku={},this.$u=[],this.Lu=new Map,this.Bu=new Set,this.qu=[],this.Uu=i,this.Uu.Qu(function(t){n.Ri(function(){return Object(Xs.b)(o,void 0,void 0,function(){return Object(Xs.d)(this,function(t){switch(t.label){case 0:return hm(this)?(ch("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Xs.b)(this,void 0,void 0,function(){var e;return Object(Xs.d)(this,function(n){switch(n.label){case 0:return(e=gh(t)).Bu.add(4),[4,im(e)];case 1:return n.sent(),e.Ku.set("Unknown"),e.Bu.delete(4),[4,rm(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Ku=new em(n,r)};function rm(t){return Object(Xs.b)(this,void 0,void 0,function(){var e,n;return Object(Xs.d)(this,function(r){switch(r.label){case 0:if(!hm(t))return[3,4];e=0,n=t.qu,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function im(t){return Object(Xs.b)(this,void 0,void 0,function(){var e,n;return Object(Xs.d)(this,function(r){switch(r.label){case 0:e=0,n=t.qu,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function om(t,e){var n=gh(t);n.Lu.has(e.targetId)||(n.Lu.set(e.targetId,e),lm(n)?cm(n):Sm(n).Xc()&&am(n,e))}function sm(t,e){var n=gh(t),r=Sm(n);n.Lu.delete(e),r.Xc()&&um(n,e),0===n.Lu.size&&(r.Xc()?r.eu():hm(n)&&n.Ku.set("Unknown"))}function am(t,e){t.Wu.De(e.targetId),Sm(t).du(e)}function um(t,e){t.Wu.De(e),Sm(t).wu(e)}function cm(t){t.Wu=new wf({Xe:function(e){return t.ku.Xe(e)},Ze:function(e){return t.Lu.get(e)||null}}),Sm(t).start(),t.Ku.Du()}function lm(t){return hm(t)&&!Sm(t).Yc()&&t.Lu.size>0}function hm(t){return 0===gh(t).Bu.size}function fm(t){t.Wu=void 0}function dm(t){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(e){return t.Lu.forEach(function(e,n){am(t,e)}),[2]})})}function pm(t,e){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(n){return fm(t),lm(t)?(t.Ku.xu(e),cm(t)):t.Ku.set("Unknown"),[2]})})}function gm(t,e,n){return Object(Xs.b)(this,void 0,void 0,function(){var r,i,o;return Object(Xs.d)(this,function(s){switch(s.label){case 0:if(t.Ku.set("Online"),!(e instanceof bf&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Xs.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Lu.has(o=i[r])?[4,t.ku.ju(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Lu.delete(o),t.Wu.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),ch("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ym(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof mf?t.Wu.$e(e):e instanceof vf?t.Wu.je(e):t.Wu.qe(e),n.isEqual(Ah.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,qy(t.Ou)];case 8:return i=s.sent(),n.F(i)>=0?[4,function(t,e){var n=t.Wu.He(e);return n.re.forEach(function(n,r){if(n.resumeToken.ht()>0){var i=t.Lu.get(r);i&&t.Lu.set(r,i.wt(n.resumeToken,e))}}),n.oe.forEach(function(e){var n=t.Lu.get(e);if(n){t.Lu.set(e,n.wt(zh.lt,n.ft)),um(t,e);var r=new Wh(n.target,e,1,n.sequenceNumber);am(t,r)}}),t.ku.Gu(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return ch("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,ym(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function ym(t,e,n){return Object(Xs.b)(this,void 0,void 0,function(){var r=this;return Object(Xs.d)(this,function(i){switch(i.label){case 0:if(!ag(e))throw e;return t.Bu.add(1),[4,im(t)];case 1:return i.sent(),t.Ku.set("Offline"),n||(n=function(){return qy(t.Ou)}),t.di.Mi(function(){return Object(Xs.b)(r,void 0,void 0,function(){return Object(Xs.d)(this,function(e){switch(e.label){case 0:return ch("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Bu.delete(1),[4,rm(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function mm(t,e){return e().catch(function(n){return ym(t,n,e)})}function vm(t){return Object(Xs.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Xs.d)(this,function(s){switch(s.label){case 0:e=gh(t),n=Im(e),r=e.$u.length>0?e.$u[e.$u.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return hm(t)&&t.$u.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,zy(e.Ou,r)];case 3:return null===(i=s.sent())?(0===e.$u.length&&n.eu(),[3,7]):(r=i.batchId,function(t,e){t.$u.push(e);var n=Im(t);n.Xc()&&n.Tu&&n.Iu(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,ym(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return bm(e)&&_m(e),[2]}})})}function bm(t){return hm(t)&&!Im(t).Yc()&&t.$u.length>0}function _m(t){Im(t).start()}function wm(t){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(e){return Im(t).Ru(),[2]})})}function Em(t){return Object(Xs.b)(this,void 0,void 0,function(){var e,n,r;return Object(Xs.d)(this,function(i){for(e=Im(t),n=0,r=t.$u;n<r.length;n++)e.Iu(r[n].mutations);return[2]})})}function Cm(t,e,n){return Object(Xs.b)(this,void 0,void 0,function(){var r,i;return Object(Xs.d)(this,function(o){switch(o.label){case 0:return r=t.$u.shift(),i=Qp.from(r,e,n),[4,mm(t,function(){return t.ku.zu(i)})];case 1:return o.sent(),[4,vm(t)];case 2:return o.sent(),[2]}})})}function Om(t,e){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(n){switch(n.label){case 0:return e&&Im(t).Tu?[4,function(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r;return Object(Xs.d)(this,function(i){switch(i.label){case 0:return $h(r=e.code)&&r!==yh.ABORTED?(n=t.$u.shift(),Im(t).tu(),[4,mm(t,function(){return t.ku.Hu(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,vm(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return bm(t)&&_m(t),[2]}})})}function Tm(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n;return Object(Xs.d)(this,function(r){switch(r.label){case 0:return n=gh(t),e?(n.Bu.delete(2),[4,rm(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Bu.add(2),[4,im(n)]);case 3:r.sent(),n.Ku.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Sm(t){var e=this;return t.Ju||(t.Ju=function(t,e,n){var r=gh(t);return r.gu(),new Xy(e,r.Gc,r.credentials,r.serializer,n)}(t.Mu,t.di,{lu:dm.bind(null,t),ou:pm.bind(null,t),fu:gm.bind(null,t)}),t.qu.push(function(n){return Object(Xs.b)(e,void 0,void 0,function(){return Object(Xs.d)(this,function(e){switch(e.label){case 0:return n?(t.Ju.tu(),lm(t)?cm(t):t.Ku.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ju.stop()];case 2:e.sent(),fm(t),e.label=3;case 3:return[2]}})})})),t.Ju}function Im(t){var e=this;return t.Yu||(t.Yu=function(t,e,n){var r=gh(t);return r.gu(),new Zy(e,r.Gc,r.credentials,r.serializer,n)}(t.Mu,t.di,{lu:wm.bind(null,t),ou:Om.bind(null,t),Au:Em.bind(null,t),mu:Cm.bind(null,t)}),t.qu.push(function(n){return Object(Xs.b)(e,void 0,void 0,function(){return Object(Xs.d)(this,function(e){switch(e.label){case 0:return n?(t.Yu.tu(),[4,vm(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Yu.stop()];case 3:e.sent(),t.$u.length>0&&(ch("RemoteStore","Stopping write stream with "+t.$u.length+" pending writes"),t.$u=[]),e.label=4;case 4:return[2]}})})})),t.Yu}var xm=function(){this.Xu=void 0,this.listeners=[]},Am=function(){this.queries=new Wp(function(t){return Op(t)},Cp),this.onlineState="Unknown",this.Zu=new Set};function km(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Xs.d)(this,function(c){switch(c.label){case 0:if(n=gh(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new xm),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.ta(r)];case 2:return s.Xu=c.sent(),[3,4];case 3:return a=c.sent(),u=mg(a,"Initialization of query '"+Tp(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.ea(n.onlineState),o.Xu&&e.na(o.Xu)&&Dm(n),[2]}})})}function jm(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Xs.d)(this,function(a){return n=gh(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.sa(r))]:[2]})})}function Pm(t,e){for(var n=gh(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].na(s)&&(r=!0);a.Xu=s}}r&&Dm(n)}function Nm(t,e,n){var r=gh(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Dm(t){t.Zu.forEach(function(t){t.next()})}var Rm=function(){function t(t,e,n){this.query=t,this.ia=e,this.ra=!1,this.oa=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.na=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new pf(t.query,t.docs,t.te,e,t.ee,t.fromCache,t.ne,!0)}var o=!1;return this.ra?this.ca(t)&&(this.ia.next(t),o=!0):this.ua(t,this.onlineState)&&(this.aa(t),o=!0),this.oa=t,o},t.prototype.onError=function(t){this.ia.error(t)},t.prototype.ea=function(t){this.onlineState=t;var e=!1;return this.oa&&!this.ra&&this.ua(this.oa,t)&&(this.aa(this.oa),e=!0),e},t.prototype.ua=function(t,e){return!t.fromCache||!(this.options.ha&&"Offline"!==e||t.docs.W()&&"Offline"!==e)},t.prototype.ca=function(t){return t.docChanges.length>0||!!(t.ne||this.oa&&this.oa.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.aa=function(t){t=pf.ie(t.query,t.docs,t.ee,t.fromCache),this.ra=!0,this.ia.next(t)},t}(),Lm=function(){function t(){this.la=new Zh(Mm._a),this.fa=new Zh(Mm.da)}return t.prototype.W=function(){return this.la.W()},t.prototype.Oo=function(t,e){var n=new Mm(t,e);this.la=this.la.add(n),this.fa=this.fa.add(n)},t.prototype.wa=function(t,e){var n=this;t.forEach(function(t){return n.Oo(t,e)})},t.prototype.ko=function(t,e){this.Ea(new Mm(t,e))},t.prototype.Ta=function(t,e){var n=this;t.forEach(function(t){return n.ko(t,e)})},t.prototype.Ia=function(t){var e=this,n=new Dh(new jh([])),r=new Mm(n,t),i=new Mm(n,t+1),o=[];return this.fa.Kt([r,i],function(t){e.Ea(t),o.push(t.key)}),o},t.prototype.ma=function(){var t=this;this.la.forEach(function(e){return t.Ea(e)})},t.prototype.Ea=function(t){this.la=this.la.delete(t),this.fa=this.fa.delete(t)},t.prototype.Aa=function(t){var e=new Dh(new jh([])),n=new Mm(e,t),r=new Mm(e,t+1),i=cf();return this.fa.Kt([n,r],function(t){i=i.add(t.key)}),i},t.prototype.zr=function(t){var e=new Mm(t,0),n=this.la.jt(e);return null!==n&&t.isEqual(n.key)},t}(),Mm=function(){function t(t,e){this.key=t,this.Ra=e}return t._a=function(t,e){return Dh.$(t.key,e.key)||Th(t.Ra,e.Ra)},t.da=function(t,e){return Th(t.Ra,e.Ra)||Dh.$(t.key,e.key)},t}();function Fm(t,e){return"firestore_clients_"+t+"_"+e}function Vm(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.u()&&(r+="_"+e.uid),r}function Um(t,e){return"firestore_targets_"+t+"_"+e}var qm=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Pa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new mh(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(lh("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ga=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hm=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Pa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new mh(r.error.code,r.error.message)),i?new t(e,r.state,o):(lh("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ga=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),zm=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Pa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=hf(),s=0;i&&s<r.activeTargetIds.length;++s)i=Mh(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(lh("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Bm=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Pa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(lh("SharedClientState","Failed to parse online state: "+e),null)},t}(),Qm=function(){function t(){this.activeTargetIds=hf()}return t.prototype.ya=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Va=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ga=function(){var t={activeTargetIds:this.activeTargetIds.H(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Wm=function(){function t(t,e,n,r,i){this.window=t,this.Cs=e,this.persistenceKey=n,this.pa=r,this.va=null,this.pu=null,this.ps=null,this.ba=this.Sa.bind(this),this.Da=new Yh(Th),this.lr=!1,this.Ca=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Na=Fm(this.persistenceKey,this.pa),this.xa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Da=this.Da.Tt(this.pa,new Qm),this.Fa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Oa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Ma=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ka=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.$a=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.ba)}return t.Gs=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Xs.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Xs.d)(this,function(h){switch(h.label){case 0:return[4,this.va.gc()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.pa&&(i=this.getItem(Fm(this.persistenceKey,r)))&&(o=zm.Pa(r,i))&&(this.Da=this.Da.Tt(o.clientId,o));for(this.La(),(s=this.storage.getItem(this.ka))&&(a=this.Ba(s))&&this.qa(a),u=0,c=this.Ca;u<c.length;u++)this.Sa(c[u]);return this.Ca=[],this.window.addEventListener("unload",function(){return l.Ic()}),this.lr=!0,[2]}})})},t.prototype.Ss=function(t){this.setItem(this.xa,JSON.stringify(t))},t.prototype.Ua=function(){return this.Qa(this.Da)},t.prototype.Ka=function(t){var e=!1;return this.Da.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.Wa=function(t){this.ja(t,"pending")},t.prototype.Ga=function(t,e,n){this.ja(t,e,n),this.za(t)},t.prototype.Ha=function(t){var e="not-current";if(this.Ka(t)){var n=this.storage.getItem(Um(this.persistenceKey,t));if(n){var r=Hm.Pa(t,n);r&&(e=r.state)}}return this.Ja.ya(t),this.La(),e},t.prototype.Ya=function(t){this.Ja.Va(t),this.La()},t.prototype.Xa=function(t){return this.Ja.activeTargetIds.has(t)},t.prototype.Za=function(t){this.removeItem(Um(this.persistenceKey,t))},t.prototype.th=function(t,e,n){this.eh(t,e,n)},t.prototype.nh=function(t,e,n){var r=this;e.forEach(function(t){r.za(t)}),this.currentUser=t,n.forEach(function(t){r.Wa(t)})},t.prototype.sh=function(t){this.ih(t)},t.prototype.rh=function(){this.oh()},t.prototype.Ic=function(){this.lr&&(this.window.removeEventListener("storage",this.ba),this.removeItem(this.Na),this.lr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ch("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ch("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ch("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Sa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ch("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Na)return void lh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Cs.Mi(function(){return Object(Xs.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Xs.d)(this,function(a){if(this.lr){if(null!==n.key)if(this.Fa.test(n.key)){if(null==n.newValue)return t=this.uh(n.key),[2,this.ah(t,null)];if(e=this.hh(n.key,n.newValue))return[2,this.ah(e.clientId,e)]}else if(this.Oa.test(n.key)){if(null!==n.newValue&&(r=this.lh(n.key,n.newValue)))return[2,this._h(r)]}else if(this.Ma.test(n.key)){if(null!==n.newValue&&(i=this.fh(n.key,n.newValue)))return[2,this.dh(i)]}else if(n.key===this.ka){if(null!==n.newValue&&(o=this.Ba(n.newValue)))return[2,this.qa(o)]}else if(n.key===this.xa)(s=function(t){var e=ng.Ds;if(null!=t)try{var n=JSON.parse(t);ph("number"==typeof n),e=n}catch(t){lh("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ng.Ds&&this.ps(s);else if(n.key===this.$a)return[2,this.va.wh()]}else this.Ca.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Ja",{get:function(){return this.Da.get(this.pa)},enumerable:!1,configurable:!0}),t.prototype.La=function(){this.setItem(this.Na,this.Ja.ga())},t.prototype.ja=function(t,e,n){var r=new qm(this.currentUser,t,e,n),i=Vm(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ga())},t.prototype.za=function(t){var e=Vm(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ih=function(t){this.storage.setItem(this.ka,JSON.stringify({clientId:this.pa,onlineState:t}))},t.prototype.eh=function(t,e,n){var r=Um(this.persistenceKey,t),i=new Hm(t,e,n);this.setItem(r,i.ga())},t.prototype.oh=function(){this.setItem(this.$a,"value-not-used")},t.prototype.uh=function(t){var e=this.Fa.exec(t);return e?e[1]:null},t.prototype.hh=function(t,e){var n=this.uh(t);return zm.Pa(n,e)},t.prototype.lh=function(t,e){var n=this.Oa.exec(t),r=Number(n[1]);return qm.Pa(new sh(void 0!==n[2]?n[2]:null),r,e)},t.prototype.fh=function(t,e){var n=this.Ma.exec(t),r=Number(n[1]);return Hm.Pa(r,e)},t.prototype.Ba=function(t){return Bm.Pa(t)},t.prototype._h=function(t){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.va.Eh(t.batchId,t.state,t.error)]:(ch("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.dh=function(t){return this.va.Th(t.targetId,t.state,t.error)},t.prototype.ah=function(t,e){var n=this,r=e?this.Da.Tt(t,e):this.Da.remove(t),i=this.Qa(this.Da),o=this.Qa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.va.Ih(s,a).then(function(){n.Da=r})},t.prototype.qa=function(t){this.Da.get(t.clientId)&&this.pu(t.onlineState)},t.prototype.Qa=function(t){var e=hf();return t.forEach(function(t,n){e=e.Gt(n.activeTargetIds)}),e},t}(),Gm=function(){function t(){this.mh=new Qm,this.Ah={},this.pu=null,this.ps=null}return t.prototype.Wa=function(t){},t.prototype.Ga=function(t,e,n){},t.prototype.Ha=function(t){return this.mh.ya(t),this.Ah[t]||"not-current"},t.prototype.th=function(t,e,n){this.Ah[t]=e},t.prototype.Ya=function(t){this.mh.Va(t)},t.prototype.Xa=function(t){return this.mh.activeTargetIds.has(t)},t.prototype.Za=function(t){delete this.Ah[t]},t.prototype.Ua=function(){return this.mh.activeTargetIds},t.prototype.Ka=function(t){return this.mh.activeTargetIds.has(t)},t.prototype.start=function(){return this.mh=new Qm,Promise.resolve()},t.prototype.nh=function(t,e,n){},t.prototype.sh=function(t){},t.prototype.Ic=function(){},t.prototype.Ss=function(t){},t.prototype.rh=function(){},t}(),$m=function(t){this.key=t},Km=function(t){this.key=t},Ym=function(){function t(t,e){this.query=t,this.Rh=e,this.Ph=null,this.le=!1,this.gh=cf(),this.ee=cf(),this.yh=Ip(t),this.Vh=new ff(this.yh)}return Object.defineProperty(t.prototype,"ph",{get:function(){return this.Rh},enumerable:!1,configurable:!0}),t.prototype.bh=function(t,e){var n=this,r=e?e.Sh:new df,i=e?e.Vh:this.Vh,o=e?e.ee:this.ee,s=i,a=!1,u=gp(this.query)&&i.size===this.query.limit?i.last():null,c=yp(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pt(function(t,e){var l=i.get(t),h=e instanceof cp?e:null;h&&(h=Sp(n.query,h)?h:null);var f=!!l&&n.ee.has(l.key),d=!!h&&(h.an||n.ee.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Dh(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.yh(h,u)>0||c&&n.yh(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),gp(this.query)||yp(this.query))for(;s.size>this.query.limit;){var l=gp(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Vh:s,Sh:r,br:a,ee:o}},t.prototype.Dh=function(t,e){return t.an&&e.hasCommittedMutations&&!e.an},t.prototype.Zn=function(t,e,n){var r=this,i=this.Vh;this.Vh=t.Vh,this.ee=t.ee;var o=t.Sh.Zt();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dh()}};return n(t)-n(e)}(t.type,e.type)||r.yh(t.doc,e.doc)}),this.Ch(n);var s=e?this.Nh():[],a=0===this.gh.size&&this.le?1:0,u=a!==this.Ph;return this.Ph=a,0!==o.length||u?{snapshot:new pf(this.query,t.Vh,i,o,t.ee,0===a,u,!1),xh:s}:{xh:s}},t.prototype.ea=function(t){return this.le&&"Offline"===t?(this.le=!1,this.Zn({Vh:this.Vh,Sh:new df,ee:this.ee,br:!1},!1)):{xh:[]}},t.prototype.Fh=function(t){return!this.Rh.has(t)&&!!this.Vh.has(t)&&!this.Vh.get(t).an},t.prototype.Ch=function(t){var e=this;t&&(t._e.forEach(function(t){return e.Rh=e.Rh.add(t)}),t.fe.forEach(function(t){}),t.de.forEach(function(t){return e.Rh=e.Rh.delete(t)}),this.le=t.le)},t.prototype.Nh=function(){var t=this;if(!this.le)return[];var e=this.gh;this.gh=cf(),this.Vh.forEach(function(e){t.Fh(e.key)&&(t.gh=t.gh.add(e.key))});var n=[];return e.forEach(function(e){t.gh.has(e)||n.push(new Km(e))}),this.gh.forEach(function(t){e.has(t)||n.push(new $m(t))}),n},t.prototype.Oh=function(t){this.Rh=t.Kc,this.gh=cf();var e=this.bh(t.documents);return this.Zn(e,!0)},t.prototype.Mh=function(){return pf.ie(this.query,this.Vh,this.ee,0===this.Ph)},t}(),Jm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Xm=function(t){this.key=t,this.kh=!1},Zm=function(){function t(t,e,n,r,i,o){this.Ou=t,this.$h=e,this.Lh=n,this.Bh=r,this.currentUser=i,this.qh=o,this.Uh={},this.Qh=new Wp(function(t){return Op(t)},Cp),this.Kh=new Map,this.Wh=[],this.jh=new Yh(Dh.$),this.Gh=new Map,this.zh=new Lm,this.Hh={},this.Jh=new Map,this.Yh=Oy.Io(),this.onlineState="Unknown",this.Xh=void 0}return Object.defineProperty(t.prototype,"Zh",{get:function(){return!0===this.Xh},enumerable:!1,configurable:!0}),t}();function tv(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Xs.d)(this,function(a){switch(a.label){case 0:return n=Av(t),(i=n.Qh.get(e))?(n.Bh.Ha(i.targetId),r=i.view.Mh(),[3,4]):[3,1];case 1:return[4,By(n.Ou,wp(e))];case 2:return o=a.sent(),s=n.Bh.Ha(o.targetId),[4,ev(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Zh&&om(n.$h,o),a.label=4;case 4:return[2,r]}})})}function ev(t,e,n,r){return Object(Xs.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Xs.d)(this,function(l){switch(l.label){case 0:return t.tl=function(e,n,r){return function(t,e,n,r){return Object(Xs.b)(this,void 0,void 0,function(){var i,o,s;return Object(Xs.d)(this,function(a){switch(a.label){case 0:return(i=e.view.bh(n)).br?[4,Wy(t.Ou,e.query,!1).then(function(t){return e.view.bh(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.re.get(e.targetId),s=e.view.Zn(i,t.Zh,o),[2,(pv(t,e.targetId,s.xh),s.snapshot)]}})})}(t,e,n,r)},[4,Wy(t.Ou,e,!0)];case 1:return i=l.sent(),o=new Ym(e,i.Kc),s=o.bh(i.documents),a=yf.he(n,r&&"Offline"!==t.onlineState),u=o.Zn(s,t.Zh,a),pv(t,n,u.xh),c=new Jm(e,n,o),[2,(t.Qh.set(e,c),t.Kh.has(n)?t.Kh.get(n).push(e):t.Kh.set(n,[e]),u.snapshot)]}})})}function nv(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i;return Object(Xs.d)(this,function(o){switch(o.label){case 0:return n=gh(t),r=n.Qh.get(e),(i=n.Kh.get(r.targetId)).length>1?[2,(n.Kh.set(r.targetId,i.filter(function(t){return!Cp(t,e)})),void n.Qh.delete(e))]:n.Zh?(n.Bh.Ya(r.targetId),n.Bh.Ka(r.targetId)?[3,2]:[4,Qy(n.Ou,r.targetId,!1).then(function(){n.Bh.Za(r.targetId),sm(n.$h,r.targetId),fv(n,r.targetId)}).catch(Yy)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return fv(n,r.targetId),[4,Qy(n.Ou,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function rv(t,e,n){return Object(Xs.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Xs.d)(this,function(a){switch(a.label){case 0:r=kv(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=gh(t),i=xh.now(),o=e.reduce(function(t,e){return t.add(e.key)},cf());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Bc._s(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=$d(c,n.get(c.key));null!=l&&s.push(new Xd(c.key,l,ap(l.proto.mapValue),zd.exists(!0)))}return r.rs.Or(t,i,s,e)})}).then(function(t){var e=t.vn(n);return{batchId:t.batchId,Qn:e}})}(r.Ou,e)];case 2:return i=a.sent(),r.Bh.Wa(i.batchId),function(t,e,n){var r=t.Hh[t.currentUser.h()];r||(r=new Yh(Th)),r=r.Tt(e,n),t.Hh[t.currentUser.h()]=r}(r,i.batchId,n),[4,mv(r,i.Qn)];case 3:return a.sent(),[4,vm(r.$h)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=mg(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function iv(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r;return Object(Xs.d)(this,function(i){switch(i.label){case 0:n=gh(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Hy(n.Ou,e)];case 2:return r=i.sent(),e.re.forEach(function(t,e){var r=n.Gh.get(e);r&&(ph(t._e.size+t.fe.size+t.de.size<=1),t._e.size>0?r.kh=!0:t.fe.size>0?ph(r.kh):t.de.size>0&&(ph(r.kh),r.kh=!1))}),[4,mv(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Yy(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function ov(t,e,n){var r=gh(t);if(r.Zh&&0===n||!r.Zh&&1===n){var i=[];r.Qh.forEach(function(t,n){var r=n.view.ea(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=gh(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].ea(e)&&(r=!0)}),r&&Dm(n)}(r.Lh,e),i.length&&r.Uh.fu(i),r.onlineState=e,r.Zh&&r.Bh.sh(e)}}function sv(t,e,n){return Object(Xs.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Xs.d)(this,function(c){switch(c.label){case 0:return(r=gh(t)).Bh.th(e,"rejected",n),i=r.Gh.get(e),(o=i&&i.key)?(s=(s=new Yh(Dh.$)).Tt(o,new lp(o,Ah.min())),a=cf().add(o),u=new gf(Ah.min(),new Map,new Zh(Th),s,a),[4,iv(r,u)]):[3,2];case 1:return c.sent(),r.jh=r.jh.remove(o),r.Gh.delete(e),yv(r),[3,4];case 2:return[4,Qy(r.Ou,e,!1).then(function(){return fv(r,e,n)}).catch(Yy)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function av(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i;return Object(Xs.d)(this,function(o){switch(o.label){case 0:n=gh(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Uy(n.Ou,e)];case 2:return i=o.sent(),hv(n,r,null),lv(n,r),n.Bh.Ga(r,"acknowledged"),[4,mv(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Yy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function uv(t,e,n){return Object(Xs.b)(this,void 0,void 0,function(){var r,i;return Object(Xs.d)(this,function(o){switch(o.label){case 0:r=gh(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=gh(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.rs.kr(t,e).next(function(e){return ph(null!==e),r=e.keys(),n.rs.Qr(t,e)}).next(function(){return n.rs.Gr(t)}).next(function(){return n.Bc._s(t,r)})})}(r.Ou,e)];case 2:return i=o.sent(),hv(r,e,n),lv(r,e),r.Bh.Ga(e,"rejected",n),[4,mv(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Yy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function cv(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Xs.d)(this,function(a){switch(a.label){case 0:hm((n=gh(t)).$h)||ch("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=gh(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.rs.Br(t)})}(n.Ou)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Jh.get(r)||[]).push(e),n.Jh.set(r,i),[3,4]);case 3:return o=a.sent(),s=mg(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function lv(t,e){(t.Jh.get(e)||[]).forEach(function(t){t.resolve()}),t.Jh.delete(e)}function hv(t,e,n){var r=gh(t),i=r.Hh[r.currentUser.h()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Hh[r.currentUser.h()]=i}}function fv(t,e,n){void 0===n&&(n=null),t.Bh.Ya(e);for(var r=0,i=t.Kh.get(e);r<i.length;r++){var o=i[r];t.Qh.delete(o),n&&t.Uh.el(o,n)}t.Kh.delete(e),t.Zh&&t.zh.Ia(e).forEach(function(e){t.zh.zr(e)||dv(t,e)})}function dv(t,e){var n=t.jh.get(e);null!==n&&(sm(t.$h,n),t.jh=t.jh.remove(e),t.Gh.delete(n),yv(t))}function pv(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof $m?(t.zh.Oo(o.key,e),gv(t,o)):o instanceof Km?(ch("SyncEngine","Document no longer in limbo: "+o.key),t.zh.ko(o.key,e),t.zh.zr(o.key)||dv(t,o.key)):dh()}}function gv(t,e){var n=e.key;t.jh.get(n)||(ch("SyncEngine","New document in limbo: "+n),t.Wh.push(n),yv(t))}function yv(t){for(;t.Wh.length>0&&t.jh.size<t.qh;){var e=t.Wh.shift(),n=t.Yh.next();t.Gh.set(n,new Xm(e)),t.jh=t.jh.Tt(e,n),om(t.$h,new Wh(wp(pp(e.path)),n,2,ng.Ds))}}function mv(t,e,n){return Object(Xs.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Xs.d)(this,function(a){switch(a.label){case 0:return r=gh(t),i=[],o=[],s=[],r.Qh.W()?[3,3]:(r.Qh.forEach(function(t,a){s.push(r.tl(a,e,n).then(function(t){if(t){r.Zh&&r.Bh.th(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=eg.Vs(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.Uh.fu(i),[4,function(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Xs.d)(this,function(l){switch(l.label){case 0:n=gh(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Gp.forEach(e,function(e){return Gp.forEach(e.gs,function(r){return n.persistence.Dr.Oo(t,e.targetId,r)}).next(function(){return Gp.forEach(e.ys,function(r){return n.persistence.Dr.ko(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!ag(r=l.sent()))throw r;return ch("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Mc.get(a),c=u.Et(u.ft),n.Mc=n.Mc.Tt(a,c));return[2]}})})}(r.Ou,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function vv(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r;return Object(Xs.d)(this,function(i){switch(i.label){case 0:return(n=gh(t)).currentUser.isEqual(e)?[3,3]:(ch("SyncEngine","User change. New user:",e.h()),[4,Vy(n.Ou,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Jh.forEach(function(t){t.forEach(function(t){t.reject(new mh(yh.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Jh.clear()}(n),n.Bh.nh(e,r.Uc,r.Qc),[4,mv(n,r.qc)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function bv(t,e){var n=gh(t),r=n.Gh.get(e);if(r&&r.kh)return cf().add(r.key);var i=cf(),o=n.Kh.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Qh.get(a[s]);i=i.Gt(u.view.ph)}return i}function _v(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i;return Object(Xs.d)(this,function(o){switch(o.label){case 0:return[4,Wy((n=gh(t)).Ou,e.query,!0)];case 1:return r=o.sent(),i=e.view.Oh(r),[2,(n.Zh&&pv(n,e.targetId,i.xh),i)]}})})}function wv(t){return Object(Xs.b)(this,void 0,void 0,function(){var e;return Object(Xs.d)(this,function(n){return[2,$y((e=gh(t)).Ou).then(function(t){return mv(e,t)})]})})}function Ev(t,e,n,r){return Object(Xs.b)(this,void 0,void 0,function(){var i,o;return Object(Xs.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=gh(t),r=gh(n.rs);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.$r(t,e).next(function(e){return e?n.Bc._s(t,e):Gp.resolve(null)})})}((i=gh(t)).Ou,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,vm(i.$h)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(hv(i,e,r||null),lv(i,e),function(t,e){gh(gh(t).rs).Wr(e)}(i.Ou,e)):dh(),s.label=4;case 4:return[4,mv(i,o)];case 5:return s.sent(),[3,7];case 6:ch("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Cv(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Xs.d)(this,function(c){switch(c.label){case 0:return Av(n=gh(t)),kv(n),!0!==e||!0===n.Xh?[3,3]:(r=n.Bh.Ua(),[4,Ov(n,r.H())]);case 1:return i=c.sent(),n.Xh=!0,[4,Tm(n.$h,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)om(n.$h,s[o]);return[3,7];case 3:return!1!==e||!1===n.Xh?[3,7]:(a=[],u=Promise.resolve(),n.Kh.forEach(function(t,e){n.Bh.Xa(e)?a.push(e):u=u.then(function(){return fv(n,e),Qy(n.Ou,e,!0)}),sm(n.$h,e)}),[4,u]);case 4:return c.sent(),[4,Ov(n,a)];case 5:return c.sent(),function(t){var e=gh(t);e.Gh.forEach(function(t,n){sm(e.$h,n)}),e.zh.ma(),e.Gh=new Map,e.jh=new Yh(Dh.$)}(n),n.Xh=!1,[4,Tm(n.$h,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Ov(t,e,n){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Xs.d)(this,function(g){switch(g.label){case 0:n=gh(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Kh.get(a=s[o]))&&0!==c.length?[4,By(n.Ou,wp(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Qh.get(h[l]),[4,_v(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Gy(n.Ou,a)];case 8:return p=g.sent(),[4,By(n.Ou,p)];case 9:return u=g.sent(),[4,ev(n,Tv(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Uh.fu(i),r)]}})})}function Tv(t){return dp(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Sv(t){var e=gh(t);return gh(gh(e.Ou).persistence).gc()}function Iv(t,e,n,r){return Object(Xs.b)(this,void 0,void 0,function(){var i,o,s;return Object(Xs.d)(this,function(a){switch(a.label){case 0:return(i=gh(t)).Xh?(ch("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Kh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,$y(i.Ou)];case 3:return o=a.sent(),s=gf.ae(e,"current"===n),[4,mv(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Qy(i.Ou,e,!0)];case 6:return a.sent(),fv(i,e,r),[3,8];case 7:dh(),a.label=8;case 8:return[2]}})})}function xv(t,e,n){return Object(Xs.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Xs.d)(this,function(f){switch(f.label){case 0:if(!(r=Av(t)).Xh)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Kh.has(s=o[i])?(ch("SyncEngine","Adding an already active target "+s),[3,5]):[4,Gy(r.Ou,s)]:[3,6];case 2:return a=f.sent(),[4,By(r.Ou,a)];case 3:return u=f.sent(),[4,ev(r,Tv(a),u.targetId,!1)];case 4:f.sent(),om(r.$h,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Xs.d)(this,function(e){switch(e.label){case 0:return r.Kh.has(t)?[4,Qy(r.Ou,t,!1).then(function(){sm(r.$h,t),fv(r,t)}).catch(Yy)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Av(t){var e=gh(t);return e.$h.ku.Gu=iv.bind(null,e),e.$h.ku.Xe=bv.bind(null,e),e.$h.ku.ju=sv.bind(null,e),e.Uh.fu=Pm.bind(null,e.Lh),e.Uh.el=Nm.bind(null,e.Lh),e}function kv(t){var e=gh(t);return e.$h.ku.zu=av.bind(null,e),e.$h.ku.Hu=uv.bind(null,e),e}var jv=function(){function t(t,e){this.os=t,this.Dr=e,this.rs=[],this.nl=1,this.sl=new Zh(Mm._a)}return t.prototype.Fr=function(t){return Gp.resolve(0===this.rs.length)},t.prototype.Or=function(t,e,n,r){var i=this.nl;this.nl++;var o=new Bp(i,e,n,r);this.rs.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.sl=this.sl.add(new Mm(u.key,i)),this.os.Mr(t,u.key.path.q())}return Gp.resolve(o)},t.prototype.kr=function(t,e){return Gp.resolve(this.il(e))},t.prototype.Lr=function(t,e){var n=this.rl(e+1),r=n<0?0:n;return Gp.resolve(this.rs.length>r?this.rs[r]:null)},t.prototype.Br=function(){return Gp.resolve(0===this.rs.length?-1:this.nl-1)},t.prototype.qr=function(t){return Gp.resolve(this.rs.slice())},t.prototype.us=function(t,e){var n=this,r=new Mm(e,0),i=new Mm(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Kt([r,i],function(t){var e=n.il(t.Ra);o.push(e)}),Gp.resolve(o)},t.prototype.ds=function(t,e){var n=this,r=new Zh(Th);return e.forEach(function(t){var e=new Mm(t,0),i=new Mm(t,Number.POSITIVE_INFINITY);n.sl.Kt([e,i],function(t){r=r.add(t.Ra)})}),Gp.resolve(this.ol(r))},t.prototype.Rs=function(t,e){var n=e.path,r=n.length+1,i=n;Dh.ot(i)||(i=i.child(""));var o=new Mm(new Dh(i),0),s=new Zh(Th);return this.sl.Wt(function(t){var e=t.key.path;return!!n.j(e)&&(e.length===r&&(s=s.add(t.Ra)),!0)},o),Gp.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.il(t);null!==r&&n.push(r)}),n},t.prototype.Qr=function(t,e){var n=this;ph(0===this.cl(e.batchId,"removed")),this.rs.shift();var r=this.sl;return Gp.forEach(e.mutations,function(i){var o=new Mm(i.key,e.batchId);return r=r.delete(o),n.Dr.jr(t,i.key)}).next(function(){n.sl=r})},t.prototype.Wr=function(t){},t.prototype.zr=function(t,e){var n=new Mm(e,0),r=this.sl.jt(n);return Gp.resolve(e.isEqual(r&&r.key))},t.prototype.Gr=function(t){return Gp.resolve()},t.prototype.cl=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.rs.length?0:t-this.rs[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.rs.length?null:this.rs[e]},t}(),Pv=function(){function t(t,e){this.os=t,this.ul=e,this.docs=new Yh(Dh.$),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ul(e);return this.docs=this.docs.Tt(r,{zn:e,size:s,readTime:n}),this.size+=s-o,this.os.Mr(t,r.path.q())},t.prototype.Hn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Jn=function(t,e){var n=this.docs.get(e);return Gp.resolve(n?n.zn:null)},t.prototype.getEntries=function(t,e){var n=this,r=rf();return e.forEach(function(t){var e=n.docs.get(t);r=r.Tt(t,e?e.zn:null)}),Gp.resolve(r)},t.prototype.ws=function(t,e,n){for(var r=sf(),i=new Dh(e.path.child("")),o=this.docs.Vt(i);o.Nt();){var s=o.Ct(),a=s.value,u=a.zn,c=a.readTime;if(!e.path.j(s.key.path))break;c.F(n)<=0||u instanceof cp&&Sp(e,u)&&(r=r.Tt(u.key,u))}return Gp.resolve(r)},t.prototype.al=function(t,e){return Gp.forEach(this.docs,function(t){return e(t)})},t.prototype.io=function(t){return new Nv(this)},t.prototype.oo=function(t){return Gp.resolve(this.size)},t}(),Nv=function(t){function e(e){var n=this;return(n=t.call(this)||this).co=e,n}return Object(Xs.c)(e,t),e.prototype.Zn=function(t){var e=this,n=[];return this.Qn.forEach(function(r,i){i&&i.zn?n.push(e.co.jn(t,i.zn,e.Wn(r))):e.co.Hn(r)}),Gp.qn(n)},e.prototype.Yn=function(t,e){return this.co.Jn(t,e)},e.prototype.Xn=function(t,e){return this.co.getEntries(t,e)},e}($p),Dv=function(){function t(t){this.persistence=t,this.hl=new Wp(function(t){return Uh(t)},qh),this.lastRemoteSnapshotVersion=Ah.min(),this.highestTargetId=0,this.ll=0,this._l=new Lm,this.targetCount=0,this.fl=Oy.To()}return t.prototype.Ue=function(t,e){return this.hl.forEach(function(t,n){return e(n)}),Gp.resolve()},t.prototype.Po=function(t){return Gp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.yo=function(t){return Gp.resolve(this.ll)},t.prototype.mo=function(t){return this.highestTargetId=this.fl.next(),Gp.resolve(this.highestTargetId)},t.prototype.Vo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),Gp.resolve()},t.prototype.vo=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new Oy(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.po=function(t,e){return this.vo(e),this.targetCount+=1,Gp.resolve()},t.prototype.So=function(t,e){return this.vo(e),Gp.resolve()},t.prototype.Do=function(t,e){return this.hl.delete(e.target),this._l.Ia(e.targetId),this.targetCount-=1,Gp.resolve()},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.hl.delete(s),o.push(r.Co(t,a.targetId)),i++)}),Gp.qn(o).next(function(){return i})},t.prototype.No=function(t){return Gp.resolve(this.targetCount)},t.prototype.xo=function(t,e){var n=this.hl.get(e)||null;return Gp.resolve(n)},t.prototype.Fo=function(t,e,n){return this._l.wa(e,n),Gp.resolve()},t.prototype.Mo=function(t,e,n){this._l.Ta(e,n);var r=this.persistence.Dr,i=[];return r&&e.forEach(function(e){i.push(r.jr(t,e))}),Gp.qn(i)},t.prototype.Co=function(t,e){return this._l.Ia(e),Gp.resolve()},t.prototype.$o=function(t,e){var n=this._l.Aa(e);return Gp.resolve(n)},t.prototype.zr=function(t,e){return Gp.resolve(this._l.zr(e))},t}(),Rv=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.ho=function(t,e){return Gp.resolve(this.dl.get(e))},t.prototype.lo=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:nd(n.createTime)}),Gp.resolve()},t.prototype._o=function(t,e){return Gp.resolve(this.wl.get(e))},t.prototype.fo=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:Vg(n.bundledQuery),readTime:nd(n.readTime)}),Gp.resolve()},t}(),Lv=function(){function t(t,e){var n=this;this.El={},this.Uo=new ng(0),this.Qo=!1,this.Qo=!0,this.Dr=t(this),this.Yo=new Dv(this),this.os=new Xg,this.ss=function(t,e){return new Pv(t,function(t){return n.Dr.Tl(t)})}(this.os),this.serializer=new Ag(e),this.Xo=new Rv(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Ic=function(){return this.Qo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"lr",{get:function(){return this.Qo},enumerable:!1,configurable:!0}),t.prototype.rc=function(){},t.prototype.oc=function(){},t.prototype.bc=function(){return this.os},t.prototype.yc=function(t){var e=this.El[t.h()];return e||(e=new jv(this.os,this.Dr),this.El[t.h()]=e),e},t.prototype.Vc=function(){return this.Yo},t.prototype.vc=function(){return this.ss},t.prototype.Sc=function(){return this.Xo},t.prototype.runTransaction=function(t,e,n){var r=this;ch("MemoryPersistence","Starting transaction:",t);var i=new Mv(this.Uo.next());return this.Dr.Il(),n(i).next(function(t){return r.Dr.ml(i).next(function(){return t})}).Ln().then(function(t){return i.ns(),t})},t.prototype.Al=function(t,e){return Gp.Un(Object.values(this.El).map(function(n){return function(){return n.zr(t,e)}}))},t}(),Mv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Lo=e,n}return Object(Xs.c)(e,t),e}(Zp),Fv=function(){function t(t){this.persistence=t,this.Rl=new Lm,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"yl",{get:function(){if(this.Pl)return this.Pl;throw dh()},enumerable:!1,configurable:!0}),t.prototype.Oo=function(t,e,n){return this.Rl.Oo(n,e),this.yl.delete(n.toString()),Gp.resolve()},t.prototype.ko=function(t,e,n){return this.Rl.ko(n,e),this.yl.add(n.toString()),Gp.resolve()},t.prototype.jr=function(t,e){return this.yl.add(e.toString()),Gp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.Ia(e.targetId).forEach(function(t){return n.yl.add(t.toString())});var r=this.persistence.Vc();return r.$o(t,e.targetId).next(function(t){t.forEach(function(t){return n.yl.add(t.toString())})}).next(function(){return r.Do(t,e)})},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.vc().io();return Gp.forEach(this.yl,function(r){var i=Dh.st(r);return e.Vl(t,i).next(function(t){t||n.Hn(i)})}).next(function(){return e.Pl=null,n.apply(t)})},t.prototype.Fc=function(t,e){var n=this;return this.Vl(t,e).next(function(t){t?n.yl.delete(e.toString()):n.yl.add(e.toString())})},t.prototype.Tl=function(t){return 0},t.prototype.Vl=function(t,e){var n=this;return Gp.Un([function(){return Gp.resolve(n.Rl.zr(e))},function(){return n.persistence.Vc().zr(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),Vv=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.lu=function(t){this.bl=t},t.prototype.ou=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),Uv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},qv=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(Xs.c)(e,t),e.prototype.Ll=function(t,e,n,r){return new Promise(function(i,o){var s=new nh;s.listenOnce(Zl.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Xl.NO_ERROR:var e=s.getResponseJson();ch("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Xl.TIMEOUT:ch("Connection",'RPC "'+t+'" timed out'),o(new mh(yh.DEADLINE_EXCEEDED,"Request time out"));break;case Xl.HTTP_ERROR:var n=s.getStatus();if(ch("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(yh).indexOf(e)>=0?e:yh.UNKNOWN}(r.status);o(new mh(a,r.message))}else o(new mh(yh.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new mh(yh.UNAVAILABLE,"Connection failed."));break;default:dh()}}finally{ch("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype._u=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Gl,i=Yu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(o.initMessageHeaders,e),Object(ea.t)()||Object(ea.w)()||Object(ea.q)()||Object(ea.s)()||Object(ea.x)()||Object(ea.p)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");ch("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Vv({pl:function(t){c?ch("Connection","Not sending because WebChannel is closed:",t):(u||(ch("Connection","Opening WebChannel transport."),a.open(),u=!0),ch("Connection","WebChannel sending:",t),a.send(t))},vl:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,eh.EventType.OPEN,function(){c||ch("Connection","WebChannel transport opened.")}),h(a,eh.EventType.CLOSE,function(){c||(c=!0,ch("Connection","WebChannel transport closed"),l.Nl())}),h(a,eh.EventType.ERROR,function(t){c||(c=!0,hh("Connection","WebChannel transport errored:",t),l.Nl(new mh(yh.UNAVAILABLE,"The operation could not be completed")))}),h(a,eh.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];ph(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){ch("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Bh[t];if(void 0!==e)return Kh(e)}(i),s=r.message;void 0===o&&(o=yh.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Nl(new mh(o,s)),a.close()}else ch("Connection","WebChannel received:",n),l.xl(n)}}),h(i,th.STAT_EVENT,function(t){10===t.stat?ch("Connection","Detected buffering proxy"):11===t.stat&&ch("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Cl()},0),l},e}(function(){function t(t){this.Fl=t,this.t=t.t,this.Ol=(t.ssl?"https":"http")+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.yu=function(t,e,n,r){var i=this.kl(t,e);ch("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then(function(t){return ch("RestConnection","Received: ",t),t},function(e){throw hh("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Vu=function(t,e,n,r){return this.yu(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.1.2",t["Content-Type"]="text/plain",e)for(var n in e.T)e.T.hasOwnProperty(n)&&(t[n]=e.T[n])},t.prototype.kl=function(t,e){return this.Ol+"/v1/"+e+":"+Uv[t]},t}()),Hv=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Qu=function(t){this.Kl.push(t)},t.prototype.Ic=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){ch("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){ch("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.Gs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),zv=function(){function t(){}return t.prototype.Qu=function(t){},t.prototype.Ic=function(){},t}(),Bv=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(e){switch(e.label){case 0:return this.serializer=Yp(t.Fl.t),this.Bh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Ou=this.Jl(t),[2]}})})},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Fy(this.persistence,new Og,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new Lv(Fv.gl,this.serializer)},t.prototype.jl=function(t){return new Gm},t.prototype.terminate=function(){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.Bh.Ic()];case 1:return t.sent(),[4,this.persistence.Ic()];case 2:return t.sent(),[2]}})})},t}(),Qv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Xs.c)(e,t),e.prototype.initialize=function(e){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ky(this.Ou)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,kv(this.Xl.va)];case 4:return n.sent(),[4,vm(this.Xl.$h)];case 5:return n.sent(),[2]}})})},e.prototype.Jl=function(t){return Fy(this.persistence,new Og,t.Yl,this.serializer)},e.prototype.Hl=function(t){return new Eg(this.persistence.Dr.cr,t.di)},e.prototype.Gl=function(t){var e=Ly(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?wg.er(this.cacheSizeBytes):wg.ir;return new jy(this.synchronizeTabs,e,t.clientId,n,t.di,dg(),pg(),this.serializer,this.Bh,!!this.forceOwnership)},e.prototype.jl=function(t){return new Gm},e}(Bv),Wv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Xs.c)(e,t),e.prototype.initialize=function(e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r=this;return Object(Xs.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.va,this.Bh instanceof Wm?(this.Bh.va={Eh:Ev.bind(null,n),Th:Iv.bind(null,n),Ih:xv.bind(null,n),gc:Sv.bind(null,n),wh:wv.bind(null,n)},[4,this.Bh.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.ic(function(t){return Object(Xs.b)(r,void 0,void 0,function(){return Object(Xs.d)(this,function(e){switch(e.label){case 0:return[4,Cv(this.Xl.va,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.lr?this.zl.start(this.Ou):t||this.zl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jl=function(t){var e=dg();if(!Wm.Gs(e))throw new mh(yh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ly(t.Fl.t,t.Fl.persistenceKey);return new Wm(e,t.di,n,t.clientId,t.Yl)},e}(Qv),Gv=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n=this;return Object(Xs.d)(this,function(r){switch(r.label){case 0:return this.Ou?[3,2]:(this.Ou=t.Ou,this.Bh=t.Bh,this.Mu=this.Zl(e),this.$h=this.t_(e),this.Lh=this.e_(e),this.va=this.n_(e,!t.synchronizeTabs),this.Bh.pu=function(t){return ov(n.va,t,1)},this.$h.ku.s_=vv.bind(null,this.va),[4,Tm(this.$h,this.va.Zh)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.e_=function(t){return new Am},t.prototype.Zl=function(t){var e=Yp(t.Fl.t),n=new qv(t.Fl);return function(t,e,n){return new tm(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Ou,n=this.Mu,r=t.di,i=function(t){return ov(s.va,t,0)},o=Hv.Gs()?new Hv:new zv,new nm(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Zm(t,e,n,r,i,o);return s&&(a.Xh=!0),a}(this.Ou,this.$h,this.Lh,this.Bh,t.Yl,t.qh,e)},t.prototype.terminate=function(){return function(t){return Object(Xs.b)(this,void 0,void 0,function(){var e;return Object(Xs.d)(this,function(n){switch(n.label){case 0:return e=gh(t),ch("RemoteStore","RemoteStore shutting down."),e.Bu.add(5),[4,im(e)];case 1:return n.sent(),e.Uu.Ic(),e.Ku.set("Unknown"),[2]}})})}(this.$h)},t}(),$v=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}();function Kv(t,e,n){if(!n)throw new mh(yh.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Yv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new mh(yh.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Jv(t,e,n,r){if(!0===e&&!0===r)throw new mh(yh.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Xv(t){if(!Dh.ot(t))throw new mh(yh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Zv(t){if(Dh.ot(t))throw new mh(yh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function tb(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":dh()}function eb(t,e){if("_delegate"in t&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new mh(yh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=tb(t);throw new mh(yh.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function nb(t,e){if(e<=0)throw new mh(yh.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var rb=function(t){this._methodName=t},ib=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xs.c)(e,t),e.prototype.c_=function(t){if(2!==t.u_)throw t.a_(1===t.u_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.en.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(rb);function ob(t,e,n){return new c_({u_:3,h_:e.settings.h_,methodName:t._methodName,l_:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var sb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xs.c)(e,t),e.prototype.c_=function(t){return new qd(t.path,new Pd)},e.prototype.isEqual=function(t){return t instanceof e},e}(rb),ab=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).__=n,r}return Object(Xs.c)(e,t),e.prototype.c_=function(t){var e=ob(this,t,!0),n=this.__.map(function(t){return g_(t,e)}),r=new Nd(n);return new qd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(rb),ub=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).__=n,r}return Object(Xs.c)(e,t),e.prototype.c_=function(t){var e=ob(this,t,!0),n=this.__.map(function(t){return g_(t,e)}),r=new Rd(n);return new qd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(rb),cb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(Xs.c)(e,t),e.prototype.c_=function(t){var e=new Md(t.serializer,Xf(t.serializer,this.f_));return new qd(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(rb),lb=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new mh(yh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new mh(yh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.d_=t,this.w_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.d_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.d_===t.d_&&this.w_===t.w_},t.prototype.toJSON=function(){return{latitude:this.d_,longitude:this.w_}},t.prototype.C=function(t){return Th(this.d_,t.d_)||Th(this.w_,t.w_)},t}(),hb=function(){function t(t){this.E_=t}return t.fromBase64String=function(e){try{return new t(zh.fromBase64String(e))}catch(e){throw new mh(yh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(zh.fromUint8Array(e))},t.prototype.toBase64=function(){return this.E_.toBase64()},t.prototype.toUint8Array=function(){return this.E_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.E_.isEqual(t.E_)},t}(),fb=function(t){this.o_=t},db=new Map,pb=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new mh(yh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new mh(yh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Jv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),gb=function(){function t(t,e){this.T_="(lite)",this.I_=new pb({}),this.m_=!1,t instanceof oh?(this.A_=t,this.R_=new bh):(this.P_=t,this.A_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new mh(yh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oh(t.options.projectId)}(t),this.R_=new _h(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.P_)throw new mh(yh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.P_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g_",{get:function(){return this.m_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y_",{get:function(){return void 0!==this.V_},enumerable:!1,configurable:!0}),t.prototype.p_=function(t){if(this.m_)throw new mh(yh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.I_=new pb(t),void 0!==t.credentials&&(this.R_=function(t){if(!t)return new bh;switch(t.type){case"gapi":var e=t.client;return ph(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Eh(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new mh(yh.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.v_=function(){return this.I_},t.prototype.b_=function(){return this.m_=!0,this.I_},t.prototype._delete=function(){return this.V_||(this.V_=this.S_()),this.V_},t.prototype.S_=function(){return function(t){var e=db.get(t);e&&(ch("ComponentProvider","Removing Datastore"),db.delete(t),e.terminate())}(this),Promise.resolve()},t}();function yb(){if("undefined"==typeof Uint8Array)throw new mh(yh.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function mb(){if("undefined"==typeof atob)throw new mh(yh.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var vb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xs.c)(e,t),e.fromBase64String=function(t){return mb(),new e(hb.fromBase64String(t))},e.fromUint8Array=function(t){return yb(),new e(hb.fromUint8Array(t))},e.prototype.toBase64=function(){return mb(),this.o_.toBase64()},e.prototype.toUint8Array=function(){return yb(),this.o_.toUint8Array()},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(fb),bb=function(){function t(){}return t.prototype.D_=function(t,e){switch(void 0===e&&(e="none"),jf(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vf(t.integerValue||t.doubleValue);case 3:return this.C_(t.timestampValue);case 4:return this.N_(t,e);case 5:return t.stringValue;case 6:return this.x_(Uf(t.bytesValue));case 7:return this.F_(t.referenceValue);case 8:return this.O_(t.geoPointValue);case 9:return this.M_(t.arrayValue,e);case 10:return this.k_(t.mapValue,e);default:throw dh()}},t.prototype.k_=function(t,e){var n=this,r={};return Tf(t.fields||{},function(t,i){r[t]=n.D_(i,e)}),r},t.prototype.O_=function(t){return new lb(Vf(t.latitude),Vf(t.longitude))},t.prototype.M_=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.D_(t,e)})},t.prototype.N_=function(t,e){switch(e){case"previous":var n=xf(t);return null==n?null:this.D_(n,e);case"estimate":return this.C_(Af(t));default:return null}},t.prototype.C_=function(t){var e=Ff(t);return new xh(e.seconds,e.nanos)},t.prototype.L_=function(t,e){var n=jh.Y(t);ph(Id(n));var r=new oh(n.get(1),n.get(3)),i=new Dh(n.B(5));return r.isEqual(e)||lh("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),_b=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Xs.c)(e,t),e.prototype.x_=function(t){return new vb(new hb(t))},e.prototype.F_=function(t){var e=this.L_(t,this.firestore.A_);return G_.B_(e,this.firestore,null)},e}(bb),wb=function(){function t(t,e,n,r,i){this.q_=t,this.U_=e,this.Q_=n,this.K_=r,this.W_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.Q_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Fb(this.q_,this.W_,this.Q_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.K_},t.prototype.data=function(){if(this.K_){if(this.W_){var t=new Eb(this.q_,this.U_,this.Q_,this.K_,null);return this.W_.fromFirestore(t)}return this.U_.D_(this.K_.En())}},t.prototype.get=function(t){if(this.K_){var e=this.K_.data().field(Cb("DocumentSnapshot.get",t));if(null!==e)return this.U_.D_(e)}},t}(),Eb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xs.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(wb);function Cb(t,e){return"string"==typeof e?w_(t,e):e instanceof fb?e.o_.j_:e.j_}var Ob=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new mh(yh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.j_=new Nh(t)}return t.prototype.isEqual=function(t){return this.j_.isEqual(t.j_)},t}(),Tb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).G_=new yg,r.T_="name"in e?e.name:"[DEFAULT]",r}return Object(Xs.c)(e,t),e.prototype.S_=function(){return this.z_||B_(this),this.z_.terminate()},e}(gb);function Sb(t,e,n){var r=this,i=new Kp;return t.di.enqueue(function(){return Object(Xs.b)(r,void 0,void 0,function(){var r;return Object(Xs.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,I_(t,n)];case 1:return o.sent(),[4,x_(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===yh.FAILED_PRECONDITION||t.code===yh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Ib(t){if(t.g_||t.y_)throw new mh(yh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var xb=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).q_=e,a.H_=e,a.metadata=o,a}return Object(Xs.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.K_){if(this.W_){var e=new Ab(this.q_,this.U_,this.Q_,this.K_,this.metadata,null);return this.W_.fromFirestore(e,t)}return this.U_.D_(this.K_.En(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.K_){var n=this.K_.data().field(Cb("DocumentSnapshot.get",t));if(null!==n)return this.U_.D_(n,e.serverTimestamps)}},e}(wb),Ab=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xs.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(xb),kb=function(){function t(t,e,n,r){this.q_=t,this.U_=e,this.J_=r,this.metadata=new J_(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.J_.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.J_.docs.forEach(function(r){t.call(e,new Ab(n.q_,n.U_,r.key,r,new J_(n.J_.ee.has(r.key),n.J_.fromCache),n.query.W_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.J_.se)throw new mh(yh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Y_&&this.X_===e||(this.Y_=function(t,e){if(t.J_.te.W()){var n=0;return t.J_.docChanges.map(function(e){return{type:"added",doc:new Ab(t.q_,t.U_,e.doc.key,e.doc,new J_(t.J_.ee.has(e.doc.key),t.J_.fromCache),t.query.W_),oldIndex:-1,newIndex:n++}})}var r=t.J_.te;return t.J_.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Ab(t.q_,t.U_,e.doc.key,e.doc,new J_(t.J_.ee.has(e.doc.key),t.J_.fromCache),t.query.W_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:jb(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.X_=e),this.Y_},t}();function jb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dh()}}function Pb(t,e){return t instanceof xb&&e instanceof xb?t.q_===e.q_&&t.Q_.isEqual(e.Q_)&&(null===t.K_?null===e.K_:t.K_.isEqual(e.K_))&&t.W_===e.W_:t instanceof kb&&e instanceof kb&&t.q_===e.q_&&r_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.J_.isEqual(e.J_)}var Nb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Xs.c)(e,t),e.prototype.x_=function(t){return new hb(t)},e.prototype.F_=function(t){var e=this.L_(t,this.firestore.A_);return new Fb(this.firestore,null,e)},e}(bb);function Db(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=eb(t,Fb);var o=eb(t.firestore,Tb),s=i_(o);return e instanceof fb&&(e=e.o_),Lb(o,("string"==typeof e||e instanceof Ob?d_(s,"updateDoc",t.Q_,e,n,r):f_(s,"updateDoc",t.Q_,e)).tf(t.Q_,zd.exists(!0)))}function Rb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof fb&&(t=t.o_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Jp(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Jp(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Fb)c=eb(t.firestore,Tb),l=pp(t.Q_.path),u={next:function(e){i[a]&&i[a](Mb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=eb(t,Vb);c=eb(d.firestore,Tb),l=d.Z_;var p=new Nb(c);u={next:function(t){i[a]&&i[a](new kb(c,p,d,t))},error:i[a+1],complete:i[a+2]},Jb(t.Z_)}return function(t,e,n,r){var i=this,o=new $v(r),s=new Rm(e,o,n);return t.di.Ri(function(){return Object(Xs.b)(i,void 0,void 0,function(){var e;return Object(Xs.d)(this,function(n){switch(n.label){case 0:return e=km,[4,R_(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.r_(),t.di.Ri(function(){return Object(Xs.b)(i,void 0,void 0,function(){var e;return Object(Xs.d)(this,function(n){switch(n.label){case 0:return e=jm,[4,R_(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(z_(c),l,h,u)}function Lb(t,e){return function(t,e){var n=this,r=new Kp;return t.di.Ri(function(){return Object(Xs.b)(n,void 0,void 0,function(){var n;return Object(Xs.d)(this,function(i){switch(i.label){case 0:return n=rv,[4,D_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(z_(t),e)}function Mb(t,e,n){var r=n.docs.get(e.Q_),i=new Nb(t);return new xb(t,i,e.Q_,r,new J_(n.hasPendingWrites,n.fromCache),e.W_)}var Fb=function(){function t(t,e,n){this.W_=e,this.Q_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"ef",{get:function(){return this.Q_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.Q_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.Q_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Xb(this.firestore,this.W_,this.Q_.path.q())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.Q_)},t}(),Vb=function(){function t(t,e,n){this.W_=e,this.Z_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.Z_)},t}(),Ub=function(){};function qb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.nf(t)}return t}var Hb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).sf=e,i.rf=n,i.cf=r,i.type="where",i}return Object(Xs.c)(e,t),e.prototype.nf=function(t){var e=i_(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.tt()){if("array-contains"===o||"array-contains-any"===o)throw new mh(yh.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Kb(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push($b(r,t,l[c]));a={arrayValue:{values:u}}}else a=$b(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Kb(s,o),a=p_(n,"where",s,"in"===o||"not-in"===o);var h=xp.create(i,o,a);return function(t,e){if(e.An()){var n=vp(t);if(null!==n&&!n.isEqual(e.field))throw new mh(yh.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=mp(t);null!==r&&Yb(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new mh(yh.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.Z_,0,e,t.firestore.A_,this.sf,this.rf,this.cf);return new Vb(t.firestore,t.W_,function(t,e){var n=t.filters.concat([e]);return new fp(t.path,t.collectionGroup,t.Tn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.Z_,n))},e}(Ub),zb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).sf=e,r.uf=n,r.type="orderBy",r}return Object(Xs.c)(e,t),e.prototype.nf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new mh(yh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new mh(yh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new qp(e,n);return function(t,e){if(null===mp(t)){var n=vp(t);null!==n&&Yb(0,n,e.field)}}(t,r),r}(t.Z_,this.sf,this.uf);return new Vb(t.firestore,t.W_,function(t,e){var n=t.Tn.concat([e]);return new fp(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.Z_,e))},e}(Ub),Bb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.af=n,i.hf=r,i}return Object(Xs.c)(e,t),e.prototype.nf=function(t){return new Vb(t.firestore,t.W_,Ep(t.Z_,this.af,this.hf))},e}(Ub),Qb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.lf=n,i._f=r,i}return Object(Xs.c)(e,t),e.prototype.nf=function(t){var e=Gb(t,this.type,this.lf,this._f);return new Vb(t.firestore,t.W_,function(t,e){return new fp(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.Z_,e))},e}(Ub),Wb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.lf=n,i._f=r,i}return Object(Xs.c)(e,t),e.prototype.nf=function(t){var e=Gb(t,this.type,this.lf,this._f);return new Vb(t.firestore,t.W_,function(t,e){return new fp(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.Z_,e))},e}(Ub);function Gb(t,e,n,r){if(n[0]instanceof fb&&(n[0]=n[0].o_),n[0]instanceof wb)return function(t,e,n,r,i){if(!r)throw new mh(yh.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=_p(t);s<a.length;s++){var u=a[s];if(u.field.tt())o.push(qf(e,r.key));else{var c=r.field(u.field);if(If(c))throw new mh(yh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.J();throw new mh(yh.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Mp(o,i)}(t.Z_,t.firestore.A_,e,n[0].K_,r);var i=i_(t.firestore);return function(t,e,n,r,i,o){var s=t.Tn;if(i.length>s.length)throw new mh(yh.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.tt()){if("string"!=typeof c)throw new mh(yh.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!bp(t)&&-1!==c.indexOf("/"))throw new mh(yh.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(jh.Y(c));if(!Dh.ot(l))throw new mh(yh.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Dh(l);a.push(qf(e,h))}else{var f=p_(n,r,c);a.push(f)}}return new Mp(a,o)}(t.Z_,t.firestore.A_,i,e,n,r)}function $b(t,e,n){if(n instanceof fb&&(n=n.o_),"string"==typeof n){if(""===n)throw new mh(yh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!bp(e)&&-1!==n.indexOf("/"))throw new mh(yh.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(jh.Y(n));if(!Dh.ot(r))throw new mh(yh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return qf(t,new Dh(r))}if(n instanceof Fb)return qf(t,n.Q_);throw new mh(yh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+tb(n)+".")}function Kb(t,e){if(!Array.isArray(t)||0===t.length)throw new mh(yh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new mh(yh.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Yb(t,e,n){if(!n.isEqual(e))throw new mh(yh.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Jb(t){if(yp(t)&&0===t.Tn.length)throw new mh(yh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,pp(r))||this).firestore=e,i.ef=r,i.type="collection",i}return Object(Xs.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Z_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Z_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.ef.q();return t.W()?null:new Fb(this.firestore,null,new Dh(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.ef)},e}(Vb);function Zb(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t instanceof fb&&(t=t.o_),Kv("collection","path",e),t instanceof gb){var i=jh.Y.apply(jh,Object(Xs.g)([e],n));return Zv(i),new Xb(t,null,i)}if(!(t instanceof Fb||t instanceof Xb))throw new mh(yh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=jh.Y.apply(jh,Object(Xs.g)([t.path],n)).child(jh.Y(e));return Zv(o),new Xb(t.firestore,null,o)}function t_(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t instanceof fb&&(t=t.o_),1===arguments.length&&(e=Oh.D()),Kv("doc","path",e),t instanceof gb){var i=jh.Y.apply(jh,Object(Xs.g)([e],n));return Xv(i),new Fb(t,null,new Dh(i))}if(!(t instanceof Fb||t instanceof Xb))throw new mh(yh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=t.ef.child(jh.Y.apply(jh,Object(Xs.g)([e],n)));return Xv(o),new Fb(t.firestore,t instanceof Xb?t.W_:null,new Dh(o))}var e_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Xs.c)(e,t),e.prototype.x_=function(t){return new hb(t)},e.prototype.F_=function(t){var e=this.L_(t,this.firestore.A_);return new Fb(this.firestore,null,e)},e}(bb);function n_(t,e){return t instanceof fb&&(t=t.o_),e instanceof fb&&(e=e.o_),(t instanceof Fb||t instanceof Xb)&&(e instanceof Fb||e instanceof Xb)&&t.firestore===e.firestore&&t.path===e.path&&t.W_===e.W_}function r_(t,e){return t instanceof fb&&(t=t.o_),e instanceof fb&&(e=e.o_),t instanceof Vb&&e instanceof Vb&&t.firestore===e.firestore&&Cp(t.Z_,e.Z_)&&t.W_===e.W_}function i_(t){var e=t.b_(),n=Yp(t.A_);return new l_(t.A_,!!e.ignoreUndefinedProperties,n)}var o_=/^__.*__$/,s_=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.tf=function(t,e){var n=[];return n.push(null!==this.en?new Xd(t,this.data,this.en,e):new Jd(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new tp(t,this.fieldTransforms)),n},t}(),a_=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.tf=function(t,e){var n=[new Xd(t,this.data,this.en,e)];return this.fieldTransforms.length>0&&n.push(new tp(t,this.fieldTransforms)),n},t}();function u_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dh()}}var c_=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ff(),this.fieldTransforms=i||[],this.en=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u_",{get:function(){return this.settings.u_},enumerable:!1,configurable:!0}),t.prototype.df=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.en)},t.prototype.wf=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.df({path:n,l_:!1});return r.Ef(t),r},t.prototype.Tf=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.df({path:n,l_:!1});return r.ff(),r},t.prototype.If=function(t){return this.df({path:void 0,l_:!0})},t.prototype.a_=function(t){return E_(t,this.settings.methodName,this.settings.mf||!1,this.path,this.settings.h_)},t.prototype.contains=function(t){return void 0!==this.en.find(function(e){return t.j(e)})||void 0!==this.fieldTransforms.find(function(e){return t.j(e.field)})},t.prototype.ff=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Ef(this.path.get(t))},t.prototype.Ef=function(t){if(0===t.length)throw this.a_("Document fields must not be empty");if(u_(this.u_)&&o_.test(t))throw this.a_('Document fields cannot begin and end with "__"')},t}(),l_=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||Yp(t)}return t.prototype.Af=function(t,e,n,r){return void 0===r&&(r=!1),new c_({u_:t,methodName:e,h_:n,path:Nh.X(),l_:!1,mf:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function h_(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Af(o.merge||o.mergeFields?2:0,e,n,i);v_("Data must be an object, but it was:",s,r);var a,u,c=y_(r,s);if(o.merge)a=new Ud(s.en),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=b_(e,f[h],n);if(!s.contains(d))throw new mh(yh.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");C_(l,d)||l.push(d)}a=new Ud(l),u=s.fieldTransforms.filter(function(t){return a.un(t.field)})}else a=null,u=s.fieldTransforms;return new s_(new op(c),a,u)}function f_(t,e,n,r){var i=t.Af(1,e,n);v_("Data must be an object, but it was:",i,r);var o=[],s=new sp;Tf(r,function(t,r){var a=w_(e,t,n);r instanceof fb&&(r=r.o_);var u=i.Tf(a);if(r instanceof ib)o.push(a);else{var c=g_(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Ud(o);return new a_(s.hn(),a,i.fieldTransforms)}function d_(t,e,n,r,i,o){var s=t.Af(1,e,n),a=[b_(e,r,n)],u=[i];if(o.length%2!=0)throw new mh(yh.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(b_(e,o[c])),u.push(o[c+1]);for(var l=[],h=new sp,f=a.length-1;f>=0;--f)if(!C_(l,a[f])){var d=a[f],p=u[f];p instanceof fb&&(p=p.o_);var g=s.Tf(d);if(p instanceof ib)l.push(d);else{var y=g_(p,g);null!=y&&(l.push(d),h.set(d,y))}}var m=new Ud(l);return new a_(h.hn(),m,s.fieldTransforms)}function p_(t,e,n,r){return void 0===r&&(r=!1),g_(n,t.Af(r?4:3,e))}function g_(t,e){if(t instanceof fb&&(t=t.o_),m_(t))return v_("Unsupported field value:",e,t),y_(t,e);if(t instanceof rb)return function(t,e){if(!u_(e.u_))throw e.a_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.a_(t._methodName+"() is not currently supported inside arrays");var n=t.c_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.en.push(e.path),t instanceof Array){if(e.settings.l_&&4!==e.u_)throw e.a_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=g_(o[i],e.If(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof fb&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Xf(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=xh.fromDate(t);return{timestampValue:Zf(e.serializer,n)}}if(t instanceof xh){var r=new xh(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zf(e.serializer,r)}}if(t instanceof lb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hb)return{bytesValue:td(e.serializer,t.E_)};if(t instanceof Fb){var i=e.t,o=t.firestore.A_;if(!o.isEqual(i))throw e.a_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:rd(t.firestore.A_||e.t,t.Q_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.a_("Unsupported field value: "+tb(t))}(t,e)}function y_(t,e){var n={};return Sf(t)?e.path&&e.path.length>0&&e.en.push(e.path):Tf(t,function(t,r){var i=g_(r,e.wf(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function m_(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof xh||t instanceof lb||t instanceof hb||t instanceof Fb||t instanceof rb)}function v_(t,e,n){if(!m_(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=tb(n);throw e.a_("an object"===r?t+" a custom object":t+" "+r)}}function b_(t,e,n){if(e instanceof fb&&(e=e.o_),e instanceof Ob)return e.j_;if("string"==typeof e)return w_(t,e);throw E_("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var __=new RegExp("[~\\*/\\[\\]]");function w_(t,e,n){if(e.search(__)>=0)throw E_("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Ob.bind.apply(Ob,Object(Xs.g)([void 0],e.split("."))))).j_}catch(r){throw E_("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function E_(t,e,n,r,i){var o=r&&!r.W(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new mh(yh.INVALID_ARGUMENT,(a+=". ")+t+u)}function C_(t,e){return t.some(function(t){return t.isEqual(e)})}var O_=function(){function t(t){this.Mu=t,this.Rf=new Map,this.mutations=[],this.Pf=!1,this.gf=null,this.yf=new Set}return t.prototype.Vf=function(t){return Object(Xs.b)(this,void 0,void 0,function(){var e,n=this;return Object(Xs.d)(this,function(r){switch(r.label){case 0:if(this.pf(),this.mutations.length>0)throw new mh(yh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Xs.d)(this,function(u){switch(u.label){case 0:return n=gh(t),r=cd(n.serializer)+"/documents",i={documents:e.map(function(t){return od(n.serializer,t)})},[4,n.Vu("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){ph(!!e.found);var n=sd(t,e.found.name),r=nd(e.found.updateTime),i=new op({mapValue:{fields:e.found.fields}});return new cp(n,r,i,{})}(t,e):"missing"in e?function(t,e){ph(!!e.missing),ph(!!e.readTime);var n=sd(t,e.missing),r=nd(e.readTime);return new lp(n,r)}(t,e):dh()}(n.serializer,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());ph(!!e),a.push(e)}),a)]}})})}(this.Mu,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof lp||t instanceof cp?n.vf(t):dh()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.tf(t,this.rn(t))),this.yf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.tf(t,this.bf(t)))}catch(t){this.gf=t}this.yf.add(t.toString())},t.prototype.delete=function(t){this.write([new rp(t,this.rn(t))]),this.yf.add(t.toString())},t.prototype.commit=function(){return Object(Xs.b)(this,void 0,void 0,function(){var t,e=this;return Object(Xs.d)(this,function(n){switch(n.label){case 0:if(this.pf(),this.gf)throw this.gf;return t=this.Rf,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Dh.st(n);e.mutations.push(new ip(r,e.rn(r)))}),[4,function(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r,i;return Object(Xs.d)(this,function(o){switch(o.label){case 0:return n=gh(t),r=cd(n.serializer)+"/documents",i={writes:e.map(function(t){return fd(n.serializer,t)})},[4,n.yu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Mu,this.mutations)];case 1:return n.sent(),this.Pf=!0,[2]}})})},t.prototype.vf=function(t){var e;if(t instanceof cp)e=t.version;else{if(!(t instanceof lp))throw dh();e=Ah.min()}var n=this.Rf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new mh(yh.ABORTED,"Document version changed between two reads.")}else this.Rf.set(t.key.toString(),e)},t.prototype.rn=function(t){var e=this.Rf.get(t.toString());return!this.yf.has(t.toString())&&e?zd.updateTime(e):zd.on()},t.prototype.bf=function(t){var e=this.Rf.get(t.toString());if(!this.yf.has(t.toString())&&e){if(e.isEqual(Ah.min()))throw new mh(yh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zd.updateTime(e)}return zd.exists(!0)},t.prototype.write=function(t){this.pf(),this.mutations=this.mutations.concat(t)},t.prototype.pf=function(){},t}(),T_=function(){function t(t,e,n,r){this.di=t,this.Mu=e,this.updateFunction=n,this.Ti=r,this.Sf=5,this.Si=new rg(this.di,"transaction_retry")}return t.prototype.run=function(){this.Df()},t.prototype.Df=function(){var t=this;this.Si.Bs(function(){return Object(Xs.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Xs.d)(this,function(r){return t=new O_(this.Mu),(e=this.Cf(t))&&e.then(function(e){n.di.Ri(function(){return t.commit().then(function(){n.Ti.resolve(e)}).catch(function(t){n.Nf(t)})})}).catch(function(t){n.Nf(t)}),[2]})})})},t.prototype.Cf=function(t){try{var e=this.updateFunction(t);return!Rh(e)&&e.catch&&e.then?e:(this.Ti.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ti.reject(t),null}},t.prototype.Nf=function(t){var e=this;this.Sf>0&&this.xf(t)?(this.Sf-=1,this.di.Ri(function(){return e.Df(),Promise.resolve()})):this.Ti.reject(t)},t.prototype.xf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!$h(e)}return!1},t}(),S_=function(){function t(t,e,n){var r=this;this.credentials=t,this.di=e,this.Fl=n,this.user=sh.UNAUTHENTICATED,this.clientId=Oh.D(),this.Ff=function(){},this.g=new Kp,this.credentials.A(function(t){ch("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.Ff(t)),r.g.resolve()})}return t.prototype.getConfiguration=function(){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(t){switch(t.label){case 0:return[4,this.g.promise];case 1:return[2,(t.sent(),{di:this.di,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,qh:100})]}})})},t.prototype.Of=function(t){var e=this;this.Ff=t,this.g.promise.then(function(){return e.Ff(e.user)})},t.prototype.Mf=function(){if(this.di.Ci)throw new mh(yh.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.di.Oi();var e=new Kp;return this.di.Ni(function(){return Object(Xs.b)(t,void 0,void 0,function(){var t,n;return Object(Xs.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.kf?[4,this.kf.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.$f?[4,this.$f.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.R(),e.resolve(),[3,6];case 5:return t=r.sent(),n=mg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function I_(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r=this;return Object(Xs.d)(this,function(i){switch(i.label){case 0:return t.di.Li(),ch("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=i.sent(),[4,e.initialize(n)];case 2:return i.sent(),t.Of(function(n){return t.di.Mi(function(){return Object(Xs.b)(r,void 0,void 0,function(){return Object(Xs.d)(this,function(t){switch(t.label){case 0:return[4,Vy(e.Ou,n)];case 1:return t.sent(),[2]}})})})}),e.persistence.rc(function(){return t.terminate()}),t.$f=e,[2]}})})}function x_(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r;return Object(Xs.d)(this,function(i){switch(i.label){case 0:return t.di.Li(),[4,A_(t)];case 1:return n=i.sent(),ch("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.Of(function(n){return t.di.Mi(function(){return function(t,e){return Object(Xs.b)(this,void 0,void 0,function(){var n,r;return Object(Xs.d)(this,function(i){switch(i.label){case 0:return(n=gh(t)).di.Li(),ch("RemoteStore","RemoteStore received new credentials"),r=hm(n),n.Bu.add(3),[4,im(n)];case 1:return i.sent(),r&&n.Ku.set("Unknown"),[4,n.ku.s_(e)];case 2:return i.sent(),n.Bu.delete(3),[4,rm(n)];case 3:return i.sent(),[2]}})})}(e.$h,n)})}),t.kf=e,[2]}})})}function A_(t){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(e){switch(e.label){case 0:return t.$f?[3,2]:(ch("FirestoreClient","Using default OfflineComponentProvider"),[4,I_(t,new Bv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.$f]}})})}function k_(t){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(e){switch(e.label){case 0:return t.kf?[3,2]:(ch("FirestoreClient","Using default OnlineComponentProvider"),[4,x_(t,new Gv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.kf]}})})}function j_(t){return A_(t).then(function(t){return t.persistence})}function P_(t){return A_(t).then(function(t){return t.Ou})}function N_(t){return k_(t).then(function(t){return t.$h})}function D_(t){return k_(t).then(function(t){return t.va})}function R_(t){return Object(Xs.b)(this,void 0,void 0,function(){var e,n;return Object(Xs.d)(this,function(r){switch(r.label){case 0:return[4,k_(t)];case 1:return e=r.sent(),[2,((n=e.Lh).ta=tv.bind(null,e.va),n.sa=nv.bind(null,e.va),n)]}})})}function L_(t,e,n){var r=this;void 0===n&&(n={});var i=new Kp;return t.di.Ri(function(){return Object(Xs.b)(r,void 0,void 0,function(){var r;return Object(Xs.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new $v({next:function(o){e.Ri(function(){return jm(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new mh(yh.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new mh(yh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Rm(pp(n.path),o,{includeMetadataChanges:!0,ha:!0});return km(t,s)},[4,R_(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.di,e,n,i])]}})})}),i.promise}function M_(t,e,n){var r=this;void 0===n&&(n={});var i=new Kp;return t.di.Ri(function(){return Object(Xs.b)(r,void 0,void 0,function(){var r;return Object(Xs.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new $v({next:function(n){e.Ri(function(){return jm(t,s)}),n.fromCache&&"server"===r.source?i.reject(new mh(yh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Rm(n,o,{includeMetadataChanges:!0,ha:!0});return km(t,s)},[4,R_(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.di,e,n,i])]}})})}),i.promise}var F_=function(){function t(t,e){this.q_=t,this.Lf=e,this.Bf=[],this.qf=!1,this.Uf=i_(t)}return t.prototype.set=function(t,e,n){this.Qf();var r=V_(t,this.q_),i=ow(r.W_,e,n),o=h_(this.Uf,"WriteBatch.set",r.Q_,i,null!==r.W_,n);return this.Bf=this.Bf.concat(o.tf(r.Q_,zd.on())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Qf();var o,s=V_(t,this.q_);return e instanceof fb&&(e=e.o_),o="string"==typeof e||e instanceof Ob?d_(this.Uf,"WriteBatch.update",s.Q_,e,n,r):f_(this.Uf,"WriteBatch.update",s.Q_,e),this.Bf=this.Bf.concat(o.tf(s.Q_,zd.exists(!0))),this},t.prototype.delete=function(t){this.Qf();var e=V_(t,this.q_);return this.Bf=this.Bf.concat(new rp(e.Q_,zd.on())),this},t.prototype.commit=function(){return this.Qf(),this.qf=!0,this.Bf.length>0?this.Lf(this.Bf):Promise.resolve()},t.prototype.Qf=function(){if(this.qf)throw new mh(yh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function V_(t,e){if(t instanceof fb&&(t=t.o_),t.firestore!==e)throw new mh(yh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var U_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).q_=e,r}return Object(Xs.c)(e,t),e.prototype.get=function(e){var n=this,r=V_(e,this.q_),i=new Nb(this.q_);return t.prototype.get.call(this,e).then(function(t){return new xb(n.q_,i,r.Q_,t.K_,new J_(!1,!1),r.W_)})},e}(function(){function t(t,e){this.q_=t,this.Kf=e,this.Uf=i_(t)}return t.prototype.get=function(t){var e=this,n=V_(t,this.q_),r=new e_(this.q_);return this.Kf.Vf([n.Q_]).then(function(t){if(!t||1!==t.length)return dh();var i=t[0];if(i instanceof lp)return new wb(e.q_,r,n.Q_,null,n.W_);if(i instanceof cp)return new wb(e.q_,r,i.key,i,n.W_);throw dh()})},t.prototype.set=function(t,e,n){var r=V_(t,this.q_),i=ow(r.W_,e,n),o=h_(this.Uf,"Transaction.set",r.Q_,i,null!==r.W_,n);return this.Kf.set(r.Q_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=V_(t,this.q_);return e instanceof fb&&(e=e.o_),o="string"==typeof e||e instanceof Ob?d_(this.Uf,"Transaction.update",s.Q_,e,n,r):f_(this.Uf,"Transaction.update",s.Q_,e),this.Kf.update(s.Q_,o),this},t.prototype.delete=function(t){var e=V_(t,this.q_);return this.Kf.delete(e.Q_),this},t}()),q_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Ib(t=eb(t,Tb));var n=z_(t),r=t.b_(),i=new Gv;return Sb(n,i,new Qv(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Ib(t=eb(t,Tb));var e=z_(t),n=t.b_(),r=new Gv;return Sb(e,r,new Wv(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.g_&&!t.y_)throw new mh(yh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Kp;return t.G_.Ni(function(){return Object(Xs.b)(e,void 0,void 0,function(){var e;return Object(Xs.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Xs.b)(this,void 0,void 0,function(){return Object(Xs.d)(this,function(e){switch(e.label){case 0:return ig.Gs()?[4,ig.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Ly(t.A_,t.T_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.o_)},t}(),H_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Wf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof oh||(i.jf=e),i}return Object(Xs.c)(e,t),Object.defineProperty(e.prototype,"A_",{get:function(){return this.o_.A_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.v_()),t)).merge,this.o_.p_(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.v_().host&&hh("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.di.enqueue(function(){return Object(Xs.b)(e,void 0,void 0,function(){var e,n;return Object(Xs.d)(this,function(r){switch(r.label){case 0:return[4,j_(t)];case 1:return e=r.sent(),[4,N_(t)];case 2:return n=r.sent(),[2,(e.oc(!0),function(t){var e=gh(t);return e.Bu.delete(0),rm(e)}(n))]}})})})}(z_(eb(this.o_,Tb)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.di.enqueue(function(){return Object(Xs.b)(e,void 0,void 0,function(){var e,n;return Object(Xs.d)(this,function(r){switch(r.label){case 0:return[4,j_(t)];case 1:return e=r.sent(),[4,N_(t)];case 2:return n=r.sent(),[2,(e.oc(!1),function(t){return Object(Xs.b)(this,void 0,void 0,function(){var e;return Object(Xs.d)(this,function(n){switch(n.label){case 0:return(e=gh(t)).Bu.add(0),[4,im(e)];case 1:return n.sent(),e.Ku.set("Offline"),[2]}})})}(n))]}})})})}(z_(eb(this.o_,Tb)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Jv("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Wf.enableMultiTabIndexedDbPersistence(this):this.Wf.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Wf.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Kp;return t.di.Ri(function(){return Object(Xs.b)(e,void 0,void 0,function(){var e;return Object(Xs.d)(this,function(r){switch(r.label){case 0:return e=cv,[4,D_(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(z_(eb(this.o_,Tb)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new $v(e);return t.di.Ri(function(){return Object(Xs.b)(n,void 0,void 0,function(){var e;return Object(Xs.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){gh(t).Zu.add(e),e.next()},[4,R_(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.r_(),t.di.Ri(function(){return Object(Xs.b)(n,void 0,void 0,function(){var e;return Object(Xs.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){gh(t).Zu.delete(e)},[4,R_(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(z_(t=eb(t,Tb)),Jp(e)?e:{next:e})}(this.o_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.jf)throw new mh(yh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.jf},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new rw(this,Zb(this.o_,t))}catch(t){throw $_(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new G_(this,t_(this.o_,t))}catch(t){throw $_(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new tw(this,function(t,e){if(t=eb(t,gb),Kv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new mh(yh.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Vb(t,null,function(t){return new fp(jh.X(),t)}(e))}(this.o_,t))}catch(t){throw $_(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Kp;return t.di.Ri(function(){return Object(Xs.b)(n,void 0,void 0,function(){var n;return Object(Xs.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return k_(t).then(function(t){return t.Mu})}(t)];case 1:return n=i.sent(),new T_(t.di,n,e,r).run(),[2]}})})}),r.promise}(z_(t),function(n){return e(new U_(t,n))})}(this.o_,function(n){return t(new Q_(e,n))})},e.prototype.batch=function(){var t=this;return z_(this.o_),new W_(new F_(this.o_,function(e){return Lb(t.o_,e)}))},e}(fb);function z_(t){return t.z_||B_(t),t.z_.Mf(),t.z_}function B_(t){var e=t.b_(),n=function(t,e,n){return new ih(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.A_,t.T_,e);t.z_=new S_(t.R_,t.G_,n)}var Q_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).q_=e,r}return Object(Xs.c)(e,t),e.prototype.get=function(t){var e=this,n=iw(t);return this.o_.get(n).then(function(t){return new X_(e.q_,t)})},e.prototype.set=function(t,e,n){var r=iw(t);return n?(Yv("Transaction.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=iw(t);return 2===arguments.length?this.o_.update(s,e):(r=this.o_).update.apply(r,Object(Xs.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=iw(t);return this.o_.delete(e),this},e}(fb),W_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xs.c)(e,t),e.prototype.set=function(t,e,n){var r=iw(t);return n?(Yv("WriteBatch.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=iw(t);return 2===arguments.length?this.o_.update(s,e):(r=this.o_).update.apply(r,Object(Xs.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=iw(t);return this.o_.delete(e),this},e.prototype.commit=function(){return this.o_.commit()},e}(fb),G_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.U_=new _b(e),r}return Object(Xs.c)(e,t),e.Gf=function(t,n,r){if(t.length%2!=0)throw new mh(yh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.J()+" has "+t.length);return new e(n,new Fb(n.o_,r,new Dh(t)))},e.B_=function(t,n,r){return new e(n,new Fb(n.o_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new rw(this.firestore,this.o_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new rw(this.firestore,Zb(this.o_,t))}catch(t){throw $_(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof fb&&(t=t.o_),t instanceof Fb&&n_(this.o_,t)},e.prototype.set=function(t,e){e=Yv("DocumentReference.set",e);try{return function(t,e,n){t=eb(t,Fb);var r=eb(t.firestore,Tb),i=ow(t.W_,e,n);return Lb(r,h_(i_(r),"setDoc",t.Q_,i,null!==t.W_,n).tf(t.Q_,zd.on()))}(this.o_,t,e)}catch(t){throw $_(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Db(this.o_,t):Db.apply(void 0,Object(Xs.g)([this.o_,t,e],n))}catch(t){throw $_(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Lb(eb((t=this.o_).firestore,Tb),[new rp(t.Q_,zd.on())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=K_(e),i=Y_(e,function(e){return new X_(t.firestore,new xb(t.firestore.o_,t.U_,e.Q_,e.K_,e.metadata,t.o_.W_))});return Rb(this.o_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=eb(t,Fb);var e=eb(t.firestore,Tb),n=z_(e),r=new Nb(e);return function(t,e){var n=this,r=new Kp;return t.di.Ri(function(){return Object(Xs.b)(n,void 0,void 0,function(){var n;return Object(Xs.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Xs.b)(this,void 0,void 0,function(){var r,i,o;return Object(Xs.d)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=gh(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Bc.cs(t,e)})}(t,e)];case 1:return(r=s.sent())instanceof cp?n.resolve(r):r instanceof lp?n.resolve(null):n.reject(new mh(yh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=mg(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}})})},[4,P_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.Q_).then(function(n){return new xb(e,r,t.Q_,n,new J_(n instanceof cp&&n.an,!0),t.W_)})}(this.o_):"server"===(null==t?void 0:t.source)?function(t){t=eb(t,Fb);var e=eb(t.firestore,Tb);return L_(z_(e),t.Q_,{source:"server"}).then(function(n){return Mb(e,t,n)})}(this.o_):function(t){t=eb(t,Fb);var e=eb(t.firestore,Tb);return L_(z_(e),t.Q_).then(function(n){return Mb(e,t,n)})}(this.o_)).then(function(t){return new X_(e.firestore,new xb(e.firestore.o_,e.U_,t.Q_,t.K_,t.metadata,e.o_.W_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(fb);function $_(t,e,n){return t.message=t.message.replace(e,n),t}function K_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Jp(r))return r}return{}}function Y_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Jp(t[0])?t[0]:Jp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var J_=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),X_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).q_=e,r}return Object(Xs.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new G_(this.q_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.o_.data(t)},e.prototype.get=function(t,e){return this.o_.get(t,e)},e.prototype.isEqual=function(t){return Pb(this.o_,t.o_)},e}(fb),Z_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xs.c)(e,t),e.prototype.data=function(t){return this.o_.data(t)},e}(X_),tw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.U_=new _b(e),r}return Object(Xs.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,qb(this.o_,function(t,e,n){var r=e,i=Cb("where",t);return new Hb(i,r,n)}(t,n,r)))}catch(t){throw $_(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,qb(this.o_,function(t,e){void 0===e&&(e="asc");var n=e,r=Cb("orderBy",t);return new zb(r,n)}(t,n)))}catch(t){throw $_(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,qb(this.o_,function(t){return nb("limit",t),new Bb("limit",t,"F")}(t)))}catch(t){throw $_(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,qb(this.o_,function(t){return nb("limitToLast",t),new Bb("limitToLast",t,"L")}(t)))}catch(t){throw $_(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qb(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qb("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw $_(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qb(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qb("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw $_(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qb(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wb("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw $_(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,qb(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wb("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw $_(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return r_(this.o_,t.o_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=eb(t,Vb);var e=eb(t.firestore,Tb),n=z_(e),r=new Nb(e);return function(t,e){var n=this,r=new Kp;return t.di.Ri(function(){return Object(Xs.b)(n,void 0,void 0,function(){var n;return Object(Xs.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Xs.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Xs.d)(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,Wy(t,e,!0)];case 1:return r=c.sent(),i=new Ym(e,r.Kc),o=i.bh(r.documents),s=i.Zn(o,!1),n.resolve(s.snapshot),[3,3];case 2:return a=c.sent(),u=mg(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}})})},[4,P_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.Z_).then(function(n){return new kb(e,r,t,n)})}(this.o_):"server"===(null==t?void 0:t.source)?function(t){t=eb(t,Vb);var e=eb(t.firestore,Tb),n=z_(e),r=new Nb(e);return M_(n,t.Z_,{source:"server"}).then(function(n){return new kb(e,r,t,n)})}(this.o_):function(t){t=eb(t,Vb);var e=eb(t.firestore,Tb),n=z_(e),r=new Nb(e);return Jb(t.Z_),M_(n,t.Z_).then(function(n){return new kb(e,r,t,n)})}(this.o_)).then(function(t){return new nw(e.firestore,new kb(e.firestore.o_,e.U_,e.o_,t.J_))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=K_(e),i=Y_(e,function(e){return new nw(t.firestore,new kb(t.firestore.o_,t.U_,t.o_,e.J_))});return Rb(this.o_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(fb),ew=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).q_=e,r}return Object(Xs.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Z_(this.q_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.o_.newIndex},enumerable:!1,configurable:!0}),e}(fb),nw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).q_=e,r}return Object(Xs.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new tw(this.q_,this.o_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map(function(e){return new Z_(t.q_,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map(function(t){return new ew(e.q_,t)})},e.prototype.forEach=function(t,e){var n=this;this.o_.forEach(function(r){t.call(e,new Z_(n.q_,r))})},e.prototype.isEqual=function(t){return Pb(this.o_,t.o_)},e}(fb),rw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.o_=n,r}return Object(Xs.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.o_.parent;return t?new G_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new G_(this.firestore,void 0===t?t_(this.o_):t_(this.o_,t))}catch(t){throw $_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=eb(t.firestore,Tb),r=t_(t),i=ow(t.W_,e);return Lb(n,h_(i_(t.firestore),"addDoc",r.Q_,i,null!==t.W_,{}).tf(r.Q_,zd.exists(!1))).then(function(){return r})}(this.o_,t).then(function(t){return new G_(e.firestore,t)})},e.prototype.isEqual=function(t){return n_(this.o_,t.o_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(tw);function iw(t){return t instanceof fb&&(t=t.o_),eb(t,Fb)}function ow(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var sw,aw=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Ob.bind.apply(Ob,Object(Xs.g)([void 0],e))))||this}return Object(Xs.c)(e,t),e.documentId=function(){return new e(Nh.et().J())},e.prototype.isEqual=function(t){return t instanceof fb&&(t=t.o_),t instanceof Ob&&this.o_.j_.isEqual(t.j_)},e}(fb),uw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Xs.c)(e,t),e.serverTimestamp=function(){var t=new sb("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new ib("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ab("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ub("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new cb("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e}(fb),cw={Firestore:H_,GeoPoint:lb,Timestamp:xh,Blob:vb,Transaction:Q_,WriteBatch:W_,DocumentReference:G_,DocumentSnapshot:X_,Query:tw,QueryDocumentSnapshot:Z_,QuerySnapshot:nw,CollectionReference:rw,FieldPath:aw,FieldValue:uw,setLogLevel:function(t){ah.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function lw(t,e){return function(t,e=to.a){return new Ot.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function hw(t,e){return lw(t,e).pipe(Object(xt.a)(t=>({payload:t,type:"query"})))}function fw(t,e){return hw(t,e).pipe(De(void 0),Ks(),Object(xt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function dw(t,e,n){return fw(t,n).pipe(Re((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return pw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return pw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),no(),Object(xt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function pw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function gw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new rh.a("firestore",function(t){return function(t,e){return new H_(t,new Tb(t,e),new q_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},cw)))})(sw=Zs.a),sw.registerVersion("@firebase/firestore","2.0.5");class yw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=fw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(xt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(De(void 0),Ks(),Ht(([t,e])=>e.length>0||!t),Object(xt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Re((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=gw(t);return dw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return hw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(xt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Tt.a)(this.query.get(t)).pipe(Object(It.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new mw(this.ref.doc(t),this.afs)}}class mw{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Cw(n,e);return new yw(r,i,this.afs)}snapshotChanges(){return lw(this.ref,this.afs.schedulers.outsideAngular).pipe(De(void 0),Ks(),Object(xt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(xt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Tt.a)(this.ref.get(t)).pipe(Object(It.b)(this.afs.schedulers.insideAngular))}}class vw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?fw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(xt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Ht(t=>t.length>0),this.afs.keepUnstableUntilFirst):fw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Re((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=gw(t);return dw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return hw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(xt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Tt.a)(this.query.get(t)).pipe(Object(It.b)(this.afs.schedulers.insideAngular))}}const bw=new r.q("angularfire2.enableFirestorePersistence"),_w=new r.q("angularfire2.firestore.persistenceSettings"),ww=new r.q("angularfire2.firestore.settings"),Ew=new r.q("angularfire2.firestore.use-emulator");function Cw(t,e=(t=>t)){return{query:e(t),ref:t}}let Ow=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new ae.d(o),this.keepUnstableUntilFirst=Object(ae.h)(this.schedulers);const c=Object(ae.g)(t,o,e);!co.a.auth&&u&&Object(ae.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(ae.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!q(i)){const e=()=>{try{return Object(Tt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(e){return"undefined"!=typeof console&&console.warn(e),Object(Ct.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Ct.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Cw(n,e),o=this.schedulers.ngZone.run(()=>r);return new yw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new vw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new mw(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(ae.c),r.Qb(ae.b,8),r.Qb(bw,8),r.Qb(ww,8),r.Qb(r.B),r.Qb(r.z),r.Qb(_w,8),r.Qb(Ew,8),r.Qb(ue,8))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Qb)(ae.c),Object(r.Qb)(ae.b,8),Object(r.Qb)(bw,8),Object(r.Qb)(ww,8),Object(r.Qb)(r.B),Object(r.Qb)(r.z),Object(r.Qb)(_w,8),Object(r.Qb)(Ew,8),Object(r.Qb)(ue,8))},token:t,providedIn:"any"}),t})(),Tw=(()=>{class t{constructor(t){this.firestore=t}getUsuarios(){return this.firestore.collection("usuarios").snapshotChanges()}createUsers(t){return this.firestore.collection("usuarios").add(t)}updateUsers(t){delete t.uid,this.firestore.doc("usuarios/"+t.uid).update(t)}deleteUsers(t){this.firestore.doc("usuarios/"+t).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ow))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Sw(t,e){if(1&t){const t=r.Nb();r.Mb(0,"div"),r.Mb(1,"h1"),r.lc(2),r.Lb(),r.Mb(3,"button",7),r.Tb("click",function(){return r.gc(t),r.Xb(2).logOut()}),r.lc(4," Logout "),r.Lb(),r.Lb()}if(2&t){const t=r.Xb().ngIf;r.yb(2),r.nc(" Hola ",t.email,"")}}function Iw(t,e){if(1&t){const t=r.Nb();r.Mb(0,"h1"),r.lc(1),r.Lb(),r.Mb(2,"button",7),r.Tb("click",function(){return r.gc(t),r.Xb(2).logOut()}),r.lc(3," Logout "),r.Lb()}if(2&t){const t=r.Xb().ngIf;r.yb(1),r.nc(" Hola ",t.displayName,"")}}function xw(t,e){if(1&t&&(r.Mb(0,"div",4),r.jc(1,Sw,5,1,"div",5),r.jc(2,Iw,4,1,"ng-template",null,6,r.kc),r.Lb()),2&t){const t=e.ngIf,n=r.fc(3);r.yb(1),r.cc("ngIf",null==t.displayName)("ngIfElse",n)}}function Aw(t,e){if(1&t){const t=r.Nb();r.Mb(0,"div",8),r.Mb(1,"div",9),r.Kb(2,"img",10),r.Mb(3,"h1",11),r.lc(4," Login "),r.Lb(),r.Lb(),r.Mb(5,"div"),r.Mb(6,"form",12),r.Tb("ngSubmit",function(){return r.gc(t),r.Xb().loginEmail()}),r.Mb(7,"div",13),r.Mb(8,"label",14),r.lc(9,"Email: "),r.Lb(),r.Kb(10,"input",15),r.Lb(),r.Mb(11,"div",16),r.Mb(12,"label"),r.lc(13,"Contrase\xf1a: "),r.Lb(),r.Kb(14,"input",17),r.Lb(),r.Mb(15,"button",18),r.lc(16,"Acceder"),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(17,"div",19),r.Mb(18,"p"),r.lc(19,"O puedes acceder mediante"),r.Lb(),r.Mb(20,"button",20),r.Tb("click",function(){return r.gc(t),r.Xb().loginGoogle()}),r.Kb(21,"img",21),r.Lb(),r.Mb(22,"button",20),r.Tb("click",function(){return r.gc(t),r.Xb().loginFacebook()}),r.Kb(23,"img",22),r.Lb(),r.Lb()}if(2&t){const t=r.Xb();r.yb(6),r.cc("formGroup",t.loginForm)}}let kw=(()=>{class t{constructor(t,e,n,r,i){this.auth=t,this.titulo=e,this.router=n,this.usuario=r,this.db=i,this.loginForm=this.createFormGroup()}createFormGroup(){return new Ls({email:new Rs("",[Ho.required,Ho.minLength(5)]),password:new Rs("",[Ho.required,Ho.minLength(5)])})}loginGoogle(){this.auth.signInWithPopup(new co.a.auth.GoogleAuthProvider).then(t=>{this.credenciales=t.user,this.updateUserData(this.credenciales),console.log(this.credenciales),this.router.navigate(["/tablones"])})}loginFacebook(){this.auth.signInWithPopup(new co.a.auth.FacebookAuthProvider).then(t=>{this.updateUserData(t.user),this.router.navigate(["/tablones"])}).catch(function(t){console.log(t)})}loginEmail(){this.loginEmailAndPassword({email:this.loginForm.controls.email.value,password:this.loginForm.controls.password.value})}loginEmailAndPassword({email:t,password:e}){console.log("prueba de que entra"),this.auth.signInWithEmailAndPassword(t,e).then(t=>{this.updateUserData(t.user),console.log(t.user),this.router.navigate(["/tablones"])}).catch(function(t){console.log(t)})}updateUserData(t){const e=this.db.doc("usuarios/"+t.uid);console.log("usuario/"+e);const n={uid:t.uid,displayName:t.displayName,email:t.email};return console.log("he llegado aqui"),e.set(n,{merge:!0})}logOut(){this.auth.signOut()}ngOnInit(){}formReset(){this.loginForm.reset()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(pe),r.Jb(wt),r.Jb(vi),r.Jb(Tw),r.Jb(Ow))},t.\u0275cmp=r.Db({type:t,selectors:[["app-login"]],decls:6,vars:4,consts:[[1,"logueo"],[1,"container"],["class","saludo",4,"ngIf","ngIfElse"],["showLogin",""],[1,"saludo"],[4,"ngIf","ngIfElse"],["showName",""],[1,"logout",3,"click"],[1,"muestraLogin"],[1,"logo"],["src","../../assets/type-it-final-final.png"],[1,"titulo",2,"font-size","50px"],[3,"formGroup","ngSubmit"],[1,"correo","row"],[1,"campo-email"],["type","email","name","Email","formControlName","email","placeholder","Correo Electronico","required",""],[1,"pass","row"],["type","password","name","Password","formControlName","password","placeholder","Contrase\xf1a","required",""],["id","logeando",1,"acceder"],[1,"acceso-mediante"],[3,"click"],["src","../../assets/logo-google.png","width","75x"],["src","../../assets/facebook icon.png","width","75px"]],template:function(t,e){if(1&t&&(r.Mb(0,"div",0),r.Mb(1,"div",1),r.jc(2,xw,4,2,"div",2),r.Yb(3,"async"),r.jc(4,Aw,24,1,"ng-template",null,3,r.kc),r.Lb(),r.Lb()),2&t){const t=r.fc(5);r.yb(2),r.cc("ngIf",r.Zb(3,2,e.auth.user))("ngIfElse",t)}},directives:[P,Fs,os,qs,Lo,is,zs,Qs],pipes:[V],styles:["@font-face{font-family:Sketch_3D;src:url(Sketch_3D.8031f9716778868bc1ee.woff)}.logo[_ngcontent-%COMP%], .logueo[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center}.logo[_ngcontent-%COMP%]{font-family:Sketch_3D;font-size:40px;padding:2vh;flex:50%;text-shadow:2px 2px 5px beige}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:85px;filter:invert(.92) drop-shadow(2px 2px 5px beige)}.correo[_ngcontent-%COMP%]{margin:5vh 2vh 2vh}.correo[_ngcontent-%COMP%], .pass[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center}.pass[_ngcontent-%COMP%]{position:relative;left:-25px;background-position-x:right;margin-bottom:1vh}.saludo[_ngcontent-%COMP%]{font-family:Sketch_3D;display:flex;flex:50%;justify-content:center;text-align:center;text-shadow:2px 2px 5px beige}.logout[_ngcontent-%COMP%]{padding:3px 12px 3px 15px;font-weight:250;font-size:15px;color:#fff;border-radius:15px;border:3px double beige}.acceder[_ngcontent-%COMP%], .logout[_ngcontent-%COMP%]{font-family:Sketch_3D;margin:6vh 2vh 2vh;text-decoration:none;background-color:#92693d}.acceder[_ngcontent-%COMP%]{padding:3px 10px;font-weight:300;font-size:30px;color:#000;border-radius:15px;border:3px double #000}.acceder[_ngcontent-%COMP%]:hover{opacity:.6;text-decoration:none}.correo[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:3vh;margin:1vh;text-shadow:Sketch_3D;font-family:Sketch_3D}.correo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:1vh;border-radius:5px}.pass[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-position-x:left;font-size:3vh;margin:0;text-shadow:2px 2px 5px beige;font-family:Sketch_3D}.pass[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:1vh 25px 1vh 1vh;border-radius:5px}.acceso-mediante[_ngcontent-%COMP%]{font-size:3vh;margin:1vh;text-shadow:2px 2px 5px beige;font-family:Sketch_3D}.acceso-mediante[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:25px}"]}),t})();function jw(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function Pw(t,e){1&t&&(r.Mb(0,"div",20),r.lc(1," Type your message, please "),r.Lb())}function Nw(t,e){1&t&&(r.Mb(0,"div",20),r.lc(1," Your message must have 5 characters "),r.Lb())}function Dw(t,e){if(1&t&&(r.Mb(0,"div"),r.jc(1,Pw,2,0,"div",19),r.jc(2,Nw,2,0,"div",19),r.Lb()),2&t){const t=r.Xb();r.yb(1),r.cc("ngIf",t.nickname.errors.required),r.yb(1),r.cc("ngIf",t.nickname.errors.minlength)}}function Rw(t,e){1&t&&(r.Mb(0,"div",20),r.lc(1," Type your password, please "),r.Lb())}function Lw(t,e){1&t&&(r.Mb(0,"div",20),r.lc(1," Your password must have 5 characters "),r.Lb())}function Mw(t,e){1&t&&(r.Mb(0,"div",20),r.lc(1," Your password must have less than 100 characters "),r.Lb())}function Fw(t,e){if(1&t&&(r.Mb(0,"div"),r.jc(1,Rw,2,0,"div",19),r.jc(2,Lw,2,0,"div",19),r.jc(3,Mw,2,0,"div",19),r.Lb()),2&t){const t=r.Xb();r.yb(1),r.cc("ngIf",t.password.errors.required),r.yb(1),r.cc("ngIf",t.password.errors.minlength),r.yb(1),r.cc("ngIf",t.password.errors.pattern)}}function Vw(t,e){1&t&&(r.Mb(0,"div",20),r.lc(1," Type your name, please "),r.Lb())}function Uw(t,e){1&t&&(r.Mb(0,"div",20),r.lc(1," Your name must have 5 characters "),r.Lb())}function qw(t,e){if(1&t&&(r.Mb(0,"div"),r.jc(1,Vw,2,0,"div",19),r.jc(2,Uw,2,0,"div",19),r.Lb()),2&t){const t=r.Xb();r.yb(1),r.cc("ngIf",t.name.errors.required),r.yb(1),r.cc("ngIf",t.name.errors.minlength)}}function Hw(t,e){1&t&&(r.Mb(0,"div",20),r.lc(1," Type your email, please "),r.Lb())}function zw(t,e){1&t&&(r.Mb(0,"div",20),r.lc(1," Your email must have 5 characters "),r.Lb())}function Bw(t,e){1&t&&(r.Mb(0,"div",20),r.lc(1," Your email must have a valid format "),r.Lb())}function Qw(t,e){if(1&t&&(r.Mb(0,"div"),r.jc(1,Hw,2,0,"div",19),r.jc(2,zw,2,0,"div",19),r.jc(3,Bw,2,0,"div",19),r.Lb()),2&t){const t=r.Xb();r.yb(1),r.cc("ngIf",t.email.errors.required),r.yb(1),r.cc("ngIf",t.email.errors.minlength),r.yb(1),r.cc("ngIf",t.email.errors.pattern)}}let Ww=(()=>{class t{constructor(t,e,n){this.location=t,this.auth=e,this.users=n,this.emailPattern=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.passwordPattern=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,15}$/,this.signIn=this.createFormGroup()}ageValidator(t){if(t.value)return(new Date).getFullYear()-new Date(t.value).getFullYear()>=17?{required:!1}:{required:!0}}createFormGroup(){return new Ls({email:new Rs("",Ho.pattern(this.emailPattern)),displayName:new Rs("",[Ho.required,Ho.minLength(5)]),password:new Rs("",[Ho.required,Ho.minLength(5)]),nickname:new Rs("")})}sendForm(){return jw(this,void 0,void 0,function*(){const{email:t,password:e}=this.signIn.value;try{this.createUser({email:t,password:e}),this.resetForm(),console.log("usuario registrado con exito")}catch(n){console.log(n)}})}createUser({email:t,password:e}){console.log("Creating user "+t),this.auth.createUserWithEmailAndPassword(t,e).then(function(t){console.log("\xa1Creamos el user, bro! Huepaje!")}).catch(function(t){"auth/email-already-in-use"===t.code&&(console.log("Ya existe el usuario"),confirm("Ya te habias registrado con este email, bro \ud83d\ude1d.\n            \xbfQuieres iniciar sesi\xf3n \u2728?"))})}resetForm(){this.signIn.reset()}ngOnInit(){}get name(){return this.signIn.get("name")}get email(){return this.signIn.get("email")}get message(){return this.signIn.get("message")}get nickname(){return this.signIn.get("nickname")}get password(){return this.signIn.get("password")}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(E),r.Jb(pe),r.Jb(Tw))},t.\u0275cmp=r.Db({type:t,selectors:[["app-sign-in"]],decls:35,vars:5,consts:[[1,"sign-in"],["src","../../assets/type-it-final-final.png"],[1,"container-md"],[3,"formGroup","ngSubmit"],[1,"nickname","form-group-row"],[1,"col-sm-1","col-form-label","text-sm-left"],[1,"inputnick","col-sm-12"],["type","text","formControlName","nickname","placeholder","Type your nickname ...","value","","name","NickName","autocomplete","disabled",1,"form-control"],[4,"ngIf"],[1,"pass","form-group-row"],[1,"col-sm-12"],["type","password","formControlName","password","placeholder","Type your password ...","autocomplete","new-password",1,"form-control"],[1,"name","form-group-row"],["type","text","formControlName","displayName","placeholder","Type your name ...",1,"form-control"],[1,"email","form-group-row"],["type","text","formControlName","email","placeholder","Type your Email ...",1,"form-control"],[1,"form-group-row"],[1,"col-sm-12","text-right"],["type","submit",1,"submit",3,"reset"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,e){1&t&&(r.Mb(0,"div"),r.Mb(1,"div",0),r.Kb(2,"img",1),r.Mb(3,"h1"),r.lc(4," Sign Up "),r.Lb(),r.Lb(),r.Mb(5,"div",2),r.Mb(6,"form",3),r.Tb("ngSubmit",function(){return e.sendForm()}),r.Mb(7,"div",4),r.Mb(8,"label",5),r.lc(9,"Nick"),r.Lb(),r.Mb(10,"div",6),r.Kb(11,"input",7),r.jc(12,Dw,3,2,"div",8),r.Lb(),r.Lb(),r.Mb(13,"div",9),r.Mb(14,"label",5),r.lc(15,"Password"),r.Lb(),r.Mb(16,"div",10),r.Kb(17,"input",11),r.jc(18,Fw,4,3,"div",8),r.Lb(),r.Lb(),r.Mb(19,"div",12),r.Mb(20,"label",5),r.lc(21,"Nombre"),r.Lb(),r.Mb(22,"div",10),r.Kb(23,"input",13),r.jc(24,qw,3,2,"div",8),r.Lb(),r.Lb(),r.Mb(25,"div",14),r.Mb(26,"label",5),r.lc(27,"Email"),r.Lb(),r.Mb(28,"div",10),r.Kb(29,"input",15),r.jc(30,Qw,4,3,"div",8),r.Lb(),r.Lb(),r.Mb(31,"div",16),r.Mb(32,"div",17),r.Mb(33,"button",18),r.Tb("reset",function(){return e.resetForm()}),r.lc(34," Registrarse "),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb()),2&t&&(r.yb(6),r.cc("formGroup",e.signIn),r.yb(6),r.cc("ngIf",e.nickname.invalid&&(e.nickname.dirty||e.nickname.touched)),r.yb(6),r.cc("ngIf",e.password.invalid&&(e.password.dirty||e.password.touched)),r.yb(6),r.cc("ngIf",e.name.invalid&&(e.name.dirty||e.name.touched)),r.yb(6),r.cc("ngIf",e.email.invalid&&(e.email.dirty||e.email.touched)))},directives:[Fs,os,qs,Lo,is,zs,P],styles:["@font-face{font-family:Sketch_3D;src:url(Sketch_3D.8031f9716778868bc1ee.woff)}@font-face{font-family:LoveOliva;src:url(LoveOlivia.27823244bf358b378f5e.ttf)}.sign-in[_ngcontent-%COMP%]{font-family:Sketch_3D;display:flex;padding:2vh;flex:50%;justify-content:center;text-align:center;text-shadow:2px 2px 5px #fff}.sign-in[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:85px;filter:invert(.92) drop-shadow(2px 2px 5px white)}.sign-in[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px}.formulario[_ngcontent-%COMP%]{margin:2vh 70vh 70vh}.submit[_ngcontent-%COMP%]{font-family:Sketch_3D;margin-top:1vh;text-decoration:none;padding:3px 10px;font-weight:300;font-size:30px;color:#fff;background-color:#92693d;border-radius:15px;border:3px double #fff}.submit[_ngcontent-%COMP%]:hover{opacity:.6;text-decoration:none}.nickname[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:3vh;text-shadow:2px 2px 5px #fff;font-family:LoveOLiva}.email[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .pass[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:3vh;text-shadow:2px 2px 5px #fff;font-family:LoveOliva}"]}),t})(),Gw=(()=>{class t{constructor(t,e,n){this.firestore=t,this.auth=e,this.usuarioService=n,this.uid=co.a.auth().currentUser.uid,this.items=this.firestore.collection("usuarios").doc(this.uid).collection("tablones").snapshotChanges().pipe(Object(xt.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)})))}userItem(){return this.items}getTablones(){return this.firestore.collection("usuarios").doc().collection("tablones").snapshotChanges()}createTablon(t){return this.firestore.doc("usuarios/"+this.uid).collection("tablones").add(t)}updateTablon(t){this.firestore.collection("usuarios").doc(this.uid).collection("tablones").doc(""+t.id).update(t)}deleteTablon(t){return jw(this,void 0,void 0,function*(){console.log("UID usuario: "+this.uid),console.log("UID tablon: "+t);const e=yield this.firestore.collection("usuarios").doc(this.uid).collection("tablones").doc(t).delete();console.log(e)})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ow),r.Qb(pe),r.Qb(Tw))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function $w(t,e){if(1&t){const t=r.Nb();r.Mb(0,"div",28),r.Kb(1,"img",29),r.Mb(2,"div",30),r.Mb(3,"h4",31),r.lc(4),r.Lb(),r.Kb(5,"div",32),r.Mb(6,"p",31),r.lc(7,"DESCRIPCI\xd3N"),r.Lb(),r.Mb(8,"p",33),r.lc(9),r.Lb(),r.Mb(10,"div",32),r.Mb(11,"button",34),r.Tb("click",function(){r.gc(t);const n=e.$implicit;return r.Xb().deleteTablon(n.id)}),r.Wb(),r.Mb(12,"svg",35),r.Kb(13,"path",36),r.Kb(14,"path",37),r.Lb(),r.Lb(),r.Vb(),r.Mb(15,"button",38),r.Tb("click",function(){r.gc(t);const n=e.$implicit;return r.Xb().updateTablon(n)}),r.Wb(),r.Mb(16,"svg",39),r.Kb(17,"path",40),r.Kb(18,"path",41),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb()}if(2&t){const t=e.$implicit;r.yb(1),r.cc("src",t.fondo,r.hc),r.yb(3),r.nc(" ",t.titulo,""),r.yb(5),r.nc(" ",t.descripcion,"")}}function Kw(t,e){if(1&t){const t=r.Nb();r.Mb(0,"tr"),r.Mb(1,"td"),r.lc(2),r.Lb(),r.Mb(3,"td"),r.lc(4),r.Lb(),r.Mb(5,"td"),r.lc(6),r.Lb(),r.Mb(7,"td"),r.lc(8),r.Lb(),r.Mb(9,"td"),r.lc(10),r.Lb(),r.Mb(11,"td"),r.Mb(12,"button",2),r.Tb("click",function(){r.gc(t);const n=e.$implicit;return r.Xb().delete(n.userkey)}),r.lc(13,"Delete"),r.Lb(),r.Lb(),r.Lb()}if(2&t){const t=e.$implicit;r.yb(2),r.mc(t.displayName),r.yb(2),r.mc(t.email),r.yb(2),r.mc(t.uid),r.yb(2),r.mc(t.nickname),r.yb(2),r.mc(t.date)}}const Yw=[{path:"main",component:Io},{path:"login",component:kw},{path:"sign-in",component:Ww},{path:"tablones",component:(()=>{class t{constructor(t){this.tablonService=t,this.fondos=["default","fondo1","fondo2","fondo3","fondo4"],this.newTablon={titulo:"",descripcion:"",fondo:""},this.tablon={name:""},this.editarTablon={name:""},this.tablones=this.tablonService.items,this.tablonForm=this.createFormGroup()}createFormGroup(){return new Ls({titulo:new Rs(""),descripcion:new Rs(""),fondo:new Rs("")})}formReset(){this.tablonForm.reset()}addTablon(){this.tablonService.createTablon(this.newTablon)}deleteTablon(t){console.log(t),this.tablonService.deleteTablon(t)}updateTablon(t){this.editarTablon=t}updateTablonEditado(){this.tablonService.updateTablon(this.editarTablon)}ngOnInit(){}get titulo(){return this.tablonForm.get("titulo")}get descripcion(){return this.tablonForm.get("descripcion")}get fondo(){return this.tablonForm.get("fondo")}changeImage(t){if(!t.files||0===t.files.length)return;const e=new FileReader;e.readAsDataURL(t.files[0]),e.addEventListener("loadend",t=>{this.newTablon.fondo=e.result.toString()})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Gw))},t.\u0275cmp=r.Db({type:t,selectors:[["app-tablones"]],decls:63,vars:10,consts:[[1,"container"],[1,"tablon"],["src","../../../../assets/type-it-final-final.png"],[1,"titulo",2,"font-size","50px"],[1,"tablas","card-columns"],["class","card bg-light border-dark",4,"ngFor","ngForOf"],[1,"creacion"],["src","../../../assets/crear_tablero.png","alt","nuevo_tablero",1,"image",2,"height","20vh","width","37vh"],[1,"middle"],["id","crearTablon","data-toggle","modal","data-target","#anadir"],["id","anadir","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body"],[3,"formGroup","ngSubmit"],["type","text","formControlName","titulo","placeholder","Type your name...",1,"form-control",3,"ngModel","ngModelChange"],["type","text","formControlName","descripcion","placeholder","Type your description...",1,"form-control",3,"ngModel","ngModelChange"],["type","file","formControlName","fondo",1,"form-control",3,"change"],["filename",""],[1,"modal-footer"],["type","button","type","submit",1,"btn","btn-secondary",3,"reset"],["id","editar","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["type","submit",1,"btn","btn-warning","mt-3","mb-3"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],[1,"card","bg-light","border-dark"],["alt","",1,"card-img-top",2,"opacity","0.5","width","37vh","height","35vh",3,"src"],[1,"card-img-overlay"],[1,"card-title"],[1,"card-footer","bg-transparent","border-dark"],[1,"card-text"],[1,"btn","btn-danger","ml-3","float-right",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash"],["d","M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"],["fill-rule","evenodd","d","M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"],["data-toggle","modal","data-target","#editar",1,"btn","btn-primary","float-left",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil-square"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"]],template:function(t,e){if(1&t){const t=r.Nb();r.Mb(0,"div",0),r.Mb(1,"div",1),r.Kb(2,"img",2),r.Mb(3,"h1",3),r.lc(4," Mis Tablones "),r.Lb(),r.Lb(),r.Mb(5,"div",0),r.Mb(6,"div",4),r.jc(7,$w,19,3,"div",5),r.Yb(8,"async"),r.Mb(9,"div",6),r.Kb(10,"img",7),r.Mb(11,"div",8),r.Mb(12,"button",9),r.lc(13,"Crea un nuevo tabl\xf3n"),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(14,"div",10),r.Mb(15,"div",11),r.Mb(16,"div",12),r.Mb(17,"div",13),r.Mb(18,"h5",14),r.lc(19,"A\xf1ade el nuevo Tabl\xf3n"),r.Lb(),r.Lb(),r.Mb(20,"div",15),r.Mb(21,"form",16),r.Tb("ngSubmit",function(){return e.addTablon()}),r.Mb(22,"label"),r.lc(23,"T\xedtulo"),r.Lb(),r.Mb(24,"input",17),r.Tb("ngModelChange",function(t){return e.newTablon.titulo=t}),r.Lb(),r.Mb(25,"label"),r.lc(26,"Descripci\xf3n"),r.Lb(),r.Mb(27,"textarea",18),r.Tb("ngModelChange",function(t){return e.newTablon.descripcion=t}),r.lc(28,"          "),r.Lb(),r.Mb(29,"label"),r.lc(30,"Fondo"),r.Lb(),r.Mb(31,"input",19,20),r.Tb("change",function(){r.gc(t);const n=r.fc(32);return e.changeImage(n)}),r.Lb(),r.Mb(33,"div",21),r.Mb(34,"button",22),r.Tb("reset",function(){return e.formReset()}),r.lc(35,"Crear tabl\xf3n"),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(36,"div",23),r.Mb(37,"div",11),r.Mb(38,"div",12),r.Mb(39,"div",13),r.Mb(40,"h5",14),r.lc(41),r.Lb(),r.Mb(42,"button",24),r.Mb(43,"span",25),r.lc(44,"\xd7"),r.Lb(),r.Lb(),r.Lb(),r.Mb(45,"div",15),r.Mb(46,"form",16),r.Tb("ngSubmit",function(){return e.updateTablonEditado()}),r.Mb(47,"label"),r.lc(48,"Nombre"),r.Lb(),r.Mb(49,"input",17),r.Tb("ngModelChange",function(t){return e.editarTablon.titulo=t}),r.Lb(),r.Mb(50,"label"),r.lc(51,"Descripci\xf3n"),r.Lb(),r.Mb(52,"textarea",18),r.Tb("ngModelChange",function(t){return e.editarTablon.descripcion=t}),r.lc(53,"          "),r.Lb(),r.Mb(54,"label"),r.lc(55,"Fondo"),r.Lb(),r.Mb(56,"input",19,20),r.Tb("change",function(){r.gc(t);const n=r.fc(32);return e.changeImage(n)}),r.Lb(),r.Mb(58,"button",26),r.lc(59,"Editar"),r.Lb(),r.Lb(),r.Lb(),r.Mb(60,"div",21),r.Mb(61,"button",27),r.lc(62,"Close"),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb()}2&t&&(r.yb(7),r.cc("ngForOf",r.Zb(8,8,e.tablones)),r.yb(14),r.cc("formGroup",e.tablonForm),r.yb(3),r.cc("ngModel",e.newTablon.titulo),r.yb(3),r.cc("ngModel",e.newTablon.descripcion),r.yb(14),r.nc("Editar: ",e.editarTablon.titulo,""),r.yb(5),r.cc("formGroup",e.tablonForm),r.yb(3),r.cc("ngModel",e.editarTablon.titulo),r.yb(3),r.cc("ngModel",e.editarTablon.descripcion))},directives:[k,Fs,os,qs,Lo,is,zs],pipes:[V],styles:["@font-face{font-family:LoveOliva;src:url(LoveOlivia.27823244bf358b378f5e.ttf)}@font-face{font-family:Sketch_3D;src:url(Sketch_3D.8031f9716778868bc1ee.woff)}.tablon[_ngcontent-%COMP%]{font-family:Sketch_3D;font-size:40px;display:flex;padding:2vh;flex:50%;justify-content:center;text-align:center;text-shadow:2px 2px 5px beige}.tablon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:85px;filter:invert(.92) drop-shadow(2px 2px 5px beige)}.tablones[_ngcontent-%COMP%]{text-align:center}.creacion[_ngcontent-%COMP%], .tablones[_ngcontent-%COMP%]{display:flex;justify-content:center}.creacion[_ngcontent-%COMP%]{position:relative;width:100%;align-items:center}.middle[_ngcontent-%COMP%]{transition:.5s ease;opacity:0;position:absolute}.creacion[_ngcontent-%COMP%]:hover   .image[_ngcontent-%COMP%]{opacity:.3}.creacion[_ngcontent-%COMP%]:hover   .middle[_ngcontent-%COMP%]{opacity:1}#crearTablon[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;font-size:16px;width:20vh;padding:10px}#fileimage[_ngcontent-%COMP%]{background-image:image()}"]}),t})()},{path:"usuario-list",component:(()=>{class t{constructor(t,e){this.usuarioService=t,this.firestore=e,this.users=this.firestore.collection("usuarios").valueChanges()}ngOnInit(){}create(t){this.usuarioService.createUsers(t)}update(t){this.usuarioService.updateUsers(t)}delete(t){this.usuarioService.deleteUsers(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Tw),r.Jb(Ow))},t.\u0275cmp=r.Db({type:t,selectors:[["app-usuario-list"]],decls:13,vars:3,consts:[[1,"container"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(t,e){1&t&&(r.Mb(0,"table",0),r.Mb(1,"thead"),r.Mb(2,"th"),r.lc(3,"Nombre"),r.Lb(),r.Mb(4,"th"),r.lc(5,"email At"),r.Lb(),r.Mb(6,"th"),r.lc(7,"Nick"),r.Lb(),r.Mb(8,"th"),r.lc(9,"create at"),r.Lb(),r.Lb(),r.Mb(10,"tbody"),r.jc(11,Kw,14,5,"tr",1),r.Yb(12,"async"),r.Lb(),r.Lb()),2&t&&(r.yb(11),r.cc("ngForOf",r.Zb(12,1,e.users)))},directives:[k],pipes:[V],styles:[""]}),t})()},{path:"",redirectTo:"/main",pathMatch:"full"},{path:"**",redirectTo:"/main",pathMatch:"full"}];class Jw{}class Xw{}class Zw{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Zw?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Zw;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Zw?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class tE{encodeKey(t){return eE(t)}encodeValue(t){return eE(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function eE(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class nE{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new tE,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new nE({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function rE(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function iE(t){return"undefined"!=typeof Blob&&t instanceof Blob}function oE(t){return"undefined"!=typeof FormData&&t instanceof FormData}class sE{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Zw),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new nE,this.urlWithParams=e}serializeBody(){return null===this.body?null:rE(this.body)||iE(this.body)||oE(this.body)||"string"==typeof this.body?this.body:this.body instanceof nE?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||oE(this.body)?null:iE(this.body)?this.body.type||null:rE(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof nE?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new sE(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var aE=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class uE extends class{constructor(t,e=200,n="OK"){this.headers=t.headers||new Zw,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=aE.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new uE({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function cE(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let lE=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof sE)r=t;else{let i=void 0;i=n.headers instanceof Zw?n.headers:new Zw(n.headers);let o=void 0;n.params&&(o=n.params instanceof nE?n.params:new nE({fromObject:n.params})),r=new sE(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Ct.a)(r).pipe(He(t=>this.handler.handle(t)));if(t instanceof sE||"events"===n.observe)return i;const o=i.pipe(Ht(t=>t instanceof uE));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(xt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(xt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(xt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(xt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new nE).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,cE(n,e))}post(t,e,n={}){return this.request("POST",t,cE(n,e))}put(t,e,n={}){return this.request("PUT",t,cE(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Jw))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();var hE=function(){function t(){}var e;return e=t,t.forRoot=function(){return{ngModule:e}},t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[U]]}),t}();function fE(t){return!!t&&(t instanceof Ot.a||"function"==typeof t.lift&&"function"==typeof t.subscribe)}class dE{}let pE=(()=>{class t extends dE{getTranslation(t){return Object(Ct.a)({})}}return t.\u0275fac=function(e){return gE(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const gE=r.Ob(pE);class yE{}let mE=(()=>{class t{handle(t){return t.key}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();function vE(t){return null!=t}function bE(t){return t&&"object"==typeof t&&!Array.isArray(t)}function _E(t,e){let n=Object.assign({},t);return bE(t)&&bE(e)&&Object.keys(e).forEach(r=>{bE(e[r])?r in t?n[r]=_E(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class wE{}let EE=(()=>{class t extends wE{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(t,e){let n;return n="string"==typeof t?this.interpolateString(t,e):"function"==typeof t?this.interpolateFunction(t,e):t,n}getValue(t,e){let n="string"==typeof e?e.split("."):[e];e="";do{e+=n.shift(),!vE(t)||!vE(t[e])||"object"!=typeof t[e]&&n.length?n.length?e+=".":t=void 0:(t=t[e],e="")}while(n.length);return t}interpolateFunction(t,e){return t(e)}interpolateString(t,e){return e?t.replace(this.templateMatcher,(t,n)=>{let r=this.getValue(e,n);return vE(r)?r:t}):t}}return t.\u0275fac=function(e){return CE(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const CE=r.Ob(EE);class OE{}let TE=(()=>{class t extends OE{compile(t,e){return t}compileTranslations(t,e){return t}}return t.\u0275fac=function(e){return SE(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const SE=r.Ob(TE);class IE{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new r.n,this.onLangChange=new r.n,this.onDefaultLangChange=new r.n}}const xE=new r.q("USE_STORE"),AE=new r.q("USE_DEFAULT_LANG"),kE=new r.q("DEFAULT_LANGUAGE"),jE=new r.q("USE_EXTEND");let PE=(()=>{class t{constructor(t,e,n,i,o,s=!0,a=!1,u=!1,c){this.store=t,this.currentLoader=e,this.compiler=n,this.parser=i,this.missingTranslationHandler=o,this.useDefaultLang=s,this.isolate=a,this.extend=u,this.pending=!1,this._onTranslationChange=new r.n,this._onLangChange=new r.n,this._onDefaultLangChange=new r.n,this._langs=[],this._translations={},this._translationRequests={},c&&this.setDefaultLang(c)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}setDefaultLang(t){if(t===this.defaultLang)return;let e=this.retrieveTranslations(t);void 0!==e?(null==this.defaultLang&&(this.defaultLang=t),e.pipe(Gt(1)).subscribe(e=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return Object(Ct.a)(this.translations[t]);let e=this.retrieveTranslations(t);return void 0!==e?(this.currentLang||(this.currentLang=t),e.pipe(Gt(1)).subscribe(e=>{this.changeLang(t)}),e):(this.changeLang(t),Object(Ct.a)(this.translations[t]))}retrieveTranslations(t){let e;return(void 0===this.translations[t]||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),e=this._translationRequests[t]),e}getTranslation(t){this.pending=!0;const e=this.currentLoader.getTranslation(t).pipe(Vt(1),Gt(1));return this.loadingTranslations=e.pipe(Object(xt.a)(e=>this.compiler.compileTranslations(e,t)),Vt(1),Gt(1)),this.loadingTranslations.subscribe({next:e=>{this.translations[t]=this.extend&&this.translations[t]?Object.assign(Object.assign({},e),this.translations[t]):e,this.updateLangs(),this.pending=!1},error:t=>{this.pending=!1}}),e}setTranslation(t,e,n=!1){e=this.compiler.compileTranslations(e,t),this.translations[t]=(n||this.extend)&&this.translations[t]?_E(this.translations[t],e):e,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(t=>{-1===this.langs.indexOf(t)&&this.langs.push(t)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,e,n){let r;if(e instanceof Array){let r={},i=!1;for(let o of e)r[o]=this.getParsedResult(t,o,n),fE(r[o])&&(i=!0);return i?Ao(e.map(t=>fE(r[t])?r[t]:Object(Ct.a)(r[t]))).pipe(Object(xt.a)(t=>{let n={};return t.forEach((t,r)=>{n[e[r]]=t}),n})):r}if(t&&(r=this.parser.interpolate(this.parser.getValue(t,e),n)),void 0===r&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(r=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],e),n)),void 0===r){let t={key:e,translateService:this};void 0!==n&&(t.interpolateParams=n),r=this.missingTranslationHandler.handle(t)}return void 0!==r?r:e}get(t,e){if(!vE(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(He(n=>fE(n=this.getParsedResult(n,t,e))?n:Object(Ct.a)(n)));{let n=this.getParsedResult(this.translations[this.currentLang],t,e);return fE(n)?n:Object(Ct.a)(n)}}getStreamOnTranslationChange(t,e){if(!vE(t)||!t.length)throw new Error('Parameter "key" required');return Ne(Ie(()=>this.get(t,e)),this.onTranslationChange.pipe(kt(n=>{const r=this.getParsedResult(n.translations,t,e);return"function"==typeof r.subscribe?r:Object(Ct.a)(r)})))}stream(t,e){if(!vE(t)||!t.length)throw new Error('Parameter "key" required');return Ne(Ie(()=>this.get(t,e)),this.onLangChange.pipe(kt(n=>{const r=this.getParsedResult(n.translations,t,e);return fE(r)?r:Object(Ct.a)(r)})))}instant(t,e){if(!vE(t)||!t.length)throw new Error('Parameter "key" required');let n=this.getParsedResult(this.translations[this.currentLang],t,e);if(fE(n)){if(t instanceof Array){let e={};return t.forEach((n,r)=>{e[t[r]]=t[r]}),e}return t}return n}set(t,e,n=this.currentLang){this.translations[n][t]=this.compiler.compile(e,n),this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),null==this.defaultLang&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==t?(-1!==t.indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(IE),r.Qb(dE),r.Qb(OE),r.Qb(wE),r.Qb(yE),r.Qb(AE),r.Qb(xE),r.Qb(jE),r.Qb(kE))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),NE=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[e.loader||{provide:dE,useClass:pE},e.compiler||{provide:OE,useClass:TE},e.parser||{provide:wE,useClass:EE},e.missingTranslationHandler||{provide:yE,useClass:mE},IE,{provide:xE,useValue:e.isolate},{provide:AE,useValue:e.useDefaultLang},{provide:jE,useValue:e.extend},{provide:kE,useValue:e.defaultLanguage},PE]}}static forChild(e={}){return{ngModule:t,providers:[e.loader||{provide:dE,useClass:pE},e.compiler||{provide:OE,useClass:TE},e.parser||{provide:wE,useClass:EE},e.missingTranslationHandler||{provide:yE,useClass:mE},{provide:xE,useValue:e.isolate},{provide:AE,useValue:e.useDefaultLang},{provide:jE,useValue:e.extend},{provide:kE,useValue:e.defaultLanguage},PE]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)}}),t})();class DE{constructor(t,e="/assets/i18n/",n=".json"){this.http=t,this.prefix=e,this.suffix=n}getTranslation(t){return this.http.get(`${this.prefix}${t}${this.suffix}`)}}class RE{}const LE="*";function ME(t,e=null){return{type:2,steps:t,options:e}}function FE(t){return{type:6,styles:t,offset:null}}function VE(t){Promise.resolve(null).then(t)}class UE{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){VE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class qE{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?VE(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function HE(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function zE(t){switch(t.length){case 0:return new UE;case 1:return t[0];default:return new qE(t)}}function BE(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case LE:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function QE(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&WE(n,"start",t)));break;case"done":t.onDone(()=>r(n&&WE(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&WE(n,"destroy",t)))}}function WE(t,e,n){const r=n.totalTime,i=GE(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function GE(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function $E(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function KE(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let YE=(t,e)=>!1,JE=(t,e)=>!1,XE=(t,e,n)=>[];const ZE=HE();(ZE||"undefined"!=typeof Element)&&(YE=(t,e)=>t.contains(e),JE=(()=>{if(ZE||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):JE}})(),XE=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let tC=null,eC=!1;function nC(t){tC||(tC=("undefined"!=typeof document?document.body:null)||{},eC=!!tC.style&&"WebkitAppearance"in tC.style);let e=!0;return tC.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in tC.style,!e&&eC)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in tC.style),e}const rC=JE,iC=YE,oC=XE;function sC(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let aC=(()=>{class t{validateStyleProperty(t){return nC(t)}matchesElement(t,e){return rC(t,e)}containsElement(t,e){return iC(t,e)}query(t,e,n){return oC(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new UE(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),uC=(()=>{class t{}return t.NOOP=new aC,t})();const cC="ng-enter",lC="ng-leave",hC="ng-trigger",fC=".ng-trigger",dC="ng-animating",pC=".ng-animating";function gC(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:yC(parseFloat(e[1]),e[2])}function yC(t,e){switch(e){case"s":return 1e3*t;default:return t}}function mC(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=yC(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=yC(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function vC(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function bC(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else vC(t,n);return n}function _C(t,e,n){return n?e+":"+n+";":""}function wC(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=_C(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=_C(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function EC(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=kC(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),HE()&&wC(t))}function CC(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=kC(e);t.style[n]=""}),HE()&&wC(t))}function OC(t){return Array.isArray(t)?1==t.length?t[0]:ME(t):t}const TC=new RegExp("{{\\s*(.+?)\\s*}}","g");function SC(t){let e=[];if("string"==typeof t){let n;for(;n=TC.exec(t);)e.push(n[1]);TC.lastIndex=0}return e}function IC(t,e,n){const r=t.toString(),i=r.replace(TC,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function xC(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const AC=/-+([a-z0-9])/g;function kC(t){return t.replace(AC,(...t)=>t[1].toUpperCase())}function jC(t,e){return 0===t||0===e}function PC(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=DC(t,e)})}}return e}function NC(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function DC(t,e){return window.getComputedStyle(t)[e]}const RC="*";function LC(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(VC(i,s)),"<"!=o[0]||i==RC&&s==RC||e.push(VC(s,i))}(t,n,e)):n.push(t),n}const MC=new Set(["true","1"]),FC=new Set(["false","0"]);function VC(t,e){const n=MC.has(t)||FC.has(t),r=MC.has(e)||FC.has(e);return(i,o)=>{let s=t==RC||t==i,a=e==RC||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?MC.has(t):FC.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?MC.has(e):FC.has(e)),s&&a}}const UC=new RegExp("s*:selfs*,?","g");function qC(t,e,n){return new HC(t).build(e,n)}class HC{constructor(t){this._driver=t}build(t,e){const n=new zC(e);return this._resetContextStyleTimingState(n),NC(this,OC(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(BC(t)){const e=t;Object.keys(e).forEach(t=>{SC(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=xC(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=NC(this,OC(t.animation),e);return{type:1,matchers:LC(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:QC(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>NC(this,t,e)),options:QC(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=NC(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:QC(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return WC(mC(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=WC(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||mC(r,e),WC(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:FE({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=FE(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==LE?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(BC(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=SC(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(BC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(BC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=f+d.delay+s,d.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:NC(this,OC(t.animation),e),options:QC(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:QC(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:QC(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(UC,"")),[t=t.replace(/@\*/g,fC).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,pC),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,$E(e.collectedStyles,e.currentQuerySelector,{});const s=NC(this,OC(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:QC(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:mC(t.timings,e.errors,!0);return{type:12,animation:NC(this,OC(t.animation),e),timings:n,options:null}}}class zC{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function BC(t){return!Array.isArray(t)&&"object"==typeof t}function QC(t){var e;return t?(t=vC(t)).params&&(t.params=(e=t.params)?vC(e):null):t={},t}function WC(t,e,n){return{duration:t,delay:e,easing:n}}function GC(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class $C{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const KC=new RegExp(":enter","g"),YC=new RegExp(":leave","g");function JC(t,e,n,r,i,o={},s={},a,u,c=[]){return(new XC).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class XC{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new $C;const l=new tO(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),NC(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[GC(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?gC(n.duration):null,o=null!=n.delay?gC(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),NC(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ZC);const t=gC(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>NC(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?gC(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),NC(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return mC(e.params?IC(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?gC(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=ZC);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),NC(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;NC(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const ZC={};class tO{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ZC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new eO(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=gC(n.duration)),null!=n.delay&&(r.delay=gC(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=IC(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new tO(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=ZC,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new nO(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(KC,"."+this._enterClassName)).replace(YC,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class eO{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new eO(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||LE,this._currentKeyframe[t]=LE}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=LE})):bC(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=IC(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:LE),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=bC(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==LE&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?xC(t.values()):[],o=e.size?xC(e.values()):[];if(n){const t=r[0],e=vC(t);t.offset=0,e.offset=1,r=[t,e]}return GC(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class nO extends eO{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=bC(t[0],!1);a.offset=0,i.push(a);const u=bC(t[0],!1);u.offset=rO(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=bC(t[r],!1);s.offset=rO((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return GC(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function rO(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class iO{}class oO extends iO{normalizePropertyName(t,e){return kC(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(sO[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const sO=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function aO(t,e,n,r,i,o,s,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const uO={};class cO{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||uO,f=this.buildStyles(n,s&&s.params||uO,l),d=a&&a.params||uO,p=this.buildStyles(r,d,l),g=new Set,y=new Map,m=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),d)},_=c?[]:JC(t,e,this.ast.animation,i,o,f,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return aO(e,this._triggerName,n,r,v,f,p,[],[],y,m,w,l);_.forEach(t=>{const n=t.element,r=$E(y,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=$E(m,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const E=xC(g.values());return aO(e,this._triggerName,n,r,v,f,p,_,E,y,m,w)}}class lO{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=vC(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=IC(o,r,e)),n[t]=o})}}),n}}class hO{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new lO(t.style,t.options&&t.options.params||{})}),fO(this.states,"true","1"),fO(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new cO(t,e,this.states))}),this.fallbackTransition=new cO(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function fO(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const dO=new $C;class pO{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=qC(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=BE(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=JC(this._driver,e,i,cC,lC,{},{},n,dO,r),o.forEach(t=>{const e=$E(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,LE)})});const a=zE(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=GE(e,"","","");return QE(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const gO="ng-animate-queued",yO="ng-animate-disabled",mO=".ng-animate-disabled",vO=[],bO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},_O={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class wO{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=vC(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const EO="void",CO=new wO(EO);class OO{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,jO(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=$E(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=$E(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(jO(t,hC),jO(t,"ng-trigger-"+e),a[e]=CO),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new SO(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(jO(t,hC),jO(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new wO(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=CO),u.value!==EO&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{CC(t,n),EC(t,r)})}return}const c=$E(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(jO(t,gO),o.onStart(()=>{PO(t,gO)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,fC,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,EO,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&zE(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(t)[r]||CO,s=new wO(EO),a=new SO(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==bO||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){jO(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=GE(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,QE(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class TO{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new OO(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(IO(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!IO(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),jO(t,yO)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),PO(t,yO))}removeNode(t,e,n,r){if(IO(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return IO(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,fC,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,pC,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return zE(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=bO,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,mO)&&this.markElementAsDisabled(t,!1),this.driver.query(t,mO,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)jO(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?zE(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new $C,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=kO(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n=cC+p++;d.set(e,n),t.forEach(t=>jO(t,n))});const g=[],y=new Set,m=new Set;for(let k=0;k<this.collectedLeaveElements.length;k++){const t=this.collectedLeaveElements[k],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),y.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>y.add(t)):m.add(t))}const v=new Map,b=kO(h,Array.from(y));b.forEach((t,e)=>{const n=lC+p++;v.set(e,n),t.forEach(t=>jO(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>PO(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>PO(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let k=this._namespaceList.length-1;k>=0;k--)this._namespaceList[k].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>CC(i,p.fromStyles)),e.onDestroy(()=>EC(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>CC(i,p.fromStyles)),e.onDestroy(()=>EC(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>$E(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,C=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{$E(E,e,[]).push(t),t.destroy()})});const O=g.filter(t=>RO(t,a,u)),T=new Map;AO(T,this.driver,m,u,LE).forEach(t=>{RO(t,a,u)&&O.push(t)});const S=new Map;f.forEach((t,e)=>{AO(S,this.driver,new Set(t),a,"!")}),O.forEach(t=>{const e=T.get(t),n=S.get(t);T.set(t,Object.assign(Object.assign({},e),n))});const I=[],x=[],A={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>EC(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=A;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,E,i,S,T);if(o.setRealPlayer(n),t===A)I.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=zE(e)),r.push(o)}}else CC(e,s.fromStyles),o.onDestroy(()=>EC(e,s.toStyles)),x.push(o),c.has(e)&&r.push(o)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=zE(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let k=0;k<g.length;k++){const t=g[k],e=t.__ng_removed;if(PO(t,lC),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,pC,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?NO(this,t,r):this.processLeaveNode(t)}return g.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==EO;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=$E(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}CC(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new UE(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return DO(t,e),e}((n.get(h)||vO).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),y=o.get(h),m=BE(0,this._normalizer,0,e.keyframes,g,y),v=this._buildPlayer(e,m,p);if(e.subTimeline&&r&&l.add(h),d){const e=new SO(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{$E(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>jO(t,dC));const f=zE(h);return f.onDestroy(()=>{c.forEach(t=>PO(t,dC)),EC(a,e.toStyles)}),l.forEach(t=>{$E(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new UE(t.duration,t.delay)}}class SO{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new UE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>QE(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){$E(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function IO(t){return t&&1===t.nodeType}function xO(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function AO(t,e,n,r,i){const o=[];n.forEach(t=>o.push(xO(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=_O,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>xO(t,o[a++])),s}function kO(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function jO(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function PO(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function NO(t,e,n){zE(n).onDone(()=>t.processLeaveNode(e))}function DO(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof qE?DO(r.players,e):e.push(r)}}function RO(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class LO{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new TO(t,e,n),this._timelineEngine=new pO(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=qC(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new hO(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=KE(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=KE(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function MO(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=VO(e[0]),e.length>1&&(r=VO(e[e.length-1]))):e&&(n=VO(e)),n||r?new FO(t,n,r):null}let FO=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&EC(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(EC(this._element,this._initialStyles),this._endStyles&&(EC(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(CC(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(CC(this._element,this._endStyles),this._endStyles=null),EC(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function VO(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];UO(i)&&(e=e||{},e[i]=t[i])}return e}function UO(t){return"display"===t||"position"===t}const qO="animation",HO="animationend";class zO{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=KO(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),$O(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),GO(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){BO(this._element,this._name,"paused")}resume(){BO(this._element,this._name,"running")}setPosition(t){const e=QO(this._element,this._name);this._position=t*this._duration,$O(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),GO(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=KO(t,"").split(","),r=WO(n,e);r>=0&&(n.splice(r,1),$O(t,"",n.join(",")))}(this._element,this._name))}}function BO(t,e,n){$O(t,"PlayState",n,QO(t,e))}function QO(t,e){const n=KO(t,"");return n.indexOf(",")>0?WO(n.split(","),e):WO([n],e)}function WO(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function GO(t,e,n){n?t.removeEventListener(HO,e):t.addEventListener(HO,e)}function $O(t,e,n,r){const i=qO+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function KO(t,e){return t.style[qO+e]}class YO{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new zO(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:DC(this.element,n))})}this.currentSnapshot=t}}class JO extends UE{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=sC(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class XO{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return nC(t)}matchesElement(t,e){return rC(t,e)}containsElement(t,e){return iC(t,e)}query(t,e,n){return oC(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>sC(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){s&&this._notifyFaultyScrubber();const a=o.filter(t=>t instanceof YO),u={};jC(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=PC(t,e,u));if(0==n)return new JO(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const f=MO(t,e),d=new YO(t,e,l,n,r,i,c,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class ZO{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:DC(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class tT{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(eT().toString()),this._cssKeyframesDriver=new XO}validateStyleProperty(t){return nC(t)}matchesElement(t,e){return rC(t,e)}containsElement(t,e){return iC(t,e)}query(t,e,n){return oC(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof ZO);jC(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=MO(t,e=PC(t,e=e.map(t=>bC(t,!1)),u));return new ZO(t,e,a,l)}}function eT(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let nT=(()=>{class t extends RE{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.Q.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?ME(t):t;return oT(this._renderer,null,e,"register",[n]),new rT(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.E),r.Qb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class rT extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new iT(this._id,t,e||{},this._renderer)}}class iT{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return oT(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function oT(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const sT="@",aT="@.disabled";let uT=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new cT("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new lT(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.E),r.Qb(LO),r.Qb(r.z))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class cT{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==sT&&e==aT?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class lT extends cT{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==sT?"."==e.charAt(1)&&e==aT?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==sT){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=sT&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let hT=(()=>{class t extends LO{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a),r.Qb(uC),r.Qb(iO))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const fT=[{provide:uC,useFactory:function(){return"function"==typeof eT()?new tT:new XO}},{provide:new r.q("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:RE,useClass:nT},{provide:iO,useFactory:function(){return new oO}},{provide:LO,useClass:hT},{provide:r.E,useFactory:function(t,e,n){return new uT(t,e,n)},deps:[st,LO,r.z]}];let dT=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:fT,imports:[bt]}),t})(),pT=(()=>{class t{}return t.\u0275mod=r.Hb({type:t,bootstrap:[Zi]}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[],imports:[[bt,hE.forRoot(),$s,ae.a.initializeApp(i),ge,So,Ni.forRoot(Yw),NE.forRoot({loader:{provide:dE,deps:[Xw],useFactory:gT}}),dT]]}),t})();function gT(t){return new DE(new lE(t))}Object(r.S)(),mt().bootstrapModule(pT).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);